var ZenFS=(()=>{var Rd=Object.create;var On=Object.defineProperty;var Nd=Object.getOwnPropertyDescriptor;var kd=Object.getOwnPropertyNames;var Td=Object.getPrototypeOf,Od=Object.prototype.hasOwnProperty;var O=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Fn=(t,e)=>{for(var r in e)On(t,r,{get:e[r],enumerable:!0})},Za=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of kd(e))!Od.call(t,i)&&i!==r&&On(t,i,{get:()=>e[i],enumerable:!(n=Nd(e,i))||n.enumerable});return t};var Sr=(t,e,r)=>(r=t!=null?Rd(Td(t)):{},Za(e||!t||!t.__esModule?On(r,"default",{value:t,enumerable:!0}):r,t)),Fd=t=>Za(On({},"__esModule",{value:!0}),t);var ac=O((dg,ms)=>{"use strict";var Qd=Object.prototype.hasOwnProperty,ge="~";function nn(){}Object.create&&(nn.prototype=Object.create(null),new nn().__proto__||(ge=!1));function Zd(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function oc(t,e,r,n,i){if(typeof r!="function")throw new TypeError("The listener must be a function");var s=new Zd(r,n||t,i),o=ge?ge+e:e;return t._events[o]?t._events[o].fn?t._events[o]=[t._events[o],s]:t._events[o].push(s):(t._events[o]=s,t._eventsCount++),t}function Vn(t,e){--t._eventsCount===0?t._events=new nn:delete t._events[e]}function pe(){this._events=new nn,this._eventsCount=0}pe.prototype.eventNames=function(){var e=[],r,n;if(this._eventsCount===0)return e;for(n in r=this._events)Qd.call(r,n)&&e.push(ge?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(r)):e};pe.prototype.listeners=function(e){var r=ge?ge+e:e,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,o=new Array(s);i<s;i++)o[i]=n[i].fn;return o};pe.prototype.listenerCount=function(e){var r=ge?ge+e:e,n=this._events[r];return n?n.fn?1:n.length:0};pe.prototype.emit=function(e,r,n,i,s,o){var a=ge?ge+e:e;if(!this._events[a])return!1;var c=this._events[a],l=arguments.length,u,d;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,r),!0;case 3:return c.fn.call(c.context,r,n),!0;case 4:return c.fn.call(c.context,r,n,i),!0;case 5:return c.fn.call(c.context,r,n,i,s),!0;case 6:return c.fn.call(c.context,r,n,i,s,o),!0}for(d=1,u=new Array(l-1);d<l;d++)u[d-1]=arguments[d];c.fn.apply(c.context,u)}else{var p=c.length,w;for(d=0;d<p;d++)switch(c[d].once&&this.removeListener(e,c[d].fn,void 0,!0),l){case 1:c[d].fn.call(c[d].context);break;case 2:c[d].fn.call(c[d].context,r);break;case 3:c[d].fn.call(c[d].context,r,n);break;case 4:c[d].fn.call(c[d].context,r,n,i);break;default:if(!u)for(w=1,u=new Array(l-1);w<l;w++)u[w-1]=arguments[w];c[d].fn.apply(c[d].context,u)}}return!0};pe.prototype.on=function(e,r,n){return oc(this,e,r,n,!1)};pe.prototype.once=function(e,r,n){return oc(this,e,r,n,!0)};pe.prototype.removeListener=function(e,r,n,i){var s=ge?ge+e:e;if(!this._events[s])return this;if(!r)return Vn(this,s),this;var o=this._events[s];if(o.fn)o.fn===r&&(!i||o.once)&&(!n||o.context===n)&&Vn(this,s);else{for(var a=0,c=[],l=o.length;a<l;a++)(o[a].fn!==r||i&&!o[a].once||n&&o[a].context!==n)&&c.push(o[a]);c.length?this._events[s]=c.length===1?c[0]:c:Vn(this,s)}return this};pe.prototype.removeAllListeners=function(e){var r;return e?(r=ge?ge+e:e,this._events[r]&&Vn(this,r)):(this._events=new nn,this._eventsCount=0),this};pe.prototype.off=pe.prototype.removeListener;pe.prototype.addListener=pe.prototype.on;pe.prefixed=ge;pe.EventEmitter=pe;typeof ms<"u"&&(ms.exports=pe)});var bc=O(Zn=>{"use strict";Zn.byteLength=hh;Zn.toByteArray=ph;Zn.fromByteArray=Sh;var st=[],Me=[],dh=typeof Uint8Array<"u"?Uint8Array:Array,Is="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Yt=0,_c=Is.length;Yt<_c;++Yt)st[Yt]=Is[Yt],Me[Is.charCodeAt(Yt)]=Yt;var Yt,_c;Me[45]=62;Me[95]=63;function gc(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function hh(t){var e=gc(t),r=e[0],n=e[1];return(r+n)*3/4-n}function yh(t,e,r){return(e+r)*3/4-r}function ph(t){var e,r=gc(t),n=r[0],i=r[1],s=new dh(yh(t,n,i)),o=0,a=i>0?n-4:n,c;for(c=0;c<a;c+=4)e=Me[t.charCodeAt(c)]<<18|Me[t.charCodeAt(c+1)]<<12|Me[t.charCodeAt(c+2)]<<6|Me[t.charCodeAt(c+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=Me[t.charCodeAt(c)]<<2|Me[t.charCodeAt(c+1)]>>4,s[o++]=e&255),i===1&&(e=Me[t.charCodeAt(c)]<<10|Me[t.charCodeAt(c+1)]<<4|Me[t.charCodeAt(c+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function wh(t){return st[t>>18&63]+st[t>>12&63]+st[t>>6&63]+st[t&63]}function mh(t,e,r){for(var n,i=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(wh(n));return i.join("")}function Sh(t){for(var e,r=t.length,n=r%3,i=[],s=16383,o=0,a=r-n;o<a;o+=s)i.push(mh(t,o,o+s>a?a:o+s));return n===1?(e=t[r-1],i.push(st[e>>2]+st[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(st[e>>10]+st[e>>4&63]+st[e<<2&63]+"=")),i.join("")}});var xc=O(As=>{As.read=function(t,e,r,n,i){var s,o,a=i*8-n-1,c=(1<<a)-1,l=c>>1,u=-7,d=r?i-1:0,p=r?-1:1,w=t[e+d];for(d+=p,s=w&(1<<-u)-1,w>>=-u,u+=a;u>0;s=s*256+t[e+d],d+=p,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=n;u>0;o=o*256+t[e+d],d+=p,u-=8);if(s===0)s=1-l;else{if(s===c)return o?NaN:(w?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-l}return(w?-1:1)*o*Math.pow(2,s-n)};As.write=function(t,e,r,n,i,s){var o,a,c,l=s*8-i-1,u=(1<<l)-1,d=u>>1,p=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=n?0:s-1,_=n?1:-1,m=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+d>=1?e+=p/c:e+=p*Math.pow(2,1-d),e*c>=2&&(o++,c/=2),o+d>=u?(a=0,o=u):o+d>=1?(a=(e*c-1)*Math.pow(2,i),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;t[r+w]=a&255,w+=_,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;t[r+w]=o&255,w+=_,o/=256,l-=8);t[r+w-_]|=m*128}});var Ce=O(Tr=>{"use strict";var Rs=bc(),Nr=xc(),vc=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Tr.Buffer=y;Tr.SlowBuffer=vh;Tr.INSPECT_MAX_BYTES=50;var ei=2147483647;Tr.kMaxLength=ei;y.TYPED_ARRAY_SUPPORT=Eh();!y.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Eh(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch{return!1}}Object.defineProperty(y.prototype,"parent",{enumerable:!0,get:function(){if(y.isBuffer(this))return this.buffer}});Object.defineProperty(y.prototype,"offset",{enumerable:!0,get:function(){if(y.isBuffer(this))return this.byteOffset}});function xt(t){if(t>ei)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,y.prototype),e}function y(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Os(t)}return Nc(t,e,r)}y.poolSize=8192;function Nc(t,e,r){if(typeof t=="string")return gh(t,e);if(ArrayBuffer.isView(t))return bh(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(ot(t,ArrayBuffer)||t&&ot(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ot(t,SharedArrayBuffer)||t&&ot(t.buffer,SharedArrayBuffer)))return ks(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return y.from(n,e,r);let i=xh(t);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return y.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}y.from=function(t,e,r){return Nc(t,e,r)};Object.setPrototypeOf(y.prototype,Uint8Array.prototype);Object.setPrototypeOf(y,Uint8Array);function kc(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function _h(t,e,r){return kc(t),t<=0?xt(t):e!==void 0?typeof r=="string"?xt(t).fill(e,r):xt(t).fill(e):xt(t)}y.alloc=function(t,e,r){return _h(t,e,r)};function Os(t){return kc(t),xt(t<0?0:Fs(t)|0)}y.allocUnsafe=function(t){return Os(t)};y.allocUnsafeSlow=function(t){return Os(t)};function gh(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!y.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=Tc(t,e)|0,n=xt(r),i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function Ns(t){let e=t.length<0?0:Fs(t.length)|0,r=xt(e);for(let n=0;n<e;n+=1)r[n]=t[n]&255;return r}function bh(t){if(ot(t,Uint8Array)){let e=new Uint8Array(t);return ks(e.buffer,e.byteOffset,e.byteLength)}return Ns(t)}function ks(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&r===void 0?n=new Uint8Array(t):r===void 0?n=new Uint8Array(t,e):n=new Uint8Array(t,e,r),Object.setPrototypeOf(n,y.prototype),n}function xh(t){if(y.isBuffer(t)){let e=Fs(t.length)|0,r=xt(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||Ls(t.length)?xt(0):Ns(t);if(t.type==="Buffer"&&Array.isArray(t.data))return Ns(t.data)}function Fs(t){if(t>=ei)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+ei.toString(16)+" bytes");return t|0}function vh(t){return+t!=t&&(t=0),y.alloc(+t)}y.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==y.prototype};y.compare=function(e,r){if(ot(e,Uint8Array)&&(e=y.from(e,e.offset,e.byteLength)),ot(r,Uint8Array)&&(r=y.from(r,r.offset,r.byteLength)),!y.isBuffer(e)||!y.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let n=e.length,i=r.length;for(let s=0,o=Math.min(n,i);s<o;++s)if(e[s]!==r[s]){n=e[s],i=r[s];break}return n<i?-1:i<n?1:0};y.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};y.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return y.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;let i=y.allocUnsafe(r),s=0;for(n=0;n<e.length;++n){let o=e[n];if(ot(o,Uint8Array))s+o.length>i.length?(y.isBuffer(o)||(o=y.from(o)),o.copy(i,s)):Uint8Array.prototype.set.call(i,o,s);else if(y.isBuffer(o))o.copy(i,s);else throw new TypeError('"list" argument must be an Array of Buffers');s+=o.length}return i};function Tc(t,e){if(y.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||ot(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Ts(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return Pc(t).length;default:if(i)return n?-1:Ts(t).length;e=(""+e).toLowerCase(),i=!0}}y.byteLength=Tc;function Ih(t,e,r){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return Mh(this,e,r);case"utf8":case"utf-8":return Fc(this,e,r);case"ascii":return Dh(this,e,r);case"latin1":case"binary":return Lh(this,e,r);case"base64":return Oh(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ch(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}y.prototype._isBuffer=!0;function Xt(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}y.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)Xt(this,r,r+1);return this};y.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)Xt(this,r,r+3),Xt(this,r+1,r+2);return this};y.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)Xt(this,r,r+7),Xt(this,r+1,r+6),Xt(this,r+2,r+5),Xt(this,r+3,r+4);return this};y.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?Fc(this,0,e):Ih.apply(this,arguments)};y.prototype.toLocaleString=y.prototype.toString;y.prototype.equals=function(e){if(!y.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:y.compare(this,e)===0};y.prototype.inspect=function(){let e="",r=Tr.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};vc&&(y.prototype[vc]=y.prototype.inspect);y.prototype.compare=function(e,r,n,i,s){if(ot(e,Uint8Array)&&(e=y.from(e,e.offset,e.byteLength)),!y.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),s===void 0&&(s=this.length),r<0||n>e.length||i<0||s>this.length)throw new RangeError("out of range index");if(i>=s&&r>=n)return 0;if(i>=s)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,s>>>=0,this===e)return 0;let o=s-i,a=n-r,c=Math.min(o,a),l=this.slice(i,s),u=e.slice(r,n);for(let d=0;d<c;++d)if(l[d]!==u[d]){o=l[d],a=u[d];break}return o<a?-1:a<o?1:0};function Oc(t,e,r,n,i){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,Ls(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof e=="string"&&(e=y.from(e,n)),y.isBuffer(e))return e.length===0?-1:Ic(t,e,r,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):Ic(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function Ic(t,e,r,n,i){let s=1,o=t.length,a=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;s=2,o/=2,a/=2,r/=2}function c(u,d){return s===1?u[d]:u.readUInt16BE(d*s)}let l;if(i){let u=-1;for(l=r;l<o;l++)if(c(t,l)===c(e,u===-1?0:l-u)){if(u===-1&&(u=l),l-u+1===a)return u*s}else u!==-1&&(l-=l-u),u=-1}else for(r+a>o&&(r=o-a),l=r;l>=0;l--){let u=!0;for(let d=0;d<a;d++)if(c(t,l+d)!==c(e,d)){u=!1;break}if(u)return l}return-1}y.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};y.prototype.indexOf=function(e,r,n){return Oc(this,e,r,n,!0)};y.prototype.lastIndexOf=function(e,r,n){return Oc(this,e,r,n,!1)};function Ah(t,e,r,n){r=Number(r)||0;let i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;let s=e.length;n>s/2&&(n=s/2);let o;for(o=0;o<n;++o){let a=parseInt(e.substr(o*2,2),16);if(Ls(a))return o;t[r+o]=a}return o}function Rh(t,e,r,n){return ti(Ts(e,t.length-r),t,r,n)}function Nh(t,e,r,n){return ti(Uh(e),t,r,n)}function kh(t,e,r,n){return ti(Pc(e),t,r,n)}function Th(t,e,r,n){return ti(jh(e,t.length-r),t,r,n)}y.prototype.write=function(e,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let s=this.length-r;if((n===void 0||n>s)&&(n=s),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let o=!1;for(;;)switch(i){case"hex":return Ah(this,e,r,n);case"utf8":case"utf-8":return Rh(this,e,r,n);case"ascii":case"latin1":case"binary":return Nh(this,e,r,n);case"base64":return kh(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Th(this,e,r,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}};y.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Oh(t,e,r){return e===0&&r===t.length?Rs.fromByteArray(t):Rs.fromByteArray(t.slice(e,r))}function Fc(t,e,r){r=Math.min(t.length,r);let n=[],i=e;for(;i<r;){let s=t[i],o=null,a=s>239?4:s>223?3:s>191?2:1;if(i+a<=r){let c,l,u,d;switch(a){case 1:s<128&&(o=s);break;case 2:c=t[i+1],(c&192)===128&&(d=(s&31)<<6|c&63,d>127&&(o=d));break;case 3:c=t[i+1],l=t[i+2],(c&192)===128&&(l&192)===128&&(d=(s&15)<<12|(c&63)<<6|l&63,d>2047&&(d<55296||d>57343)&&(o=d));break;case 4:c=t[i+1],l=t[i+2],u=t[i+3],(c&192)===128&&(l&192)===128&&(u&192)===128&&(d=(s&15)<<18|(c&63)<<12|(l&63)<<6|u&63,d>65535&&d<1114112&&(o=d))}}o===null?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),i+=a}return Fh(n)}var Ac=4096;function Fh(t){let e=t.length;if(e<=Ac)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=Ac));return r}function Dh(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]&127);return n}function Lh(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function Mh(t,e,r){let n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let s=e;s<r;++s)i+=qh[t[s]];return i}function Ch(t,e,r){let n=t.slice(e,r),i="";for(let s=0;s<n.length-1;s+=2)i+=String.fromCharCode(n[s]+n[s+1]*256);return i}y.prototype.slice=function(e,r){let n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);let i=this.subarray(e,r);return Object.setPrototypeOf(i,y.prototype),i};function fe(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}y.prototype.readUintLE=y.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||fe(e,r,this.length);let i=this[e],s=1,o=0;for(;++o<r&&(s*=256);)i+=this[e+o]*s;return i};y.prototype.readUintBE=y.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||fe(e,r,this.length);let i=this[e+--r],s=1;for(;r>0&&(s*=256);)i+=this[e+--r]*s;return i};y.prototype.readUint8=y.prototype.readUInt8=function(e,r){return e=e>>>0,r||fe(e,1,this.length),this[e]};y.prototype.readUint16LE=y.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||fe(e,2,this.length),this[e]|this[e+1]<<8};y.prototype.readUint16BE=y.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||fe(e,2,this.length),this[e]<<8|this[e+1]};y.prototype.readUint32LE=y.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||fe(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};y.prototype.readUint32BE=y.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||fe(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};y.prototype.readBigUInt64LE=Pt(function(e){e=e>>>0,kr(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&an(e,this.length-8);let i=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,s=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(s)<<BigInt(32))});y.prototype.readBigUInt64BE=Pt(function(e){e=e>>>0,kr(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&an(e,this.length-8);let i=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],s=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(s)});y.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||fe(e,r,this.length);let i=this[e],s=1,o=0;for(;++o<r&&(s*=256);)i+=this[e+o]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*r)),i};y.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||fe(e,r,this.length);let i=r,s=1,o=this[e+--i];for(;i>0&&(s*=256);)o+=this[e+--i]*s;return s*=128,o>=s&&(o-=Math.pow(2,8*r)),o};y.prototype.readInt8=function(e,r){return e=e>>>0,r||fe(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};y.prototype.readInt16LE=function(e,r){e=e>>>0,r||fe(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};y.prototype.readInt16BE=function(e,r){e=e>>>0,r||fe(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};y.prototype.readInt32LE=function(e,r){return e=e>>>0,r||fe(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};y.prototype.readInt32BE=function(e,r){return e=e>>>0,r||fe(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};y.prototype.readBigInt64LE=Pt(function(e){e=e>>>0,kr(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&an(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});y.prototype.readBigInt64BE=Pt(function(e){e=e>>>0,kr(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&an(e,this.length-8);let i=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});y.prototype.readFloatLE=function(e,r){return e=e>>>0,r||fe(e,4,this.length),Nr.read(this,e,!0,23,4)};y.prototype.readFloatBE=function(e,r){return e=e>>>0,r||fe(e,4,this.length),Nr.read(this,e,!1,23,4)};y.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||fe(e,8,this.length),Nr.read(this,e,!0,52,8)};y.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||fe(e,8,this.length),Nr.read(this,e,!1,52,8)};function Ie(t,e,r,n,i,s){if(!y.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}y.prototype.writeUintLE=y.prototype.writeUIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;Ie(this,e,r,n,a,0)}let s=1,o=0;for(this[r]=e&255;++o<n&&(s*=256);)this[r+o]=e/s&255;return r+n};y.prototype.writeUintBE=y.prototype.writeUIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;Ie(this,e,r,n,a,0)}let s=n-1,o=1;for(this[r+s]=e&255;--s>=0&&(o*=256);)this[r+s]=e/o&255;return r+n};y.prototype.writeUint8=y.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||Ie(this,e,r,1,255,0),this[r]=e&255,r+1};y.prototype.writeUint16LE=y.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||Ie(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};y.prototype.writeUint16BE=y.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||Ie(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};y.prototype.writeUint32LE=y.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||Ie(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};y.prototype.writeUint32BE=y.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||Ie(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function Dc(t,e,r,n,i){Bc(e,n,i,t,r,7);let s=Number(e&BigInt(4294967295));t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,r}function Lc(t,e,r,n,i){Bc(e,n,i,t,r,7);let s=Number(e&BigInt(4294967295));t[r+7]=s,s=s>>8,t[r+6]=s,s=s>>8,t[r+5]=s,s=s>>8,t[r+4]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=o,o=o>>8,t[r+2]=o,o=o>>8,t[r+1]=o,o=o>>8,t[r]=o,r+8}y.prototype.writeBigUInt64LE=Pt(function(e,r=0){return Dc(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});y.prototype.writeBigUInt64BE=Pt(function(e,r=0){return Lc(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});y.prototype.writeIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let c=Math.pow(2,8*n-1);Ie(this,e,r,n,c-1,-c)}let s=0,o=1,a=0;for(this[r]=e&255;++s<n&&(o*=256);)e<0&&a===0&&this[r+s-1]!==0&&(a=1),this[r+s]=(e/o>>0)-a&255;return r+n};y.prototype.writeIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let c=Math.pow(2,8*n-1);Ie(this,e,r,n,c-1,-c)}let s=n-1,o=1,a=0;for(this[r+s]=e&255;--s>=0&&(o*=256);)e<0&&a===0&&this[r+s+1]!==0&&(a=1),this[r+s]=(e/o>>0)-a&255;return r+n};y.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||Ie(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};y.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||Ie(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};y.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||Ie(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};y.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||Ie(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};y.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||Ie(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};y.prototype.writeBigInt64LE=Pt(function(e,r=0){return Dc(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});y.prototype.writeBigInt64BE=Pt(function(e,r=0){return Lc(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Mc(t,e,r,n,i,s){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Cc(t,e,r,n,i){return e=+e,r=r>>>0,i||Mc(t,e,r,4,34028234663852886e22,-34028234663852886e22),Nr.write(t,e,r,n,23,4),r+4}y.prototype.writeFloatLE=function(e,r,n){return Cc(this,e,r,!0,n)};y.prototype.writeFloatBE=function(e,r,n){return Cc(this,e,r,!1,n)};function Wc(t,e,r,n,i){return e=+e,r=r>>>0,i||Mc(t,e,r,8,17976931348623157e292,-17976931348623157e292),Nr.write(t,e,r,n,52,8),r+8}y.prototype.writeDoubleLE=function(e,r,n){return Wc(this,e,r,!0,n)};y.prototype.writeDoubleBE=function(e,r,n){return Wc(this,e,r,!1,n)};y.prototype.copy=function(e,r,n,i){if(!y.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);let s=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),r),s};y.prototype.fill=function(e,r,n,i){if(typeof e=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!y.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let o=e.charCodeAt(0);(i==="utf8"&&o<128||i==="latin1")&&(e=o)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let s;if(typeof e=="number")for(s=r;s<n;++s)this[s]=e;else{let o=y.isBuffer(e)?e:y.from(e,i),a=o.length;if(a===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<n-r;++s)this[s+r]=o[s%a]}return this};var Rr={};function Ds(t,e,r){Rr[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}Ds("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Ds("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);Ds("ERR_OUT_OF_RANGE",function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=Rc(String(r)):typeof r=="bigint"&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=Rc(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function Rc(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function Wh(t,e,r){kr(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&an(e,t.length-(r+1))}function Bc(t,e,r,n,i,s){if(t>r||t<e){let o=typeof e=="bigint"?"n":"",a;throw s>3?e===0||e===BigInt(0)?a=`>= 0${o} and < 2${o} ** ${(s+1)*8}${o}`:a=`>= -(2${o} ** ${(s+1)*8-1}${o}) and < 2 ** ${(s+1)*8-1}${o}`:a=`>= ${e}${o} and <= ${r}${o}`,new Rr.ERR_OUT_OF_RANGE("value",a,t)}Wh(n,i,s)}function kr(t,e){if(typeof t!="number")throw new Rr.ERR_INVALID_ARG_TYPE(e,"number",t)}function an(t,e,r){throw Math.floor(t)!==t?(kr(t,r),new Rr.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new Rr.ERR_BUFFER_OUT_OF_BOUNDS:new Rr.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var Bh=/[^+/0-9A-Za-z-_]/g;function Ph(t){if(t=t.split("=")[0],t=t.trim().replace(Bh,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function Ts(t,e){e=e||1/0;let r,n=t.length,i=null,s=[];for(let o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(o+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function Uh(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function jh(t,e){let r,n,i,s=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n);return s}function Pc(t){return Rs.toByteArray(Ph(t))}function ti(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function ot(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function Ls(t){return t!==t}var qh=function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function Pt(t){return typeof BigInt>"u"?zh:t}function zh(){throw new Error("BigInt not supported")}});var Vc=O((Lb,Cs)=>{"use strict";var Hh=Object.prototype.hasOwnProperty,xe="~";function fn(){}Object.create&&(fn.prototype=Object.create(null),new fn().__proto__||(xe=!1));function Kh(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function $c(t,e,r,n,i){if(typeof r!="function")throw new TypeError("The listener must be a function");var s=new Kh(r,n||t,i),o=xe?xe+e:e;return t._events[o]?t._events[o].fn?t._events[o]=[t._events[o],s]:t._events[o].push(s):(t._events[o]=s,t._eventsCount++),t}function ni(t,e){--t._eventsCount===0?t._events=new fn:delete t._events[e]}function we(){this._events=new fn,this._eventsCount=0}we.prototype.eventNames=function(){var e=[],r,n;if(this._eventsCount===0)return e;for(n in r=this._events)Hh.call(r,n)&&e.push(xe?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(r)):e};we.prototype.listeners=function(e){var r=xe?xe+e:e,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,o=new Array(s);i<s;i++)o[i]=n[i].fn;return o};we.prototype.listenerCount=function(e){var r=xe?xe+e:e,n=this._events[r];return n?n.fn?1:n.length:0};we.prototype.emit=function(e,r,n,i,s,o){var a=xe?xe+e:e;if(!this._events[a])return!1;var c=this._events[a],l=arguments.length,u,d;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,r),!0;case 3:return c.fn.call(c.context,r,n),!0;case 4:return c.fn.call(c.context,r,n,i),!0;case 5:return c.fn.call(c.context,r,n,i,s),!0;case 6:return c.fn.call(c.context,r,n,i,s,o),!0}for(d=1,u=new Array(l-1);d<l;d++)u[d-1]=arguments[d];c.fn.apply(c.context,u)}else{var p=c.length,w;for(d=0;d<p;d++)switch(c[d].once&&this.removeListener(e,c[d].fn,void 0,!0),l){case 1:c[d].fn.call(c[d].context);break;case 2:c[d].fn.call(c[d].context,r);break;case 3:c[d].fn.call(c[d].context,r,n);break;case 4:c[d].fn.call(c[d].context,r,n,i);break;default:if(!u)for(w=1,u=new Array(l-1);w<l;w++)u[w-1]=arguments[w];c[d].fn.apply(c[d].context,u)}}return!0};we.prototype.on=function(e,r,n){return $c(this,e,r,n,!1)};we.prototype.once=function(e,r,n){return $c(this,e,r,n,!0)};we.prototype.removeListener=function(e,r,n,i){var s=xe?xe+e:e;if(!this._events[s])return this;if(!r)return ni(this,s),this;var o=this._events[s];if(o.fn)o.fn===r&&(!i||o.once)&&(!n||o.context===n)&&ni(this,s);else{for(var a=0,c=[],l=o.length;a<l;a++)(o[a].fn!==r||i&&!o[a].once||n&&o[a].context!==n)&&c.push(o[a]);c.length?this._events[s]=c.length===1?c[0]:c:ni(this,s)}return this};we.prototype.removeAllListeners=function(e){var r;return e?(r=xe?xe+e:e,this._events[r]&&ni(this,r)):(this._events=new fn,this._eventsCount=0),this};we.prototype.off=we.prototype.removeListener;we.prototype.addListener=we.prototype.on;we.prefixed=xe;we.EventEmitter=we;typeof Cs<"u"&&(Cs.exports=we)});var $=O((i0,Zc)=>{"use strict";Zc.exports={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Boolean,Uint8Array}});var Dr=O((s0,di)=>{"use strict";var{AbortController:el,AbortSignal:Ey}=typeof self<"u"?self:typeof window<"u"?window:void 0;di.exports=el;di.exports.AbortSignal=Ey;di.exports.default=el});var un=O((o0,Vs)=>{"use strict";var Lr=typeof Reflect=="object"?Reflect:null,tl=Lr&&typeof Lr.apply=="function"?Lr.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},hi;Lr&&typeof Lr.ownKeys=="function"?hi=Lr.ownKeys:Object.getOwnPropertySymbols?hi=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:hi=function(e){return Object.getOwnPropertyNames(e)};function _y(t){console&&console.warn&&console.warn(t)}var nl=Number.isNaN||function(e){return e!==e};function M(){M.init.call(this)}Vs.exports=M;Vs.exports.once=vy;M.EventEmitter=M;M.prototype._events=void 0;M.prototype._eventsCount=0;M.prototype._maxListeners=void 0;var rl=10;function yi(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(M,"defaultMaxListeners",{enumerable:!0,get:function(){return rl},set:function(t){if(typeof t!="number"||t<0||nl(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");rl=t}});M.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};M.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||nl(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function il(t){return t._maxListeners===void 0?M.defaultMaxListeners:t._maxListeners}M.prototype.getMaxListeners=function(){return il(this)};M.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")tl(c,this,r);else for(var l=c.length,u=ll(c,l),n=0;n<l;++n)tl(u[n],this,r);return!0};function sl(t,e,r,n){var i,s,o;if(yi(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=il(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,_y(a)}return t}M.prototype.addListener=function(e,r){return sl(this,e,r,!1)};M.prototype.on=M.prototype.addListener;M.prototype.prependListener=function(e,r){return sl(this,e,r,!0)};function gy(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ol(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=gy.bind(n);return i.listener=r,n.wrapFn=i,i}M.prototype.once=function(e,r){return yi(r),this.on(e,ol(this,e,r)),this};M.prototype.prependOnceListener=function(e,r){return yi(r),this.prependListener(e,ol(this,e,r)),this};M.prototype.removeListener=function(e,r){var n,i,s,o,a;if(yi(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():by(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this};M.prototype.off=M.prototype.removeListener;M.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function al(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?xy(i):ll(i,i.length)}M.prototype.listeners=function(e){return al(this,e,!0)};M.prototype.rawListeners=function(e){return al(this,e,!1)};M.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):cl.call(t,e)};M.prototype.listenerCount=cl;function cl(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}M.prototype.eventNames=function(){return this._eventsCount>0?hi(this._events):[]};function ll(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function by(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function xy(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function vy(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}fl(t,e,s,{once:!0}),e!=="error"&&Iy(t,i,{once:!0})})}function Iy(t,e,r){typeof t.on=="function"&&fl(t,"error",e,r)}function fl(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}});var me=O((a0,Ks)=>{"use strict";var Ay=Ce(),{kResistStopPropagation:Ry,SymbolDispose:Ny}=$(),ky=globalThis.AbortSignal||Dr().AbortSignal,Ty=globalThis.AbortController||Dr().AbortController,Oy=Object.getPrototypeOf(async function(){}).constructor,ul=globalThis.Blob||Ay.Blob,Fy=typeof ul<"u"?function(e){return e instanceof ul}:function(e){return!1},dl=(t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new ERR_INVALID_ARG_TYPE(e,"AbortSignal",t)},Dy=(t,e)=>{if(typeof t!="function")throw new ERR_INVALID_ARG_TYPE(e,"Function",t)},Hs=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let r="";for(let n=0;n<e.length;n++)r+=`    ${e[n].stack}
`;super(r),this.name="AggregateError",this.errors=e}};Ks.exports={AggregateError:Hs,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...r){e||(e=!0,t.apply(this,r))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}},promisify(t){return new Promise((e,r)=>{t((n,...i)=>n?r(n):e(...i))})},debuglog(){return function(){}},format(t,...e){return t.replace(/%([sdifj])/g,function(...[r,n]){let i=e.shift();return n==="f"?i.toFixed(6):n==="j"?JSON.stringify(i):n==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}},types:{isAsyncFunction(t){return t instanceof Oy},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:Fy,deprecate(t,e){return t},addAbortListener:un().addAbortListener||function(e,r){if(e===void 0)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",e);dl(e,"signal"),Dy(r,"listener");let n;return e.aborted?queueMicrotask(()=>r()):(e.addEventListener("abort",r,{__proto__:null,once:!0,[Ry]:!0}),n=()=>{e.removeEventListener("abort",r)}),{__proto__:null,[Ny](){var i;(i=n)===null||i===void 0||i()}}},AbortSignalAny:ky.any||function(e){if(e.length===1)return e[0];let r=new Ty,n=()=>r.abort();return e.forEach(i=>{dl(i,"signals"),i.addEventListener("abort",n,{once:!0})}),r.signal.addEventListener("abort",()=>{e.forEach(i=>i.removeEventListener("abort",n))},{once:!0}),r.signal}};Ks.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var ve=O((c0,pl)=>{"use strict";var{format:Ly,inspect:pi,AggregateError:My}=me(),Cy=globalThis.AggregateError||My,Wy=Symbol("kIsNodeError"),By=["string","function","number","object","Function","Object","boolean","bigint","symbol"],Py=/^([A-Z][a-z0-9]*)+$/,Uy="__node_internal_",wi={};function tr(t,e){if(!t)throw new wi.ERR_INTERNAL_ASSERTION(e)}function hl(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function jy(t,e,r){if(typeof e=="function")return tr(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);let n=(e.match(/%[dfijoOs]/g)||[]).length;return tr(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:Ly(e,...r)}function ye(t,e,r){r||(r=Error);class n extends r{constructor(...s){super(jy(t,e,s))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[Wy]=!0,wi[t]=n}function yl(t){let e=Uy+t.name;return Object.defineProperty(t,"name",{value:e}),t}function qy(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let r=new Cy([e,t],e.message);return r.code=e.code,r}return t||e}var Gs=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new wi.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};ye("ERR_ASSERTION","%s",Error);ye("ERR_INVALID_ARG_TYPE",(t,e,r)=>{tr(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";let i=[],s=[],o=[];for(let c of e)tr(typeof c=="string","All expected entries have to be of type string"),By.includes(c)?i.push(c.toLowerCase()):Py.test(c)?s.push(c):(tr(c!=="object",'The value "object" should be written as "Object"'),o.push(c));if(s.length>0){let c=i.indexOf("object");c!==-1&&(i.splice(i,c,1),s.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{let c=i.pop();n+=`one of type ${i.join(", ")}, or ${c}`}}(s.length>0||o.length>0)&&(n+=" or ")}if(s.length>0){switch(s.length){case 1:n+=`an instance of ${s[0]}`;break;case 2:n+=`an instance of ${s[0]} or ${s[1]}`;break;default:{let c=s.pop();n+=`an instance of ${s.join(", ")}, or ${c}`}}o.length>0&&(n+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(n+="an "),n+=`${o[0]}`;break;case 2:n+=`one of ${o[0]} or ${o[1]}`;break;default:{let c=o.pop();n+=`one of ${o.join(", ")}, or ${c}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var a;if((a=r.constructor)!==null&&a!==void 0&&a.name)n+=`. Received an instance of ${r.constructor.name}`;else{let c=pi(r,{depth:-1});n+=`. Received ${c}`}}else{let c=pi(r,{colors:!1});c.length>25&&(c=`${c.slice(0,25)}...`),n+=`. Received type ${typeof r} (${c})`}return n},TypeError);ye("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=pi(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);ye("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;let i=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);ye("ERR_MISSING_ARGS",(...t)=>{tr(t.length>0,"At least one arg needs to be specified");let e,r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);ye("ERR_OUT_OF_RANGE",(t,e,r)=>{tr(e,'Missing "range" argument');let n;return Number.isInteger(r)&&Math.abs(r)>2**32?n=hl(String(r)):typeof r=="bigint"?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=hl(n)),n+="n"):n=pi(r),`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);ye("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);ye("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);ye("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);ye("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);ye("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);ye("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);ye("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);ye("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);ye("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);ye("ERR_STREAM_WRITE_AFTER_END","write after end",Error);ye("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);pl.exports={AbortError:Gs,aggregateTwoErrors:yl(qy),hideStackFrames:yl,codes:wi}});var Cr=O((l0,Il)=>{"use strict";var{ArrayIsArray:Xs,ArrayPrototypeIncludes:El,ArrayPrototypeJoin:_l,ArrayPrototypeMap:zy,NumberIsInteger:Js,NumberIsNaN:$y,NumberMAX_SAFE_INTEGER:Vy,NumberMIN_SAFE_INTEGER:Hy,NumberParseInt:Ky,ObjectPrototypeHasOwnProperty:Gy,RegExpPrototypeExec:gl,String:Yy,StringPrototypeToUpperCase:Xy,StringPrototypeTrim:Jy}=$(),{hideStackFrames:We,codes:{ERR_SOCKET_BAD_PORT:Qy,ERR_INVALID_ARG_TYPE:Se,ERR_INVALID_ARG_VALUE:Mr,ERR_OUT_OF_RANGE:rr,ERR_UNKNOWN_SIGNAL:wl}}=ve(),{normalizeEncoding:Zy}=me(),{isAsyncFunction:ep,isArrayBufferView:tp}=me().types,ml={};function rp(t){return t===(t|0)}function np(t){return t===t>>>0}var ip=/^[0-7]+$/,sp="must be a 32-bit unsigned integer or an octal string";function op(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(gl(ip,t)===null)throw new Mr(e,t,sp);t=Ky(t,8)}return bl(t,e),t}var ap=We((t,e,r=Hy,n=Vy)=>{if(typeof t!="number")throw new Se(e,"number",t);if(!Js(t))throw new rr(e,"an integer",t);if(t<r||t>n)throw new rr(e,`>= ${r} && <= ${n}`,t)}),cp=We((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new Se(e,"number",t);if(!Js(t))throw new rr(e,"an integer",t);if(t<r||t>n)throw new rr(e,`>= ${r} && <= ${n}`,t)}),bl=We((t,e,r=!1)=>{if(typeof t!="number")throw new Se(e,"number",t);if(!Js(t))throw new rr(e,"an integer",t);let n=r?1:0,i=4294967295;if(t<n||t>i)throw new rr(e,`>= ${n} && <= ${i}`,t)});function Qs(t,e){if(typeof t!="string")throw new Se(e,"string",t)}function lp(t,e,r=void 0,n){if(typeof t!="number")throw new Se(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&$y(t))throw new rr(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}var fp=We((t,e,r)=>{if(!El(r,t)){let i="must be one of: "+_l(zy(r,s=>typeof s=="string"?`'${s}'`:Yy(s)),", ");throw new Mr(e,t,i)}});function xl(t,e){if(typeof t!="boolean")throw new Se(e,"boolean",t)}function Ys(t,e,r){return t==null||!Gy(t,e)?r:t[e]}var up=We((t,e,r=null)=>{let n=Ys(r,"allowArray",!1),i=Ys(r,"allowFunction",!1);if(!Ys(r,"nullable",!1)&&t===null||!n&&Xs(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new Se(e,"Object",t)}),dp=We((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new Se(e,"a dictionary",t)}),mi=We((t,e,r=0)=>{if(!Xs(t))throw new Se(e,"Array",t);if(t.length<r){let n=`must be longer than ${r}`;throw new Mr(e,t,n)}});function hp(t,e){mi(t,e);for(let r=0;r<t.length;r++)Qs(t[r],`${e}[${r}]`)}function yp(t,e){mi(t,e);for(let r=0;r<t.length;r++)xl(t[r],`${e}[${r}]`)}function pp(t,e){mi(t,e);for(let r=0;r<t.length;r++){let n=t[r],i=`${e}[${r}]`;if(n==null)throw new Se(i,"AbortSignal",n);vl(n,i)}}function wp(t,e="signal"){if(Qs(t,e),ml[t]===void 0)throw ml[Xy(t)]!==void 0?new wl(t+" (signals must use all capital letters)"):new wl(t)}var mp=We((t,e="buffer")=>{if(!tp(t))throw new Se(e,["Buffer","TypedArray","DataView"],t)});function Sp(t,e){let r=Zy(e),n=t.length;if(r==="hex"&&n%2!==0)throw new Mr("encoding",e,`is invalid for data of length ${n}`)}function Ep(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&Jy(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new Qy(e,t,r);return t|0}var vl=We((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new Se(e,"AbortSignal",t)}),_p=We((t,e)=>{if(typeof t!="function")throw new Se(e,"Function",t)}),gp=We((t,e)=>{if(typeof t!="function"||ep(t))throw new Se(e,"Function",t)}),bp=We((t,e)=>{if(t!==void 0)throw new Se(e,"undefined",t)});function xp(t,e,r){if(!El(r,t))throw new Se(e,`('${_l(r,"|")}')`,t)}var vp=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function Sl(t,e){if(typeof t>"u"||!gl(vp,t))throw new Mr(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Ip(t){if(typeof t=="string")return Sl(t,"hints"),t;if(Xs(t)){let e=t.length,r="";if(e===0)return r;for(let n=0;n<e;n++){let i=t[n];Sl(i,"hints"),r+=i,n!==e-1&&(r+=", ")}return r}throw new Mr("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}Il.exports={isInt32:rp,isUint32:np,parseFileMode:op,validateArray:mi,validateStringArray:hp,validateBooleanArray:yp,validateAbortSignalArray:pp,validateBoolean:xl,validateBuffer:mp,validateDictionary:dp,validateEncoding:Sp,validateFunction:_p,validateInt32:cp,validateInteger:ap,validateNumber:lp,validateObject:up,validateOneOf:fp,validatePlainFunction:gp,validatePort:Ep,validateSignalName:wp,validateString:Qs,validateUint32:bl,validateUndefined:bp,validateUnion:xp,validateAbortSignal:vl,validateLinkHeaderValue:Ip}});var qt=O((f0,kl)=>{var X=kl.exports={},ct,lt;function Zs(){throw new Error("setTimeout has not been defined")}function eo(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?ct=setTimeout:ct=Zs}catch{ct=Zs}try{typeof clearTimeout=="function"?lt=clearTimeout:lt=eo}catch{lt=eo}})();function Al(t){if(ct===setTimeout)return setTimeout(t,0);if((ct===Zs||!ct)&&setTimeout)return ct=setTimeout,setTimeout(t,0);try{return ct(t,0)}catch{try{return ct.call(null,t,0)}catch{return ct.call(this,t,0)}}}function Ap(t){if(lt===clearTimeout)return clearTimeout(t);if((lt===eo||!lt)&&clearTimeout)return lt=clearTimeout,clearTimeout(t);try{return lt(t)}catch{try{return lt.call(null,t)}catch{return lt.call(this,t)}}}var Tt=[],Wr=!1,nr,Si=-1;function Rp(){!Wr||!nr||(Wr=!1,nr.length?Tt=nr.concat(Tt):Si=-1,Tt.length&&Rl())}function Rl(){if(!Wr){var t=Al(Rp);Wr=!0;for(var e=Tt.length;e;){for(nr=Tt,Tt=[];++Si<e;)nr&&nr[Si].run();Si=-1,e=Tt.length}nr=null,Wr=!1,Ap(t)}}X.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];Tt.push(new Nl(t,e)),Tt.length===1&&!Wr&&Al(Rl)};function Nl(t,e){this.fun=t,this.array=e}Nl.prototype.run=function(){this.fun.apply(null,this.array)};X.title="browser";X.browser=!0;X.env={};X.argv=[];X.version="";X.versions={};function Ot(){}X.on=Ot;X.addListener=Ot;X.once=Ot;X.off=Ot;X.removeListener=Ot;X.removeAllListeners=Ot;X.emit=Ot;X.prependListener=Ot;X.prependOnceListener=Ot;X.listeners=function(t){return[]};X.binding=function(t){throw new Error("process.binding is not supported")};X.cwd=function(){return"/"};X.chdir=function(t){throw new Error("process.chdir is not supported")};X.umask=function(){return 0}});var ut=O((u0,$l)=>{"use strict";var{SymbolAsyncIterator:Tl,SymbolIterator:Ol,SymbolFor:ir}=$(),Fl=ir("nodejs.stream.destroyed"),Dl=ir("nodejs.stream.errored"),to=ir("nodejs.stream.readable"),ro=ir("nodejs.stream.writable"),Ll=ir("nodejs.stream.disturbed"),Np=ir("nodejs.webstream.isClosedPromise"),kp=ir("nodejs.webstream.controllerErrorFunction");function Ei(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function _i(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function Tp(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function ft(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function Ml(t){return!!(t&&!ft(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function Cl(t){return!!(t&&!ft(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function Wl(t){return!!(t&&!ft(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function Op(t){return Ml(t)||Cl(t)||Wl(t)}function Fp(t,e){return t==null?!1:e===!0?typeof t[Tl]=="function":e===!1?typeof t[Ol]=="function":typeof t[Tl]=="function"||typeof t[Ol]=="function"}function gi(t){if(!ft(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[Fl]||n!=null&&n.destroyed)}function Bl(t){if(!_i(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function Dp(t,e){if(!_i(t))return null;if(t.writableFinished===!0)return!0;let r=t._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function Lp(t){if(!Ei(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function Pl(t,e){if(!Ei(t))return null;let r=t._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function Ul(t){return t&&t[to]!=null?t[to]:typeof t?.readable!="boolean"?null:gi(t)?!1:Ei(t)&&t.readable&&!Pl(t)}function jl(t){return t&&t[ro]!=null?t[ro]:typeof t?.writable!="boolean"?null:gi(t)?!1:_i(t)&&t.writable&&!Bl(t)}function Mp(t,e){return ft(t)?gi(t)?!0:!(e?.readable!==!1&&Ul(t)||e?.writable!==!1&&jl(t)):null}function Cp(t){var e,r;return ft(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function Wp(t){var e,r;return ft(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function Bp(t){if(!ft(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,r=t._readableState;return typeof e?.closed=="boolean"||typeof r?.closed=="boolean"?e?.closed||r?.closed:typeof t._closed=="boolean"&&ql(t)?t._closed:null}function ql(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function zl(t){return typeof t._sent100=="boolean"&&ql(t)}function Pp(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function Up(t){if(!ft(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!n&&zl(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function jp(t){var e;return!!(t&&((e=t[Ll])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function qp(t){var e,r,n,i,s,o,a,c,l,u;return!!(t&&((e=(r=(n=(i=(s=(o=t[Dl])!==null&&o!==void 0?o:t.readableErrored)!==null&&s!==void 0?s:t.writableErrored)!==null&&i!==void 0?i:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&n!==void 0?n:(c=t._writableState)===null||c===void 0?void 0:c.errorEmitted)!==null&&r!==void 0?r:(l=t._readableState)===null||l===void 0?void 0:l.errored)!==null&&e!==void 0?e:!((u=t._writableState)===null||u===void 0)&&u.errored))}$l.exports={isDestroyed:gi,kIsDestroyed:Fl,isDisturbed:jp,kIsDisturbed:Ll,isErrored:qp,kIsErrored:Dl,isReadable:Ul,kIsReadable:to,kIsClosedPromise:Np,kControllerErrorFunction:kp,kIsWritable:ro,isClosed:Bp,isDuplexNodeStream:Tp,isFinished:Mp,isIterable:Fp,isReadableNodeStream:Ei,isReadableStream:Ml,isReadableEnded:Lp,isReadableFinished:Pl,isReadableErrored:Wp,isNodeStream:ft,isWebStream:Op,isWritable:jl,isWritableNodeStream:_i,isWritableStream:Cl,isWritableEnded:Bl,isWritableFinished:Dp,isWritableErrored:Cp,isServerRequest:Pp,isServerResponse:zl,willEmitClose:Up,isTransformStream:Wl}});var Ft=O((d0,ao)=>{var zt=qt(),{AbortError:Zl,codes:zp}=ve(),{ERR_INVALID_ARG_TYPE:$p,ERR_STREAM_PREMATURE_CLOSE:Vl}=zp,{kEmptyObject:io,once:so}=me(),{validateAbortSignal:Vp,validateFunction:Hp,validateObject:Kp,validateBoolean:Gp}=Cr(),{Promise:Yp,PromisePrototypeThen:Xp,SymbolDispose:ef}=$(),{isClosed:Jp,isReadable:Hl,isReadableNodeStream:no,isReadableStream:Qp,isReadableFinished:Kl,isReadableErrored:Gl,isWritable:Yl,isWritableNodeStream:Xl,isWritableStream:Zp,isWritableFinished:Jl,isWritableErrored:Ql,isNodeStream:ew,willEmitClose:tw,kIsClosedPromise:rw}=ut(),Br;function nw(t){return t.setHeader&&typeof t.abort=="function"}var oo=()=>{};function tf(t,e,r){var n,i;if(arguments.length===2?(r=e,e=io):e==null?e=io:Kp(e,"options"),Hp(r,"callback"),Vp(e.signal,"options.signal"),r=so(r),Qp(t)||Zp(t))return iw(t,e,r);if(!ew(t))throw new $p("stream",["ReadableStream","WritableStream","Stream"],t);let s=(n=e.readable)!==null&&n!==void 0?n:no(t),o=(i=e.writable)!==null&&i!==void 0?i:Xl(t),a=t._writableState,c=t._readableState,l=()=>{t.writable||p()},u=tw(t)&&no(t)===s&&Xl(t)===o,d=Jl(t,!1),p=()=>{d=!0,t.destroyed&&(u=!1),!(u&&(!t.readable||s))&&(!s||w)&&r.call(t)},w=Kl(t,!1),_=()=>{w=!0,t.destroyed&&(u=!1),!(u&&(!t.writable||o))&&(!o||d)&&r.call(t)},m=j=>{r.call(t,j)},R=Jp(t),g=()=>{R=!0;let j=Ql(t)||Gl(t);if(j&&typeof j!="boolean")return r.call(t,j);if(s&&!w&&no(t,!0)&&!Kl(t,!1))return r.call(t,new Vl);if(o&&!d&&!Jl(t,!1))return r.call(t,new Vl);r.call(t)},L=()=>{R=!0;let j=Ql(t)||Gl(t);if(j&&typeof j!="boolean")return r.call(t,j);r.call(t)},H=()=>{t.req.on("finish",p)};nw(t)?(t.on("complete",p),u||t.on("abort",g),t.req?H():t.on("request",H)):o&&!a&&(t.on("end",l),t.on("close",l)),!u&&typeof t.aborted=="boolean"&&t.on("aborted",g),t.on("end",_),t.on("finish",p),e.error!==!1&&t.on("error",m),t.on("close",g),R?zt.nextTick(g):a!=null&&a.errorEmitted||c!=null&&c.errorEmitted?u||zt.nextTick(L):(!s&&(!u||Hl(t))&&(d||Yl(t)===!1)||!o&&(!u||Yl(t))&&(w||Hl(t)===!1)||c&&t.req&&t.aborted)&&zt.nextTick(L);let k=()=>{r=oo,t.removeListener("aborted",g),t.removeListener("complete",p),t.removeListener("abort",g),t.removeListener("request",H),t.req&&t.req.removeListener("finish",p),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",p),t.removeListener("end",_),t.removeListener("error",m),t.removeListener("close",g)};if(e.signal&&!R){let j=()=>{let Qe=r;k(),Qe.call(t,new Zl(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)zt.nextTick(j);else{Br=Br||me().addAbortListener;let Qe=Br(e.signal,j),Ee=r;r=so((...St)=>{Qe[ef](),Ee.apply(t,St)})}}return k}function iw(t,e,r){let n=!1,i=oo;if(e.signal)if(i=()=>{n=!0,r.call(t,new Zl(void 0,{cause:e.signal.reason}))},e.signal.aborted)zt.nextTick(i);else{Br=Br||me().addAbortListener;let o=Br(e.signal,i),a=r;r=so((...c)=>{o[ef](),a.apply(t,c)})}let s=(...o)=>{n||zt.nextTick(()=>r.apply(t,o))};return Xp(t[rw].promise,s,s),oo}function sw(t,e){var r;let n=!1;return e===null&&(e=io),(r=e)!==null&&r!==void 0&&r.cleanup&&(Gp(e.cleanup,"cleanup"),n=e.cleanup),new Yp((i,s)=>{let o=tf(t,e,a=>{n&&o(),a?s(a):i()})})}ao.exports=tf;ao.exports.finished=sw});var sr=O((h0,ff)=>{"use strict";var dt=qt(),{aggregateTwoErrors:ow,codes:{ERR_MULTIPLE_CALLBACK:aw},AbortError:cw}=ve(),{Symbol:sf}=$(),{kIsDestroyed:lw,isDestroyed:fw,isFinished:uw,isServerRequest:dw}=ut(),of=sf("kDestroy"),co=sf("kConstruct");function af(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function hw(t,e){let r=this._readableState,n=this._writableState,i=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(af(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),i.constructed?rf(this,t,e):this.once(of,function(s){rf(this,ow(s,t),e)}),this)}function rf(t,e,r){let n=!1;function i(s){if(n)return;n=!0;let o=t._readableState,a=t._writableState;af(s,a,o),a&&(a.closed=!0),o&&(o.closed=!0),typeof r=="function"&&r(s),s?dt.nextTick(yw,t,s):dt.nextTick(cf,t)}try{t._destroy(e||null,i)}catch(s){i(s)}}function yw(t,e){lo(t,e),cf(t)}function cf(t){let e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function lo(t,e){let r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function pw(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function fo(t,e,r){let n=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),n&&!n.errored&&(n.errored=e),r?dt.nextTick(lo,t,e):lo(t,e))}function ww(t,e){if(typeof t._construct!="function")return;let r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(co,e),!(t.listenerCount(co)>1)&&dt.nextTick(mw,t)}function mw(t){let e=!1;function r(n){if(e){fo(t,n??new aw);return}e=!0;let i=t._readableState,s=t._writableState,o=s||i;i&&(i.constructed=!0),s&&(s.constructed=!0),o.destroyed?t.emit(of,n):n?fo(t,n,!0):dt.nextTick(Sw,t)}try{t._construct(n=>{dt.nextTick(r,n)})}catch(n){dt.nextTick(r,n)}}function Sw(t){t.emit(co)}function nf(t){return t?.setHeader&&typeof t.abort=="function"}function lf(t){t.emit("close")}function Ew(t,e){t.emit("error",e),dt.nextTick(lf,t)}function _w(t,e){!t||fw(t)||(!e&&!uw(t)&&(e=new cw),dw(t)?(t.socket=null,t.destroy(e)):nf(t)?t.abort():nf(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?dt.nextTick(Ew,t,e):dt.nextTick(lf,t),t.destroyed||(t[lw]=!0))}ff.exports={construct:ww,destroyer:_w,destroy:hw,undestroy:pw,errorOrDestroy:fo}});var vi=O((y0,df)=>{"use strict";var{ArrayIsArray:gw,ObjectSetPrototypeOf:uf}=$(),{EventEmitter:bi}=un();function xi(t){bi.call(this,t)}uf(xi.prototype,bi.prototype);uf(xi,bi);xi.prototype.pipe=function(t,e){let r=this;function n(u){t.writable&&t.write(u)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",o),r.on("close",a));let s=!1;function o(){s||(s=!0,t.end())}function a(){s||(s=!0,typeof t.destroy=="function"&&t.destroy())}function c(u){l(),bi.listenerCount(this,"error")===0&&this.emit("error",u)}uo(r,"error",c),uo(t,"error",c);function l(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",o),r.removeListener("close",a),r.removeListener("error",c),t.removeListener("error",c),r.removeListener("end",l),r.removeListener("close",l),t.removeListener("close",l)}return r.on("end",l),r.on("close",l),t.on("close",l),t.emit("pipe",r),t};function uo(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):gw(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}df.exports={Stream:xi,prependListener:uo}});var dn=O((p0,Ii)=>{"use strict";var{SymbolDispose:bw}=$(),{AbortError:hf,codes:xw}=ve(),{isNodeStream:yf,isWebStream:vw,kControllerErrorFunction:Iw}=ut(),Aw=Ft(),{ERR_INVALID_ARG_TYPE:pf}=xw,ho,Rw=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new pf(e,"AbortSignal",t)};Ii.exports.addAbortSignal=function(e,r){if(Rw(e,"signal"),!yf(r)&&!vw(r))throw new pf("stream",["ReadableStream","WritableStream","Stream"],r);return Ii.exports.addAbortSignalNoValidate(e,r)};Ii.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let r=yf(e)?()=>{e.destroy(new hf(void 0,{cause:t.reason}))}:()=>{e[Iw](new hf(void 0,{cause:t.reason}))};if(t.aborted)r();else{ho=ho||me().addAbortListener;let n=ho(t,r);Aw(e,n[bw])}return e}});var Sf=O((m0,mf)=>{"use strict";var{StringPrototypeSlice:wf,SymbolIterator:Nw,TypedArrayPrototypeSet:Ai,Uint8Array:kw}=$(),{Buffer:yo}=Ce(),{inspect:Tw}=me();mf.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){let r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return yo.alloc(0);let r=yo.allocUnsafe(e>>>0),n=this.head,i=0;for(;n;)Ai(r,n.data,i),i+=n.data.length,n=n.next;return r}consume(e,r){let n=this.head.data;if(e<n.length){let i=n.slice(0,e);return this.head.data=n.slice(e),i}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[Nw](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,i=0;do{let s=n.data;if(e>s.length)r+=s,e-=s.length;else{e===s.length?(r+=s,++i,n.next?this.head=n.next:this.head=this.tail=null):(r+=wf(s,0,e),this.head=n,n.data=wf(s,e));break}++i}while((n=n.next)!==null);return this.length-=i,r}_getBuffer(e){let r=yo.allocUnsafe(e),n=e,i=this.head,s=0;do{let o=i.data;if(e>o.length)Ai(r,o,n-e),e-=o.length;else{e===o.length?(Ai(r,o,n-e),++s,i.next?this.head=i.next:this.head=this.tail=null):(Ai(r,new kw(o.buffer,o.byteOffset,e),n-e),this.head=i,i.data=o.slice(e));break}++s}while((i=i.next)!==null);return this.length-=s,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return Tw(this,{...r,depth:0,customInspect:!1})}}});var hn=O((S0,bf)=>{"use strict";var{MathFloor:Ow,NumberIsInteger:Fw}=$(),{validateInteger:Dw}=Cr(),{ERR_INVALID_ARG_VALUE:Lw}=ve().codes,Ef=16*1024,_f=16;function Mw(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function gf(t){return t?_f:Ef}function Cw(t,e){Dw(e,"value",0),t?_f=e:Ef=e}function Ww(t,e,r,n){let i=Mw(e,n,r);if(i!=null){if(!Fw(i)||i<0){let s=n?`options.${r}`:"options.highWaterMark";throw new Lw(s,i)}return Ow(i)}return gf(t.objectMode)}bf.exports={getHighWaterMark:Ww,getDefaultHighWaterMark:gf,setDefaultHighWaterMark:Cw}});var If=O((po,vf)=>{var Ri=Ce(),ht=Ri.Buffer;function xf(t,e){for(var r in t)e[r]=t[r]}ht.from&&ht.alloc&&ht.allocUnsafe&&ht.allocUnsafeSlow?vf.exports=Ri:(xf(Ri,po),po.Buffer=or);function or(t,e,r){return ht(t,e,r)}or.prototype=Object.create(ht.prototype);xf(ht,or);or.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return ht(t,e,r)};or.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=ht(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};or.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return ht(t)};or.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Ri.SlowBuffer(t)}});var Nf=O(Rf=>{"use strict";var mo=If().Buffer,Af=mo.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Bw(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function Pw(t){var e=Bw(t);if(typeof e!="string"&&(mo.isEncoding===Af||!Af(t)))throw new Error("Unknown encoding: "+t);return e||t}Rf.StringDecoder=yn;function yn(t){this.encoding=Pw(t);var e;switch(this.encoding){case"utf16le":this.text=Vw,this.end=Hw,e=4;break;case"utf8":this.fillLast=qw,e=4;break;case"base64":this.text=Kw,this.end=Gw,e=3;break;default:this.write=Yw,this.end=Xw;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=mo.allocUnsafe(e)}yn.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};yn.prototype.end=$w;yn.prototype.text=zw;yn.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function wo(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function Uw(t,e,r){var n=e.length-1;if(n<r)return 0;var i=wo(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=wo(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=wo(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function jw(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function qw(t){var e=this.lastTotal-this.lastNeed,r=jw(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function zw(t,e){var r=Uw(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function $w(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function Vw(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function Hw(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function Kw(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function Gw(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function Yw(t){return t.toString(this.encoding)}function Xw(t){return t&&t.length?this.write(t):""}});var So=O((_0,Ff)=>{"use strict";var kf=qt(),{PromisePrototypeThen:Jw,SymbolAsyncIterator:Tf,SymbolIterator:Of}=$(),{Buffer:Qw}=Ce(),{ERR_INVALID_ARG_TYPE:Zw,ERR_STREAM_NULL_VALUES:em}=ve().codes;function tm(t,e,r){let n;if(typeof e=="string"||e instanceof Qw)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let i;if(e&&e[Tf])i=!0,n=e[Tf]();else if(e&&e[Of])i=!1,n=e[Of]();else throw new Zw("iterable",["Iterable"],e);let s=new t({objectMode:!0,highWaterMark:1,...r}),o=!1;s._read=function(){o||(o=!0,c())},s._destroy=function(l,u){Jw(a(l),()=>kf.nextTick(u,l),d=>kf.nextTick(u,d||l))};async function a(l){let u=l!=null,d=typeof n.throw=="function";if(u&&d){let{value:p,done:w}=await n.throw(l);if(await p,w)return}if(typeof n.return=="function"){let{value:p}=await n.return();await p}}async function c(){for(;;){try{let{value:l,done:u}=i?await n.next():n.next();if(u)s.push(null);else{let d=l&&typeof l.then=="function"?await l:l;if(d===null)throw o=!1,new em;if(s.push(d))continue;o=!1}}catch(l){s.destroy(l)}break}}return s}Ff.exports=tm});var wn=O((g0,Xf)=>{var Ye=qt(),{ArrayPrototypeIndexOf:rm,NumberIsInteger:nm,NumberIsNaN:im,NumberParseInt:sm,ObjectDefineProperties:Ao,ObjectKeys:om,ObjectSetPrototypeOf:Mf,Promise:Cf,SafeSet:am,SymbolAsyncDispose:cm,SymbolAsyncIterator:lm,Symbol:fm}=$();Xf.exports=A;A.ReadableState=Oi;var{EventEmitter:um}=un(),{Stream:$t,prependListener:dm}=vi(),{Buffer:Eo}=Ce(),{addAbortSignal:hm}=dn(),Wf=Ft(),T=me().debuglog("stream",t=>{T=t}),ym=Sf(),jr=sr(),{getHighWaterMark:pm,getDefaultHighWaterMark:wm}=hn(),{aggregateTwoErrors:Df,codes:{ERR_INVALID_ARG_TYPE:mm,ERR_METHOD_NOT_IMPLEMENTED:Sm,ERR_OUT_OF_RANGE:Em,ERR_STREAM_PUSH_AFTER_EOF:_m,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:gm},AbortError:bm}=ve(),{validateObject:xm}=Cr(),ar=fm("kPaused"),{StringDecoder:Bf}=Nf(),vm=So();Mf(A.prototype,$t.prototype);Mf(A,$t);var _o=()=>{},{errorOrDestroy:Pr}=jr,Ur=1,Im=2,Pf=4,pn=8,Uf=16,Ni=32,ki=64,jf=128,Am=256,Rm=512,Nm=1024,vo=2048,Io=4096,km=8192,Tm=16384,Om=32768,qf=65536,Fm=1<<17,Dm=1<<18;function te(t){return{enumerable:!1,get(){return(this.state&t)!==0},set(e){e?this.state|=t:this.state&=~t}}}Ao(Oi.prototype,{objectMode:te(Ur),ended:te(Im),endEmitted:te(Pf),reading:te(pn),constructed:te(Uf),sync:te(Ni),needReadable:te(ki),emittedReadable:te(jf),readableListening:te(Am),resumeScheduled:te(Rm),errorEmitted:te(Nm),emitClose:te(vo),autoDestroy:te(Io),destroyed:te(km),closed:te(Tm),closeEmitted:te(Om),multiAwaitDrain:te(qf),readingMore:te(Fm),dataEmitted:te(Dm)});function Oi(t,e,r){typeof r!="boolean"&&(r=e instanceof yt()),this.state=vo|Io|Uf|Ni,t&&t.objectMode&&(this.state|=Ur),r&&t&&t.readableObjectMode&&(this.state|=Ur),this.highWaterMark=t?pm(this,t,"readableHighWaterMark",r):wm(!1),this.buffer=new ym,this.length=0,this.pipes=[],this.flowing=null,this[ar]=null,t&&t.emitClose===!1&&(this.state&=~vo),t&&t.autoDestroy===!1&&(this.state&=~Io),this.errored=null,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new Bf(t.encoding),this.encoding=t.encoding)}function A(t){if(!(this instanceof A))return new A(t);let e=this instanceof yt();this._readableState=new Oi(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&hm(t.signal,this)),$t.call(this,t),jr.construct(this,()=>{this._readableState.needReadable&&Ti(this,this._readableState)})}A.prototype.destroy=jr.destroy;A.prototype._undestroy=jr.undestroy;A.prototype._destroy=function(t,e){e(t)};A.prototype[um.captureRejectionSymbol]=function(t){this.destroy(t)};A.prototype[cm]=function(){let t;return this.destroyed||(t=this.readableEnded?null:new bm,this.destroy(t)),new Cf((e,r)=>Wf(this,n=>n&&n!==t?r(n):e(null)))};A.prototype.push=function(t,e){return zf(this,t,e,!1)};A.prototype.unshift=function(t,e){return zf(this,t,e,!0)};function zf(t,e,r,n){T("readableAddChunk",e);let i=t._readableState,s;if(i.state&Ur||(typeof e=="string"?(r=r||i.defaultEncoding,i.encoding!==r&&(n&&i.encoding?e=Eo.from(e,r).toString(i.encoding):(e=Eo.from(e,r),r=""))):e instanceof Eo?r="":$t._isUint8Array(e)?(e=$t._uint8ArrayToBuffer(e),r=""):e!=null&&(s=new mm("chunk",["string","Buffer","Uint8Array"],e))),s)Pr(t,s);else if(e===null)i.state&=~pn,Cm(t,i);else if(i.state&Ur||e&&e.length>0)if(n)if(i.state&Pf)Pr(t,new gm);else{if(i.destroyed||i.errored)return!1;go(t,i,e,!0)}else if(i.ended)Pr(t,new _m);else{if(i.destroyed||i.errored)return!1;i.state&=~pn,i.decoder&&!r?(e=i.decoder.write(e),i.objectMode||e.length!==0?go(t,i,e,!1):Ti(t,i)):go(t,i,e,!1)}else n||(i.state&=~pn,Ti(t,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function go(t,e,r,n){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?(e.state&qf?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.state&ki&&Fi(t)),Ti(t,e)}A.prototype.isPaused=function(){let t=this._readableState;return t[ar]===!0||t.flowing===!1};A.prototype.setEncoding=function(t){let e=new Bf(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let i of r)n+=e.write(i);return r.clear(),n!==""&&r.push(n),this._readableState.length=n.length,this};var Lm=1073741824;function Mm(t){if(t>Lm)throw new Em("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function Lf(t,e){return t<=0||e.length===0&&e.ended?0:e.state&Ur?1:im(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}A.prototype.read=function(t){T("read",t),t===void 0?t=NaN:nm(t)||(t=sm(t,10));let e=this._readableState,r=t;if(t>e.highWaterMark&&(e.highWaterMark=Mm(t)),t!==0&&(e.state&=~jf),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return T("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?bo(this):Fi(this),null;if(t=Lf(t,e),t===0&&e.ended)return e.length===0&&bo(this),null;let n=(e.state&ki)!==0;if(T("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,T("length less than watermark",n)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)n=!1,T("reading, ended or constructing",n);else if(n){T("do read"),e.state|=pn|Ni,e.length===0&&(e.state|=ki);try{this._read(e.highWaterMark)}catch(s){Pr(this,s)}e.state&=~Ni,e.reading||(t=Lf(r,e))}let i;return t>0?i=Gf(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&bo(this)),i!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",i)),i};function Cm(t,e){if(T("onEofChunk"),!e.ended){if(e.decoder){let r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?Fi(t):(e.needReadable=!1,e.emittedReadable=!0,$f(t))}}function Fi(t){let e=t._readableState;T("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(T("emitReadable",e.flowing),e.emittedReadable=!0,Ye.nextTick($f,t))}function $f(t){let e=t._readableState;T("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,Hf(t)}function Ti(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,Ye.nextTick(Wm,t,e))}function Wm(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let r=e.length;if(T("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}A.prototype._read=function(t){throw new Sm("_read()")};A.prototype.pipe=function(t,e){let r=this,n=this._readableState;n.pipes.length===1&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new am(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(t),T("pipe count=%d opts=%j",n.pipes.length,e);let s=(!e||e.end!==!1)&&t!==Ye.stdout&&t!==Ye.stderr?a:R;n.endEmitted?Ye.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(g,L){T("onunpipe"),g===r&&L&&L.hasUnpiped===!1&&(L.hasUnpiped=!0,u())}function a(){T("onend"),t.end()}let c,l=!1;function u(){T("cleanup"),t.removeListener("close",_),t.removeListener("finish",m),c&&t.removeListener("drain",c),t.removeListener("error",w),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",R),r.removeListener("data",p),l=!0,c&&n.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&c()}function d(){l||(n.pipes.length===1&&n.pipes[0]===t?(T("false write response, pause",0),n.awaitDrainWriters=t,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(t)&&(T("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(t)),r.pause()),c||(c=Bm(r,t),t.on("drain",c))}r.on("data",p);function p(g){T("ondata");let L=t.write(g);T("dest.write",L),L===!1&&d()}function w(g){if(T("onerror",g),R(),t.removeListener("error",w),t.listenerCount("error")===0){let L=t._writableState||t._readableState;L&&!L.errorEmitted?Pr(t,g):t.emit("error",g)}}dm(t,"error",w);function _(){t.removeListener("finish",m),R()}t.once("close",_);function m(){T("onfinish"),t.removeListener("close",_),R()}t.once("finish",m);function R(){T("unpipe"),r.unpipe(t)}return t.emit("pipe",r),t.writableNeedDrain===!0?d():n.flowing||(T("pipe resume"),r.resume()),t};function Bm(t,e){return function(){let n=t._readableState;n.awaitDrainWriters===e?(T("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(T("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(e)),(!n.awaitDrainWriters||n.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}A.prototype.unpipe=function(t){let e=this._readableState,r={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let i=e.pipes;e.pipes=[],this.pause();for(let s=0;s<i.length;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}let n=rm(e.pipes,t);return n===-1?this:(e.pipes.splice(n,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,r),this)};A.prototype.on=function(t,e){let r=$t.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,T("on readable",n.length,n.reading),n.length?Fi(this):n.reading||Ye.nextTick(Pm,this)),r};A.prototype.addListener=A.prototype.on;A.prototype.removeListener=function(t,e){let r=$t.prototype.removeListener.call(this,t,e);return t==="readable"&&Ye.nextTick(Vf,this),r};A.prototype.off=A.prototype.removeListener;A.prototype.removeAllListeners=function(t){let e=$t.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&Ye.nextTick(Vf,this),e};function Vf(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[ar]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function Pm(t){T("readable nexttick read 0"),t.read(0)}A.prototype.resume=function(){let t=this._readableState;return t.flowing||(T("resume"),t.flowing=!t.readableListening,Um(this,t)),t[ar]=!1,this};function Um(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Ye.nextTick(jm,t,e))}function jm(t,e){T("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),Hf(t),e.flowing&&!e.reading&&t.read(0)}A.prototype.pause=function(){return T("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(T("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[ar]=!0,this};function Hf(t){let e=t._readableState;for(T("flow",e.flowing);e.flowing&&t.read()!==null;);}A.prototype.wrap=function(t){let e=!1;t.on("data",n=>{!this.push(n)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",n=>{Pr(this,n)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let r=om(t);for(let n=1;n<r.length;n++){let i=r[n];this[i]===void 0&&typeof t[i]=="function"&&(this[i]=t[i].bind(t))}return this};A.prototype[lm]=function(){return Kf(this)};A.prototype.iterator=function(t){return t!==void 0&&xm(t,"options"),Kf(this,t)};function Kf(t,e){typeof t.read!="function"&&(t=A.wrap(t,{objectMode:!0}));let r=qm(t,e);return r.stream=t,r}async function*qm(t,e){let r=_o;function n(o){this===t?(r(),r=_o):r=o}t.on("readable",n);let i,s=Wf(t,{writable:!1},o=>{i=o?Df(i,o):null,r(),r=_o});try{for(;;){let o=t.destroyed?null:t.read();if(o!==null)yield o;else{if(i)throw i;if(i===null)return;await new Cf(n)}}}catch(o){throw i=Df(i,o),i}finally{(i||e?.destroyOnReturn!==!1)&&(i===void 0||t._readableState.autoDestroy)?jr.destroyer(t,null):(t.off("readable",n),s())}}Ao(A.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});Ao(Oi.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[ar]!==!1},set(t){this[ar]=!!t}}});A._fromList=Gf;function Gf(t,e){if(e.length===0)return null;let r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function bo(t){let e=t._readableState;T("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,Ye.nextTick(zm,e,t))}function zm(t,e){if(T("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)Ye.nextTick($m,e);else if(t.autoDestroy){let r=e._writableState;(!r||r.autoDestroy&&(r.finished||r.writable===!1))&&e.destroy()}}}function $m(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}A.from=function(t,e){return vm(A,t,e)};var xo;function Yf(){return xo===void 0&&(xo={}),xo}A.fromWeb=function(t,e){return Yf().newStreamReadableFromReadableStream(t,e)};A.toWeb=function(t,e){return Yf().newReadableStreamFromStreamReadable(t,e)};A.wrap=function(t,e){var r,n;return new A({objectMode:(r=(n=t.readableObjectMode)!==null&&n!==void 0?n:t.objectMode)!==null&&r!==void 0?r:!0,...e,destroy(i,s){jr.destroyer(t,i),s(i)}}).wrap(t)}});var Wi=O((b0,cu)=>{var cr=qt(),{ArrayPrototypeSlice:Zf,Error:Vm,FunctionPrototypeSymbolHasInstance:eu,ObjectDefineProperty:tu,ObjectDefineProperties:Hm,ObjectSetPrototypeOf:ru,StringPrototypeToLowerCase:Km,Symbol:Gm,SymbolHasInstance:Ym}=$();cu.exports=V;V.WritableState=En;var{EventEmitter:Xm}=un(),mn=vi().Stream,{Buffer:Di}=Ce(),Ci=sr(),{addAbortSignal:Jm}=dn(),{getHighWaterMark:Qm,getDefaultHighWaterMark:Zm}=hn(),{ERR_INVALID_ARG_TYPE:eS,ERR_METHOD_NOT_IMPLEMENTED:tS,ERR_MULTIPLE_CALLBACK:nu,ERR_STREAM_CANNOT_PIPE:rS,ERR_STREAM_DESTROYED:Sn,ERR_STREAM_ALREADY_FINISHED:nS,ERR_STREAM_NULL_VALUES:iS,ERR_STREAM_WRITE_AFTER_END:sS,ERR_UNKNOWN_ENCODING:iu}=ve().codes,{errorOrDestroy:qr}=Ci;ru(V.prototype,mn.prototype);ru(V,mn);function ko(){}var zr=Gm("kOnFinished");function En(t,e,r){typeof r!="boolean"&&(r=e instanceof yt()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?Qm(this,t,"writableHighWaterMark",r):Zm(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!!(t&&t.decodeStrings===!1);this.decodeStrings=!n,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=aS.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Mi(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[zr]=[]}function Mi(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}En.prototype.getBuffer=function(){return Zf(this.buffered,this.bufferedIndex)};tu(En.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function V(t){let e=this instanceof yt();if(!e&&!eu(V,this))return new V(t);this._writableState=new En(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&Jm(t.signal,this)),mn.call(this,t),Ci.construct(this,()=>{let r=this._writableState;r.writing||Oo(this,r),Fo(this,r)})}tu(V,Ym,{__proto__:null,value:function(t){return eu(this,t)?!0:this!==V?!1:t&&t._writableState instanceof En}});V.prototype.pipe=function(){qr(this,new rS)};function su(t,e,r,n){let i=t._writableState;if(typeof r=="function")n=r,r=i.defaultEncoding;else{if(!r)r=i.defaultEncoding;else if(r!=="buffer"&&!Di.isEncoding(r))throw new iu(r);typeof n!="function"&&(n=ko)}if(e===null)throw new iS;if(!i.objectMode)if(typeof e=="string")i.decodeStrings!==!1&&(e=Di.from(e,r),r="buffer");else if(e instanceof Di)r="buffer";else if(mn._isUint8Array(e))e=mn._uint8ArrayToBuffer(e),r="buffer";else throw new eS("chunk",["string","Buffer","Uint8Array"],e);let s;return i.ending?s=new sS:i.destroyed&&(s=new Sn("write")),s?(cr.nextTick(n,s),qr(t,s,!0),s):(i.pendingcb++,oS(t,i,e,r,n))}V.prototype.write=function(t,e,r){return su(this,t,e,r)===!0};V.prototype.cork=function(){this._writableState.corked++};V.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||Oo(this,t))};V.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=Km(e)),!Di.isEncoding(e))throw new iu(e);return this._writableState.defaultEncoding=e,this};function oS(t,e,r,n,i){let s=e.objectMode?1:r.length;e.length+=s;let o=e.length<e.highWaterMark;return o||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:r,encoding:n,callback:i}),e.allBuffers&&n!=="buffer"&&(e.allBuffers=!1),e.allNoop&&i!==ko&&(e.allNoop=!1)):(e.writelen=s,e.writecb=i,e.writing=!0,e.sync=!0,t._write(r,n,e.onwrite),e.sync=!1),o&&!e.errored&&!e.destroyed}function Jf(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new Sn("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function Qf(t,e,r,n){--e.pendingcb,n(r),To(e),qr(t,r)}function aS(t,e){let r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function"){qr(t,new nu);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,e?(e.stack,r.errored||(r.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),n?cr.nextTick(Qf,t,r,e,i):Qf(t,r,e,i)):(r.buffered.length>r.bufferedIndex&&Oo(t,r),n?r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===i?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:i,stream:t,state:r},cr.nextTick(cS,r.afterWriteTickInfo)):ou(t,r,1,i))}function cS({stream:t,state:e,count:r,cb:n}){return e.afterWriteTickInfo=null,ou(t,e,r,n)}function ou(t,e,r,n){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));r-- >0;)e.pendingcb--,n();e.destroyed&&To(e),Fo(t,e)}function To(t){if(t.writing)return;for(let i=t.bufferedIndex;i<t.buffered.length;++i){var e;let{chunk:s,callback:o}=t.buffered[i],a=t.objectMode?1:s.length;t.length-=a,o((e=t.errored)!==null&&e!==void 0?e:new Sn("write"))}let r=t[zr].splice(0);for(let i=0;i<r.length;i++){var n;r[i]((n=t.errored)!==null&&n!==void 0?n:new Sn("end"))}Mi(t)}function Oo(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:r,bufferedIndex:n,objectMode:i}=e,s=r.length-n;if(!s)return;let o=n;if(e.bufferProcessing=!0,s>1&&t._writev){e.pendingcb-=s-1;let a=e.allNoop?ko:l=>{for(let u=o;u<r.length;++u)r[u].callback(l)},c=e.allNoop&&o===0?r:Zf(r,o);c.allBuffers=e.allBuffers,Jf(t,e,!0,e.length,c,"",a),Mi(e)}else{do{let{chunk:a,encoding:c,callback:l}=r[o];r[o++]=null;let u=i?1:a.length;Jf(t,e,!1,u,a,c,l)}while(o<r.length&&!e.writing);o===r.length?Mi(e):o>256?(r.splice(0,o),e.bufferedIndex=0):e.bufferedIndex=o}e.bufferProcessing=!1}V.prototype._write=function(t,e,r){if(this._writev)this._writev([{chunk:t,encoding:e}],r);else throw new tS("_write()")};V.prototype._writev=null;V.prototype.end=function(t,e,r){let n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null);let i;if(t!=null){let s=su(this,t,e);s instanceof Vm&&(i=s)}return n.corked&&(n.corked=1,this.uncork()),i||(!n.errored&&!n.ending?(n.ending=!0,Fo(this,n,!0),n.ended=!0):n.finished?i=new nS("end"):n.destroyed&&(i=new Sn("end"))),typeof r=="function"&&(i||n.finished?cr.nextTick(r,i):n[zr].push(r)),this};function Li(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function lS(t,e){let r=!1;function n(i){if(r){qr(t,i??nu());return}if(r=!0,e.pendingcb--,i){let s=e[zr].splice(0);for(let o=0;o<s.length;o++)s[o](i);qr(t,i,e.sync)}else Li(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,cr.nextTick(No,t,e))}e.sync=!0,e.pendingcb++;try{t._final(n)}catch(i){n(i)}e.sync=!1}function fS(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,lS(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Fo(t,e,r){Li(e)&&(fS(t,e),e.pendingcb===0&&(r?(e.pendingcb++,cr.nextTick((n,i)=>{Li(i)?No(n,i):i.pendingcb--},t,e)):Li(e)&&(e.pendingcb++,No(t,e))))}function No(t,e){e.pendingcb--,e.finished=!0;let r=e[zr].splice(0);for(let n=0;n<r.length;n++)r[n]();if(t.emit("finish"),e.autoDestroy){let n=t._readableState;(!n||n.autoDestroy&&(n.endEmitted||n.readable===!1))&&t.destroy()}}Hm(V.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var uS=Ci.destroy;V.prototype.destroy=function(t,e){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[zr].length)&&cr.nextTick(To,r),uS.call(this,t,e),this};V.prototype._undestroy=Ci.undestroy;V.prototype._destroy=function(t,e){e(t)};V.prototype[Xm.captureRejectionSymbol]=function(t){this.destroy(t)};var Ro;function au(){return Ro===void 0&&(Ro={}),Ro}V.fromWeb=function(t,e){return au().newStreamWritableFromWritableStream(t,e)};V.toWeb=function(t){return au().newWritableStreamFromStreamWritable(t)}});var xu=O((x0,bu)=>{var Do=qt(),dS=Ce(),{isReadable:hS,isWritable:yS,isIterable:lu,isNodeStream:pS,isReadableNodeStream:fu,isWritableNodeStream:uu,isDuplexNodeStream:wS,isReadableStream:du,isWritableStream:hu}=ut(),yu=Ft(),{AbortError:_u,codes:{ERR_INVALID_ARG_TYPE:mS,ERR_INVALID_RETURN_VALUE:pu}}=ve(),{destroyer:Vr}=sr(),SS=yt(),gu=wn(),ES=Wi(),{createDeferredPromise:wu}=me(),mu=So(),Su=globalThis.Blob||dS.Blob,_S=typeof Su<"u"?function(e){return e instanceof Su}:function(e){return!1},gS=globalThis.AbortController||Dr().AbortController,{FunctionPrototypeCall:Eu}=$(),Vt=class extends SS{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};bu.exports=function t(e,r){if(wS(e))return e;if(fu(e))return $r({readable:e});if(uu(e))return $r({writable:e});if(pS(e))return $r({writable:!1,readable:!1});if(du(e))return $r({readable:gu.fromWeb(e)});if(hu(e))return $r({writable:ES.fromWeb(e)});if(typeof e=="function"){let{value:i,write:s,final:o,destroy:a}=bS(e);if(lu(i))return mu(Vt,i,{objectMode:!0,write:s,final:o,destroy:a});let c=i?.then;if(typeof c=="function"){let l,u=Eu(c,i,d=>{if(d!=null)throw new pu("nully","body",d)},d=>{Vr(l,d)});return l=new Vt({objectMode:!0,readable:!1,write:s,final(d){o(async()=>{try{await u,Do.nextTick(d,null)}catch(p){Do.nextTick(d,p)}})},destroy:a})}throw new pu("Iterable, AsyncIterable or AsyncFunction",r,i)}if(_S(e))return t(e.arrayBuffer());if(lu(e))return mu(Vt,e,{objectMode:!0,writable:!1});if(du(e?.readable)&&hu(e?.writable))return Vt.fromWeb(e);if(typeof e?.writable=="object"||typeof e?.readable=="object"){let i=e!=null&&e.readable?fu(e?.readable)?e?.readable:t(e.readable):void 0,s=e!=null&&e.writable?uu(e?.writable)?e?.writable:t(e.writable):void 0;return $r({readable:i,writable:s})}let n=e?.then;if(typeof n=="function"){let i;return Eu(n,e,s=>{s!=null&&i.push(s),i.push(null)},s=>{Vr(i,s)}),i=new Vt({objectMode:!0,writable:!1,read(){}})}throw new mS(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function bS(t){let{promise:e,resolve:r}=wu(),n=new gS,i=n.signal;return{value:t(async function*(){for(;;){let o=e;e=null;let{chunk:a,done:c,cb:l}=await o;if(Do.nextTick(l),c)return;if(i.aborted)throw new _u(void 0,{cause:i.reason});({promise:e,resolve:r}=wu()),yield a}}(),{signal:i}),write(o,a,c){let l=r;r=null,l({chunk:o,done:!1,cb:c})},final(o){let a=r;r=null,a({done:!0,cb:o})},destroy(o,a){n.abort(),a(o)}}}function $r(t){let e=t.readable&&typeof t.readable.read!="function"?gu.wrap(t.readable):t.readable,r=t.writable,n=!!hS(e),i=!!yS(r),s,o,a,c,l;function u(d){let p=c;c=null,p?p(d):d&&l.destroy(d)}return l=new Vt({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(r!=null&&r.writableObjectMode),readable:n,writable:i}),i&&(yu(r,d=>{i=!1,d&&Vr(e,d),u(d)}),l._write=function(d,p,w){r.write(d,p)?w():s=w},l._final=function(d){r.end(),o=d},r.on("drain",function(){if(s){let d=s;s=null,d()}}),r.on("finish",function(){if(o){let d=o;o=null,d()}})),n&&(yu(e,d=>{n=!1,d&&Vr(e,d),u(d)}),e.on("readable",function(){if(a){let d=a;a=null,d()}}),e.on("end",function(){l.push(null)}),l._read=function(){for(;;){let d=e.read();if(d===null){a=l._read;return}if(!l.push(d))return}}),l._destroy=function(d,p){!d&&c!==null&&(d=new _u),a=null,s=null,o=null,c===null?p(d):(c=p,Vr(r,d),Vr(e,d))},l}});var yt=O((v0,Au)=>{"use strict";var{ObjectDefineProperties:xS,ObjectGetOwnPropertyDescriptor:Dt,ObjectKeys:vS,ObjectSetPrototypeOf:vu}=$();Au.exports=Xe;var Co=wn(),Be=Wi();vu(Xe.prototype,Co.prototype);vu(Xe,Co);{let t=vS(Be.prototype);for(let e=0;e<t.length;e++){let r=t[e];Xe.prototype[r]||(Xe.prototype[r]=Be.prototype[r])}}function Xe(t){if(!(this instanceof Xe))return new Xe(t);Co.call(this,t),Be.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}xS(Xe.prototype,{writable:{__proto__:null,...Dt(Be.prototype,"writable")},writableHighWaterMark:{__proto__:null,...Dt(Be.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...Dt(Be.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...Dt(Be.prototype,"writableBuffer")},writableLength:{__proto__:null,...Dt(Be.prototype,"writableLength")},writableFinished:{__proto__:null,...Dt(Be.prototype,"writableFinished")},writableCorked:{__proto__:null,...Dt(Be.prototype,"writableCorked")},writableEnded:{__proto__:null,...Dt(Be.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...Dt(Be.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var Lo;function Iu(){return Lo===void 0&&(Lo={}),Lo}Xe.fromWeb=function(t,e){return Iu().newStreamDuplexFromReadableWritablePair(t,e)};Xe.toWeb=function(t){return Iu().newReadableWritablePairFromDuplex(t)};var Mo;Xe.from=function(t){return Mo||(Mo=xu()),Mo(t,"body")}});var Po=O((I0,Nu)=>{"use strict";var{ObjectSetPrototypeOf:Ru,Symbol:IS}=$();Nu.exports=Lt;var{ERR_METHOD_NOT_IMPLEMENTED:AS}=ve().codes,Bo=yt(),{getHighWaterMark:RS}=hn();Ru(Lt.prototype,Bo.prototype);Ru(Lt,Bo);var _n=IS("kCallback");function Lt(t){if(!(this instanceof Lt))return new Lt(t);let e=t?RS(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),Bo.call(this,t),this._readableState.sync=!1,this[_n]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",NS)}function Wo(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function NS(){this._final!==Wo&&Wo.call(this)}Lt.prototype._final=Wo;Lt.prototype._transform=function(t,e,r){throw new AS("_transform()")};Lt.prototype._write=function(t,e,r){let n=this._readableState,i=this._writableState,s=n.length;this._transform(t,e,(o,a)=>{if(o){r(o);return}a!=null&&this.push(a),i.ended||s===n.length||n.length<n.highWaterMark?r():this[_n]=r})};Lt.prototype._read=function(){if(this[_n]){let t=this[_n];this[_n]=null,t()}}});var jo=O((A0,Tu)=>{"use strict";var{ObjectSetPrototypeOf:ku}=$();Tu.exports=Hr;var Uo=Po();ku(Hr.prototype,Uo.prototype);ku(Hr,Uo);function Hr(t){if(!(this instanceof Hr))return new Hr(t);Uo.call(this,t)}Hr.prototype._transform=function(t,e,r){r(null,t)}});var ji=O((R0,Mu)=>{var gn=qt(),{ArrayIsArray:kS,Promise:TS,SymbolAsyncIterator:OS,SymbolDispose:FS}=$(),Ui=Ft(),{once:DS}=me(),LS=sr(),Ou=yt(),{aggregateTwoErrors:MS,codes:{ERR_INVALID_ARG_TYPE:Xo,ERR_INVALID_RETURN_VALUE:qo,ERR_MISSING_ARGS:CS,ERR_STREAM_DESTROYED:WS,ERR_STREAM_PREMATURE_CLOSE:BS},AbortError:PS}=ve(),{validateFunction:US,validateAbortSignal:jS}=Cr(),{isIterable:lr,isReadable:zo,isReadableNodeStream:Pi,isNodeStream:Fu,isTransformStream:Kr,isWebStream:qS,isReadableStream:$o,isReadableFinished:zS}=ut(),$S=globalThis.AbortController||Dr().AbortController,Vo,Ho,Ko;function Du(t,e,r){let n=!1;t.on("close",()=>{n=!0});let i=Ui(t,{readable:e,writable:r},s=>{n=!s});return{destroy:s=>{n||(n=!0,LS.destroyer(t,s||new WS("pipe")))},cleanup:i}}function VS(t){return US(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function Go(t){if(lr(t))return t;if(Pi(t))return HS(t);throw new Xo("val",["Readable","Iterable","AsyncIterable"],t)}async function*HS(t){Ho||(Ho=wn()),yield*Ho.prototype[OS].call(t)}async function Bi(t,e,r,{end:n}){let i,s=null,o=l=>{if(l&&(i=l),s){let u=s;s=null,u()}},a=()=>new TS((l,u)=>{i?u(i):s=()=>{i?u(i):l()}});e.on("drain",o);let c=Ui(e,{readable:!1},o);try{e.writableNeedDrain&&await a();for await(let l of t)e.write(l)||await a();n&&(e.end(),await a()),r()}catch(l){r(i!==l?MS(i,l):l)}finally{c(),e.off("drain",o)}}async function Yo(t,e,r,{end:n}){Kr(e)&&(e=e.writable);let i=e.getWriter();try{for await(let s of t)await i.ready,i.write(s).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(s){try{await i.abort(s),r(s)}catch(o){r(o)}}}function KS(...t){return Lu(t,DS(VS(t)))}function Lu(t,e,r){if(t.length===1&&kS(t[0])&&(t=t[0]),t.length<2)throw new CS("streams");let n=new $S,i=n.signal,s=r?.signal,o=[];jS(s,"options.signal");function a(){_(new PS)}Ko=Ko||me().addAbortListener;let c;s&&(c=Ko(s,a));let l,u,d=[],p=0;function w(H){_(H,--p===0)}function _(H,k){var j;if(H&&(!l||l.code==="ERR_STREAM_PREMATURE_CLOSE")&&(l=H),!(!l&&!k)){for(;d.length;)d.shift()(l);(j=c)===null||j===void 0||j[FS](),n.abort(),k&&(l||o.forEach(Qe=>Qe()),gn.nextTick(e,l,u))}}let m;for(let H=0;H<t.length;H++){let k=t[H],j=H<t.length-1,Qe=H>0,Ee=j||r?.end!==!1,St=H===t.length-1;if(Fu(k)){let ue=function(Ne){Ne&&Ne.name!=="AbortError"&&Ne.code!=="ERR_STREAM_PREMATURE_CLOSE"&&w(Ne)};var L=ue;if(Ee){let{destroy:Ne,cleanup:mr}=Du(k,j,Qe);d.push(Ne),zo(k)&&St&&o.push(mr)}k.on("error",ue),zo(k)&&St&&o.push(()=>{k.removeListener("error",ue)})}if(H===0)if(typeof k=="function"){if(m=k({signal:i}),!lr(m))throw new qo("Iterable, AsyncIterable or Stream","source",m)}else lr(k)||Pi(k)||Kr(k)?m=k:m=Ou.from(k);else if(typeof k=="function"){if(Kr(m)){var R;m=Go((R=m)===null||R===void 0?void 0:R.readable)}else m=Go(m);if(m=k(m,{signal:i}),j){if(!lr(m,!0))throw new qo("AsyncIterable",`transform[${H-1}]`,m)}else{var g;Vo||(Vo=jo());let ue=new Vo({objectMode:!0}),Ne=(g=m)===null||g===void 0?void 0:g.then;if(typeof Ne=="function")p++,Ne.call(m,je=>{u=je,je!=null&&ue.write(je),Ee&&ue.end(),gn.nextTick(w)},je=>{ue.destroy(je),gn.nextTick(w,je)});else if(lr(m,!0))p++,Bi(m,ue,w,{end:Ee});else if($o(m)||Kr(m)){let je=m.readable||m;p++,Bi(je,ue,w,{end:Ee})}else throw new qo("AsyncIterable or Promise","destination",m);m=ue;let{destroy:mr,cleanup:Tn}=Du(m,!1,!0);d.push(mr),St&&o.push(Tn)}}else if(Fu(k)){if(Pi(m)){p+=2;let ue=GS(m,k,w,{end:Ee});zo(k)&&St&&o.push(ue)}else if(Kr(m)||$o(m)){let ue=m.readable||m;p++,Bi(ue,k,w,{end:Ee})}else if(lr(m))p++,Bi(m,k,w,{end:Ee});else throw new Xo("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],m);m=k}else if(qS(k)){if(Pi(m))p++,Yo(Go(m),k,w,{end:Ee});else if($o(m)||lr(m))p++,Yo(m,k,w,{end:Ee});else if(Kr(m))p++,Yo(m.readable,k,w,{end:Ee});else throw new Xo("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],m);m=k}else m=Ou.from(k)}return(i!=null&&i.aborted||s!=null&&s.aborted)&&gn.nextTick(a),m}function GS(t,e,r,{end:n}){let i=!1;if(e.on("close",()=>{i||r(new BS)}),t.pipe(e,{end:!1}),n){let o=function(){i=!0,e.end()};var s=o;zS(t)?gn.nextTick(o):t.once("end",o)}else r();return Ui(t,{readable:!0,writable:!1},o=>{let a=t._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",r).once("error",r):r(o)}),Ui(e,{readable:!1,writable:!0},r)}Mu.exports={pipelineImpl:Lu,pipeline:KS}});var Qo=O((N0,ju)=>{"use strict";var{pipeline:YS}=ji(),qi=yt(),{destroyer:XS}=sr(),{isNodeStream:zi,isReadable:Cu,isWritable:Wu,isWebStream:Jo,isTransformStream:fr,isWritableStream:Bu,isReadableStream:Pu}=ut(),{AbortError:JS,codes:{ERR_INVALID_ARG_VALUE:Uu,ERR_MISSING_ARGS:QS}}=ve(),ZS=Ft();ju.exports=function(...e){if(e.length===0)throw new QS("streams");if(e.length===1)return qi.from(e[0]);let r=[...e];if(typeof e[0]=="function"&&(e[0]=qi.from(e[0])),typeof e[e.length-1]=="function"){let w=e.length-1;e[w]=qi.from(e[w])}for(let w=0;w<e.length;++w)if(!(!zi(e[w])&&!Jo(e[w]))){if(w<e.length-1&&!(Cu(e[w])||Pu(e[w])||fr(e[w])))throw new Uu(`streams[${w}]`,r[w],"must be readable");if(w>0&&!(Wu(e[w])||Bu(e[w])||fr(e[w])))throw new Uu(`streams[${w}]`,r[w],"must be writable")}let n,i,s,o,a;function c(w){let _=o;o=null,_?_(w):w?a.destroy(w):!p&&!d&&a.destroy()}let l=e[0],u=YS(e,c),d=!!(Wu(l)||Bu(l)||fr(l)),p=!!(Cu(u)||Pu(u)||fr(u));if(a=new qi({writableObjectMode:!!(l!=null&&l.writableObjectMode),readableObjectMode:!!(u!=null&&u.readableObjectMode),writable:d,readable:p}),d){if(zi(l))a._write=function(_,m,R){l.write(_,m)?R():n=R},a._final=function(_){l.end(),i=_},l.on("drain",function(){if(n){let _=n;n=null,_()}});else if(Jo(l)){let m=(fr(l)?l.writable:l).getWriter();a._write=async function(R,g,L){try{await m.ready,m.write(R).catch(()=>{}),L()}catch(H){L(H)}},a._final=async function(R){try{await m.ready,m.close().catch(()=>{}),i=R}catch(g){R(g)}}}let w=fr(u)?u.readable:u;ZS(w,()=>{if(i){let _=i;i=null,_()}})}if(p){if(zi(u))u.on("readable",function(){if(s){let w=s;s=null,w()}}),u.on("end",function(){a.push(null)}),a._read=function(){for(;;){let w=u.read();if(w===null){s=a._read;return}if(!a.push(w))return}};else if(Jo(u)){let _=(fr(u)?u.readable:u).getReader();a._read=async function(){for(;;)try{let{value:m,done:R}=await _.read();if(!a.push(m))return;if(R){a.push(null);return}}catch{return}}}}return a._destroy=function(w,_){!w&&o!==null&&(w=new JS),s=null,n=null,i=null,o===null?_(w):(o=_,zi(u)&&XS(u,w))},a}});var Ju=O((k0,ta)=>{"use strict";var eE=globalThis.AbortController||Dr().AbortController,{codes:{ERR_INVALID_ARG_VALUE:tE,ERR_INVALID_ARG_TYPE:bn,ERR_MISSING_ARGS:rE,ERR_OUT_OF_RANGE:nE},AbortError:pt}=ve(),{validateAbortSignal:ur,validateInteger:qu,validateObject:dr}=Cr(),iE=$().Symbol("kWeak"),sE=$().Symbol("kResistStopPropagation"),{finished:oE}=Ft(),aE=Qo(),{addAbortSignalNoValidate:cE}=dn(),{isWritable:lE,isNodeStream:fE}=ut(),{deprecate:uE}=me(),{ArrayPrototypePush:dE,Boolean:hE,MathFloor:zu,Number:yE,NumberIsNaN:pE,Promise:$u,PromiseReject:Vu,PromiseResolve:wE,PromisePrototypeThen:Hu,Symbol:Gu}=$(),$i=Gu("kEmpty"),Ku=Gu("kEof");function mE(t,e){if(e!=null&&dr(e,"options"),e?.signal!=null&&ur(e.signal,"options.signal"),fE(t)&&!lE(t))throw new tE("stream",t,"must be writable");let r=aE(this,t);return e!=null&&e.signal&&cE(e.signal,r),r}function Vi(t,e){if(typeof t!="function")throw new bn("fn",["Function","AsyncFunction"],t);e!=null&&dr(e,"options"),e?.signal!=null&&ur(e.signal,"options.signal");let r=1;e?.concurrency!=null&&(r=zu(e.concurrency));let n=r-1;return e?.highWaterMark!=null&&(n=zu(e.highWaterMark)),qu(r,"options.concurrency",1),qu(n,"options.highWaterMark",0),n+=r,async function*(){let s=me().AbortSignalAny([e?.signal].filter(hE)),o=this,a=[],c={signal:s},l,u,d=!1,p=0;function w(){d=!0,_()}function _(){p-=1,m()}function m(){u&&!d&&p<r&&a.length<n&&(u(),u=null)}async function R(){try{for await(let g of o){if(d)return;if(s.aborted)throw new pt;try{if(g=t(g,c),g===$i)continue;g=wE(g)}catch(L){g=Vu(L)}p+=1,Hu(g,_,w),a.push(g),l&&(l(),l=null),!d&&(a.length>=n||p>=r)&&await new $u(L=>{u=L})}a.push(Ku)}catch(g){let L=Vu(g);Hu(L,_,w),a.push(L)}finally{d=!0,l&&(l(),l=null)}}R();try{for(;;){for(;a.length>0;){let g=await a[0];if(g===Ku)return;if(s.aborted)throw new pt;g!==$i&&(yield g),a.shift(),m()}await new $u(g=>{l=g})}}finally{d=!0,u&&(u(),u=null)}}.call(this)}function SE(t=void 0){return t!=null&&dr(t,"options"),t?.signal!=null&&ur(t.signal,"options.signal"),async function*(){let r=0;for await(let i of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new pt({cause:t.signal.reason});yield[r++,i]}}.call(this)}async function Yu(t,e=void 0){for await(let r of ea.call(this,t,e))return!0;return!1}async function EE(t,e=void 0){if(typeof t!="function")throw new bn("fn",["Function","AsyncFunction"],t);return!await Yu.call(this,async(...r)=>!await t(...r),e)}async function _E(t,e){for await(let r of ea.call(this,t,e))return r}async function gE(t,e){if(typeof t!="function")throw new bn("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i),$i}for await(let n of Vi.call(this,r,e));}function ea(t,e){if(typeof t!="function")throw new bn("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i)?n:$i}return Vi.call(this,r,e)}var Zo=class extends rE{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function bE(t,e,r){var n;if(typeof t!="function")throw new bn("reducer",["Function","AsyncFunction"],t);r!=null&&dr(r,"options"),r?.signal!=null&&ur(r.signal,"options.signal");let i=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){let l=new pt(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await oE(this.destroy(l)),l}let s=new eE,o=s.signal;if(r!=null&&r.signal){let l={once:!0,[iE]:this,[sE]:!0};r.signal.addEventListener("abort",()=>s.abort(),l)}let a=!1;try{for await(let l of this){var c;if(a=!0,r!=null&&(c=r.signal)!==null&&c!==void 0&&c.aborted)throw new pt;i?e=await t(e,l,{signal:o}):(e=l,i=!0)}if(!a&&!i)throw new Zo}finally{s.abort()}return e}async function xE(t){t!=null&&dr(t,"options"),t?.signal!=null&&ur(t.signal,"options.signal");let e=[];for await(let n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new pt(void 0,{cause:t.signal.reason});dE(e,n)}return e}function vE(t,e){let r=Vi.call(this,t,e);return async function*(){for await(let i of r)yield*i}.call(this)}function Xu(t){if(t=yE(t),pE(t))return 0;if(t<0)throw new nE("number",">= 0",t);return t}function IE(t,e=void 0){return e!=null&&dr(e,"options"),e?.signal!=null&&ur(e.signal,"options.signal"),t=Xu(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new pt;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new pt;t--<=0&&(yield s)}}.call(this)}function AE(t,e=void 0){return e!=null&&dr(e,"options"),e?.signal!=null&&ur(e.signal,"options.signal"),t=Xu(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new pt;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new pt;if(t-- >0&&(yield s),t<=0)return}}.call(this)}ta.exports.streamReturningOperators={asIndexedPairs:uE(SE,"readable.asIndexedPairs will be removed in a future version."),drop:IE,filter:ea,flatMap:vE,map:Vi,take:AE,compose:mE};ta.exports.promiseReturningOperators={every:EE,forEach:gE,reduce:bE,toArray:xE,some:Yu,find:_E}});var ra=O((T0,Qu)=>{"use strict";var{ArrayPrototypePop:RE,Promise:NE}=$(),{isIterable:kE,isNodeStream:TE,isWebStream:OE}=ut(),{pipelineImpl:FE}=ji(),{finished:DE}=Ft();na();function LE(...t){return new NE((e,r)=>{let n,i,s=t[t.length-1];if(s&&typeof s=="object"&&!TE(s)&&!kE(s)&&!OE(s)){let o=RE(t);n=o.signal,i=o.end}FE(t,(o,a)=>{o?r(o):e(a)},{signal:n,end:i})})}Qu.exports={finished:DE,pipeline:LE}});var na=O((O0,ad)=>{var{Buffer:ME}=Ce(),{ObjectDefineProperty:Mt,ObjectKeys:td,ReflectApply:rd}=$(),{promisify:{custom:nd}}=me(),{streamReturningOperators:Zu,promiseReturningOperators:ed}=Ju(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:id}}=ve(),CE=Qo(),{setDefaultHighWaterMark:WE,getDefaultHighWaterMark:BE}=hn(),{pipeline:sd}=ji(),{destroyer:PE}=sr(),od=Ft(),ia=ra(),xn=ut(),P=ad.exports=vi().Stream;P.isDestroyed=xn.isDestroyed;P.isDisturbed=xn.isDisturbed;P.isErrored=xn.isErrored;P.isReadable=xn.isReadable;P.isWritable=xn.isWritable;P.Readable=wn();for(let t of td(Zu)){let r=function(...n){if(new.target)throw id();return P.Readable.from(rd(e,this,n))};sa=r;let e=Zu[t];Mt(r,"name",{__proto__:null,value:e.name}),Mt(r,"length",{__proto__:null,value:e.length}),Mt(P.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var sa;for(let t of td(ed)){let r=function(...i){if(new.target)throw id();return rd(e,this,i)};sa=r;let e=ed[t];Mt(r,"name",{__proto__:null,value:e.name}),Mt(r,"length",{__proto__:null,value:e.length}),Mt(P.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var sa;P.Writable=Wi();P.Duplex=yt();P.Transform=Po();P.PassThrough=jo();P.pipeline=sd;var{addAbortSignal:UE}=dn();P.addAbortSignal=UE;P.finished=od;P.destroy=PE;P.compose=CE;P.setDefaultHighWaterMark=WE;P.getDefaultHighWaterMark=BE;Mt(P,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return ia}});Mt(sd,nd,{__proto__:null,enumerable:!0,get(){return ia.pipeline}});Mt(od,nd,{__proto__:null,enumerable:!0,get(){return ia.finished}});P.Stream=P;P._isUint8Array=function(e){return e instanceof Uint8Array};P._uint8ArrayToBuffer=function(e){return ME.from(e.buffer,e.byteOffset,e.byteLength)}});var cd=O((F0,J)=>{"use strict";var re=na(),jE=ra(),qE=re.Readable.destroy;J.exports=re.Readable;J.exports._uint8ArrayToBuffer=re._uint8ArrayToBuffer;J.exports._isUint8Array=re._isUint8Array;J.exports.isDisturbed=re.isDisturbed;J.exports.isErrored=re.isErrored;J.exports.isReadable=re.isReadable;J.exports.Readable=re.Readable;J.exports.Writable=re.Writable;J.exports.Duplex=re.Duplex;J.exports.Transform=re.Transform;J.exports.PassThrough=re.PassThrough;J.exports.addAbortSignal=re.addAbortSignal;J.exports.finished=re.finished;J.exports.destroy=re.destroy;J.exports.destroy=qE;J.exports.pipeline=re.pipeline;J.exports.compose=re.compose;Object.defineProperty(re,"promises",{configurable:!0,enumerable:!0,get(){return jE}});J.exports.Stream=re.Stream;J.exports.default=J.exports});var K_={};Fn(K_,{IndexedDB:()=>bd,configureSingle:()=>fd,fs:()=>vt});var h;(function(t){t[t.EPERM=1]="EPERM",t[t.ENOENT=2]="ENOENT",t[t.EINTR=4]="EINTR",t[t.EIO=5]="EIO",t[t.ENXIO=6]="ENXIO",t[t.EBADF=9]="EBADF",t[t.EAGAIN=11]="EAGAIN",t[t.ENOMEM=12]="ENOMEM",t[t.EACCES=13]="EACCES",t[t.EFAULT=14]="EFAULT",t[t.ENOTBLK=15]="ENOTBLK",t[t.EBUSY=16]="EBUSY",t[t.EEXIST=17]="EEXIST",t[t.EXDEV=18]="EXDEV",t[t.ENODEV=19]="ENODEV",t[t.ENOTDIR=20]="ENOTDIR",t[t.EISDIR=21]="EISDIR",t[t.EINVAL=22]="EINVAL",t[t.ENFILE=23]="ENFILE",t[t.EMFILE=24]="EMFILE",t[t.ETXTBSY=26]="ETXTBSY",t[t.EFBIG=27]="EFBIG",t[t.ENOSPC=28]="ENOSPC",t[t.ESPIPE=29]="ESPIPE",t[t.EROFS=30]="EROFS",t[t.EMLINK=31]="EMLINK",t[t.EPIPE=32]="EPIPE",t[t.EDOM=33]="EDOM",t[t.ERANGE=34]="ERANGE",t[t.EDEADLK=35]="EDEADLK",t[t.ENAMETOOLONG=36]="ENAMETOOLONG",t[t.ENOLCK=37]="ENOLCK",t[t.ENOSYS=38]="ENOSYS",t[t.ENOTEMPTY=39]="ENOTEMPTY",t[t.ELOOP=40]="ELOOP",t[t.ENOMSG=42]="ENOMSG",t[t.EBADE=52]="EBADE",t[t.EBADR=53]="EBADR",t[t.EXFULL=54]="EXFULL",t[t.ENOANO=55]="ENOANO",t[t.EBADRQC=56]="EBADRQC",t[t.ENOSTR=60]="ENOSTR",t[t.ENODATA=61]="ENODATA",t[t.ETIME=62]="ETIME",t[t.ENOSR=63]="ENOSR",t[t.ENONET=64]="ENONET",t[t.EREMOTE=66]="EREMOTE",t[t.ENOLINK=67]="ENOLINK",t[t.ECOMM=70]="ECOMM",t[t.EPROTO=71]="EPROTO",t[t.EBADMSG=74]="EBADMSG",t[t.EOVERFLOW=75]="EOVERFLOW",t[t.EBADFD=77]="EBADFD",t[t.ESTRPIPE=86]="ESTRPIPE",t[t.ENOTSOCK=88]="ENOTSOCK",t[t.EDESTADDRREQ=89]="EDESTADDRREQ",t[t.EMSGSIZE=90]="EMSGSIZE",t[t.EPROTOTYPE=91]="EPROTOTYPE",t[t.ENOPROTOOPT=92]="ENOPROTOOPT",t[t.EPROTONOSUPPORT=93]="EPROTONOSUPPORT",t[t.ESOCKTNOSUPPORT=94]="ESOCKTNOSUPPORT",t[t.ENOTSUP=95]="ENOTSUP",t[t.ENETDOWN=100]="ENETDOWN",t[t.ENETUNREACH=101]="ENETUNREACH",t[t.ENETRESET=102]="ENETRESET",t[t.ETIMEDOUT=110]="ETIMEDOUT",t[t.ECONNREFUSED=111]="ECONNREFUSED",t[t.EHOSTDOWN=112]="EHOSTDOWN",t[t.EHOSTUNREACH=113]="EHOSTUNREACH",t[t.EALREADY=114]="EALREADY",t[t.EINPROGRESS=115]="EINPROGRESS",t[t.ESTALE=116]="ESTALE",t[t.EREMOTEIO=121]="EREMOTEIO",t[t.EDQUOT=122]="EDQUOT"})(h||(h={}));var ec={[h.EPERM]:"Operation not permitted",[h.ENOENT]:"No such file or directory",[h.EINTR]:"Interrupted system call",[h.EIO]:"Input/output error",[h.ENXIO]:"No such device or address",[h.EBADF]:"Bad file descriptor",[h.EAGAIN]:"Resource temporarily unavailable",[h.ENOMEM]:"Cannot allocate memory",[h.EACCES]:"Permission denied",[h.EFAULT]:"Bad address",[h.ENOTBLK]:"Block device required",[h.EBUSY]:"Resource busy or locked",[h.EEXIST]:"File exists",[h.EXDEV]:"Invalid cross-device link",[h.ENODEV]:"No such device",[h.ENOTDIR]:"File is not a directory",[h.EISDIR]:"File is a directory",[h.EINVAL]:"Invalid argument",[h.ENFILE]:"Too many open files in system",[h.EMFILE]:"Too many open files",[h.ETXTBSY]:"Text file busy",[h.EFBIG]:"File is too big",[h.ENOSPC]:"No space left on disk",[h.ESPIPE]:"Illegal seek",[h.EROFS]:"Cannot modify a read-only file system",[h.EMLINK]:"Too many links",[h.EPIPE]:"Broken pipe",[h.EDOM]:"Numerical argument out of domain",[h.ERANGE]:"Numerical result out of range",[h.EDEADLK]:"Resource deadlock would occur",[h.ENAMETOOLONG]:"File name too long",[h.ENOLCK]:"No locks available",[h.ENOSYS]:"Function not implemented",[h.ENOTEMPTY]:"Directory is not empty",[h.ELOOP]:"Too many levels of symbolic links",[h.ENOMSG]:"No message of desired type",[h.EBADE]:"Invalid exchange",[h.EBADR]:"Invalid request descriptor",[h.EXFULL]:"Exchange full",[h.ENOANO]:"No anode",[h.EBADRQC]:"Invalid request code",[h.ENOSTR]:"Device not a stream",[h.ENODATA]:"No data available",[h.ETIME]:"Timer expired",[h.ENOSR]:"Out of streams resources",[h.ENONET]:"Machine is not on the network",[h.EREMOTE]:"Object is remote",[h.ENOLINK]:"Link has been severed",[h.ECOMM]:"Communication error on send",[h.EPROTO]:"Protocol error",[h.EBADMSG]:"Bad message",[h.EOVERFLOW]:"Value too large for defined data type",[h.EBADFD]:"File descriptor in bad state",[h.ESTRPIPE]:"Streams pipe error",[h.ENOTSOCK]:"Socket operation on non-socket",[h.EDESTADDRREQ]:"Destination address required",[h.EMSGSIZE]:"Message too long",[h.EPROTOTYPE]:"Protocol wrong type for socket",[h.ENOPROTOOPT]:"Protocol not available",[h.EPROTONOSUPPORT]:"Protocol not supported",[h.ESOCKTNOSUPPORT]:"Socket type not supported",[h.ENOTSUP]:"Operation is not supported",[h.ENETDOWN]:"Network is down",[h.ENETUNREACH]:"Network is unreachable",[h.ENETRESET]:"Network dropped connection on reset",[h.ETIMEDOUT]:"Connection timed out",[h.ECONNREFUSED]:"Connection refused",[h.EHOSTDOWN]:"Host is down",[h.EHOSTUNREACH]:"No route to host",[h.EALREADY]:"Operation already in progress",[h.EINPROGRESS]:"Operation now in progress",[h.ESTALE]:"Stale file handle",[h.EREMOTEIO]:"Remote I/O error",[h.EDQUOT]:"Disk quota exceeded"},f=class t extends Error{static fromJSON(e){let r=new t(e.errno,e.message,e.path,e.syscall);return r.code=e.code,r.stack=e.stack,r}static With(e,r,n){return new t(h[e],ec[h[e]],r,n)}constructor(e,r=ec[e],n,i=""){super(r),this.errno=e,this.path=n,this.syscall=i,this.code=h[e],this.message=this.code+": "+r+(this.path?`, '${this.path}'`:"")}toString(){return this.message}toJSON(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message,syscall:this.syscall}}bufferSize(){return 4+JSON.stringify(this.toJSON()).length}};function Dn(t){return t!=null&&typeof t=="object"&&"create"in t&&typeof t.create=="function"}async function tc(t,e){if(typeof e!="object"||e===null)throw new f(h.EINVAL,"Invalid options");for(let[r,n]of Object.entries(t.options)){let i=e?.[r];if(i==null){if(!n.required)continue;throw new f(h.EINVAL,"Missing required option: "+r)}let s=o=>typeof n.type=="function"?o instanceof n.type:typeof o===n.type;if(Array.isArray(n.type)?!n.type.some(s):!s(i)){let o=typeof i=="object"&&"constructor"in i?i.constructor.name:typeof i,a=l=>typeof l=="function"?l.name:l,c=Array.isArray(n.type)?`one of ${n.type.map(a).join(", ")}`:a(n.type);throw new f(h.EINVAL,`Incorrect type for "${r}": ${o} (expected ${c})`)}n.validator&&await n.validator(i)}}function ns(t){return t!=null&&typeof t=="object"&&"backend"in t&&Dn(t.backend)}var Et={uid:0,gid:0,suid:0,sgid:0,euid:0,egid:0,groups:[]};function rc(t){return{suid:t.uid,sgid:t.gid,euid:t.uid,egid:t.gid,groups:[],...t}}var Ht={};Fn(Ht,{COPYFILE_EXCL:()=>tn,COPYFILE_FICLONE:()=>Dd,COPYFILE_FICLONE_FORCE:()=>Ld,F_OK:()=>Zr,O_APPEND:()=>br,O_CREAT:()=>Ze,O_DIRECT:()=>jd,O_DIRECTORY:()=>Cd,O_DSYNC:()=>Pd,O_EXCL:()=>_r,O_NOATIME:()=>Wd,O_NOCTTY:()=>Md,O_NOFOLLOW:()=>Bd,O_NONBLOCK:()=>qd,O_RDONLY:()=>Ln,O_RDWR:()=>Ct,O_SYMLINK:()=>Ud,O_SYNC:()=>Mn,O_TRUNC:()=>gr,O_WRONLY:()=>Er,R_OK:()=>ne,S_IFBLK:()=>et,S_IFCHR:()=>tt,S_IFDIR:()=>ie,S_IFIFO:()=>gt,S_IFLNK:()=>qe,S_IFMT:()=>W,S_IFREG:()=>Z,S_IFSOCK:()=>_t,S_IRGRP:()=>as,S_IROTH:()=>fs,S_IRUSR:()=>is,S_IRWXG:()=>Vd,S_IRWXO:()=>Hd,S_IRWXU:()=>$d,S_ISGID:()=>Wn,S_ISUID:()=>Cn,S_ISVTX:()=>zd,S_IWGRP:()=>cs,S_IWOTH:()=>us,S_IWUSR:()=>ss,S_IXGRP:()=>ls,S_IXOTH:()=>ds,S_IXUSR:()=>os,UV_FS_O_FILEMAP:()=>Kd,W_OK:()=>Y,X_OK:()=>en,size_max:()=>ke});var Zr=0,ne=4,Y=2,en=1,tn=1,Dd=2,Ld=4,Ln=0,Er=1,Ct=2,Ze=64,_r=128,Md=256,gr=512,br=1024,Cd=65536,Wd=262144,Bd=131072,Mn=1052672,Pd=4096,Ud=32768,jd=16384,qd=2048,W=61440,_t=49152,qe=40960,Z=32768,et=24576,ie=16384,tt=8192,gt=4096,Cn=2048,Wn=1024,zd=512,$d=448,is=256,ss=128,os=64,Vd=56,as=32,cs=16,ls=8,Hd=7,fs=4,us=2,ds=1,Kd=0,ke=4294967295;var Gd="/";function nc(t,e){let r="",n=0,i=-1,s=0,o="\0";for(let a=0;a<=t.length;++a){if(a<t.length)o=t[a];else{if(o=="/")break;o="/"}if(o=="/"){if(!(i===a-1||s===1))if(s===2){if(r.length<2||n!==2||r.at(-1)!=="."||r.at(-2)!=="."){if(r.length>2){let c=r.lastIndexOf("/");c===-1?(r="",n=0):(r=r.slice(0,c),n=r.length-1-r.lastIndexOf("/")),i=a,s=0;continue}else if(r.length!==0){r="",n=0,i=a,s=0;continue}}e&&(r+=r.length>0?"/..":"..",n=2)}else r.length>0?r+="/"+t.slice(i+1,a):r=t.slice(i+1,a),n=a-i-1;i=a,s=0}else o==="."&&s!==-1?++s:s=-1}return r}function Te(...t){let e="";for(let n of[...t.reverse(),Gd])if(n.length&&(e=`${n}/${e}`,n.startsWith("/")))break;let r=e.startsWith("/");return e=nc(e,!r),r?`/${e}`:e.length?e:"/"}function Yd(t){if(!t.length)return".";let e=t.startsWith("/"),r=t.endsWith("/");return t=nc(t,!e),t.length?(r&&(t+="/"),e?`/${t}`:t):e?"/":r?"./":"."}function N(...t){if(!t.length)return".";let e=t.join("/");return e?.length?Yd(e):"."}function E(t){if(t.length===0)return".";let e=t[0]==="/",r=-1,n=!0;for(let i=t.length-1;i>=1;--i)if(t[i]==="/"){if(!n){r=i;break}}else n=!1;return r===-1?e?"/":".":e&&r===1?"//":t.slice(0,r)}function se(t,e){let r=0,n=-1,i=!0;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let s=e.length-1,o=-1;for(let a=t.length-1;a>=0;--a)if(t[a]==="/"){if(!i){r=a+1;break}}else o===-1&&(i=!1,o=a+1),s>=0&&(t[a]===e[s]?--s===-1&&(n=a):(s=-1,n=o));return r===n?n=o:n===-1&&(n=t.length),t.slice(r,n)}for(let s=t.length-1;s>=0;--s)if(t[s]==="/"){if(!i){r=s+1;break}}else n===-1&&(i=!1,n=s+1);return n===-1?"":t.slice(r,n)}function _e(t){let e=t.startsWith("/"),r={root:e?"/":"",dir:"",base:"",ext:"",name:""};if(t.length===0)return r;let n=e?1:0,i=-1,s=0,o=-1,a=!0,c=t.length-1,l=0;for(;c>=n;--c){if(t[c]==="/"){if(!a){s=c+1;break}continue}o===-1&&(a=!1,o=c+1),t[c]==="."?i===-1?i=c:l!==1&&(l=1):i!==-1&&(l=-1)}if(o!==-1){let u=s===0&&e?1:s;i===-1||l===0||l===1&&i===o-1&&i===s+1?r.base=r.name=t.slice(u,o):(r.name=t.slice(u,i),r.base=t.slice(u,o),r.ext=t.slice(i,o))}return s>0?r.dir=t.slice(0,s-1):e&&(r.dir="/"),r}var v={checkAccess:!0,updateOnRead:!0,syncImmediately:!0,unsafeBufferReplace:!1};var hs,ys,ps;(hs=Promise.withResolvers)!==null&&hs!==void 0||(Promise.withResolvers=function(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}});(ys=Symbol.dispose)!==null&&ys!==void 0||(Symbol.dispose=Symbol("Symbol.dispose"));(ps=Symbol.asyncDispose)!==null&&ps!==void 0||(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));var Bn=BigInt(1e3),Pn=class{_convert(e){return this._isBigint?BigInt(e):Number(e)}get blocks(){return this._convert(Math.ceil(Number(this.size)/512))}get atime(){return new Date(Number(this.atimeMs))}set atime(e){this.atimeMs=this._convert(e.getTime())}get mtime(){return new Date(Number(this.mtimeMs))}set mtime(e){this.mtimeMs=this._convert(e.getTime())}get ctime(){return new Date(Number(this.ctimeMs))}set ctime(e){this.ctimeMs=this._convert(e.getTime())}get birthtime(){return new Date(Number(this.birthtimeMs))}set birthtime(e){this.birthtimeMs=this._convert(e.getTime())}constructor({atimeMs:e,mtimeMs:r,ctimeMs:n,birthtimeMs:i,uid:s,gid:o,size:a,mode:c,ino:l}={}){this.dev=this._convert(0),this.ino=this._convert(0),this.rdev=this._convert(0),this.nlink=this._convert(1),this.blksize=this._convert(4096),this.uid=this._convert(0),this.gid=this._convert(0);let u=Date.now();this.atimeMs=this._convert(e??u),this.mtimeMs=this._convert(r??u),this.ctimeMs=this._convert(n??u),this.birthtimeMs=this._convert(i??u),this.uid=this._convert(s??0),this.gid=this._convert(o??0),this.size=this._convert(a??0),this.ino=this._convert(l??0),this.mode=this._convert(c??0),this.mode&61440||(this.mode=this.mode|this._convert(32768))}isFile(){return(this.mode&61440)===32768}isDirectory(){return(this.mode&61440)===16384}isSymbolicLink(){return(this.mode&61440)===40960}isSocket(){return(this.mode&61440)===49152}isBlockDevice(){return(this.mode&61440)===24576}isCharacterDevice(){return(this.mode&61440)===8192}isFIFO(){return(this.mode&61440)===4096}hasAccess(e,r){let n=r?.credentials||Et;if(this.isSymbolicLink()||n.euid===0||n.egid===0)return!0;let i=0;return n.uid===this.uid&&(this.mode&256&&(i|=4),this.mode&128&&(i|=2),this.mode&64&&(i|=1)),(n.gid===this.gid||n.groups.includes(Number(this.gid)))&&(this.mode&32&&(i|=4),this.mode&16&&(i|=2),this.mode&8&&(i|=1)),this.mode&4&&(i|=4),this.mode&2&&(i|=2),this.mode&1&&(i|=1),(i&e)===e}chmod(e){this.mode=this._convert(this.mode&61440|e)}chown(e,r){e=Number(e),r=Number(r),!isNaN(e)&&0<=e&&e<2**32&&(this.uid=this._convert(e)),!isNaN(r)&&0<=r&&r<2**32&&(this.gid=this._convert(r))}get atimeNs(){return BigInt(this.atimeMs)*Bn}get mtimeNs(){return BigInt(this.mtimeMs)*Bn}get ctimeNs(){return BigInt(this.ctimeMs)*Bn}get birthtimeNs(){return BigInt(this.birthtimeMs)*Bn}};function ws(t,e,r){!isNaN(e)&&0<=e&&e<2**32&&(t.uid=e),!isNaN(r)&&0<=r&&r<2**32&&(t.gid=r)}var q=class extends Pn{constructor(){super(...arguments),this._isBigint=!1}},Oe=class extends Pn{constructor(){super(...arguments),this._isBigint=!0}};function ic(t,e){return t.size==e.size&&+t.atime==+e.atime&&+t.mtime==+e.mtime&&+t.ctime==+e.ctime&&t.mode==e.mode}var sc=525687744115,Un=class{constructor(){this.type=525687744115,this.bsize=4096,this.blocks=0,this.bfree=0,this.bavail=0,this.files=4294967295,this.ffree=4294967295}},jn=class{constructor(){this.type=BigInt("0x7a656e6673"),this.bsize=BigInt(4096),this.blocks=BigInt(0),this.bfree=BigInt(0),this.bavail=BigInt(0),this.files=BigInt(4294967295),this.ffree=BigInt(4294967295)}};var Xd=["r","r+","rs","rs+","w","wx","w+","wx+","a","ax","a+","ax+"];function ee(t){if(typeof t=="number")return Jd(t);if(!Xd.includes(t))throw new Error("Invalid flag string: "+t);return t}function Jd(t){switch(t){case 0:return"r";case 1052672:return"rs";case 2:return"r+";case 1052674:return"rs+";case 577:return"w";case 705:return"wx";case 578:return"w+";case 706:return"wx+";case 1089:return"a";case 1217:return"ax";case 1090:return"a+";case 1218:return"ax+";default:throw new Error("Invalid flag number: "+t)}}function qn(t){let e=0;return e<<=1,e+=+Kt(t),e<<=1,e+=+Fe(t),e<<=1,e}function Kt(t){return t.indexOf("r")!==-1||t.indexOf("+")!==-1}function Fe(t){return t.indexOf("w")!==-1||t.indexOf("a")!==-1||t.indexOf("+")!==-1}function zn(t){return t.indexOf("w")!==-1}function Wt(t){return t.indexOf("a")!==-1}function $n(t){return t.indexOf("x")!==-1}var xr=class{constructor(e,r){this.fs=e,this.path=r}async[Symbol.asyncDispose](){await this.close()}[Symbol.dispose](){this.closeSync()}datasync(){return this.sync()}datasyncSync(){return this.syncSync()}},oe=class extends xr{constructor(e,r,n,i,s=new Uint8Array(new ArrayBuffer(0,e.metadata().noResizableBuffers?{}:{maxByteLength:4294967295}))){if(super(e,r),this.flag=n,this.stats=i,this._buffer=s,this._position=0,this.dirty=!1,this.closed=!1,this.stats.size!=s.byteLength){if(Kt(this.flag))throw new Error(`Size mismatch: buffer length ${s.byteLength}, stats size ${this.stats.size}`);this.dirty=!0}}get buffer(){return this._buffer}get position(){return Wt(this.flag)?this.stats.size:this._position}set position(e){this._position=e}async sync(){if(this.closed)throw f.With("EBADF",this.path,"File.sync");this.dirty&&(await this.fs.sync(this.path,this._buffer,this.stats),this.dirty=!1)}syncSync(){if(this.closed)throw f.With("EBADF",this.path,"File.sync");this.dirty&&(this.fs.syncSync(this.path,this._buffer,this.stats),this.dirty=!1)}async close(){if(this.closed)throw f.With("EBADF",this.path,"File.close");await this.sync(),this.dispose()}closeSync(){if(this.closed)throw f.With("EBADF",this.path,"File.close");this.syncSync(),this.dispose()}dispose(e){if(this.closed)throw f.With("EBADF",this.path,"File.dispose");if(this.dirty&&!e)throw f.With("EBUSY",this.path,"File.dispose");delete this._buffer,delete this.stats,this.closed=!0}stat(){if(this.closed)throw f.With("EBADF",this.path,"File.stat");return Promise.resolve(new q(this.stats))}statSync(){if(this.closed)throw f.With("EBADF",this.path,"File.stat");return new q(this.stats)}_truncate(e){if(this.closed)throw f.With("EBADF",this.path,"File.truncate");if(this.dirty=!0,!Fe(this.flag))throw new f(h.EPERM,"File not opened with a writeable mode.");if(this.stats.mtimeMs=Date.now(),e>this._buffer.length){let r=new Uint8Array(e-this._buffer.length);this._write(r,0,r.length,this._buffer.length);return}this.stats.size=e,this._buffer=e?this._buffer.slice(0,e):new Uint8Array}async truncate(e){this._truncate(e),v.syncImmediately&&await this.sync()}truncateSync(e){this._truncate(e),v.syncImmediately&&this.syncSync()}_write(e,r=0,n=this.stats.size,i=this.position){if(this.closed)throw f.With("EBADF",this.path,"File.write");if(!Fe(this.flag))throw new f(h.EPERM,"File not opened with a writeable mode.");this.dirty=!0;let s=i+n,o=e.slice(r,r+n);if(s>this.stats.size&&(this.stats.size=s,s>this._buffer.byteLength)){let{buffer:a}=this._buffer;if("resizable"in a&&a.resizable&&a.maxByteLength<=s)a.resize(s);else if("growable"in a&&a.growable&&a.maxByteLength<=s)a.grow(s);else if(v.unsafeBufferReplace)this._buffer=o;else{let c=new Uint8Array(new ArrayBuffer(s,this.fs.metadata().noResizableBuffers?{}:{maxByteLength:4294967295}));c.set(this._buffer),this._buffer=c}}return this._buffer.set(o,i),this.stats.mtimeMs=Date.now(),this.position=i+o.byteLength,o.byteLength}async write(e,r,n,i){let s=this._write(e,r,n,i);return v.syncImmediately&&await this.sync(),s}writeSync(e,r=0,n=this.stats.size,i=this.position){let s=this._write(e,r,n,i);return v.syncImmediately&&this.syncSync(),s}_read(e,r=0,n=this.stats.size,i){if(this.closed)throw f.With("EBADF",this.path,"File.read");if(!Kt(this.flag))throw new f(h.EPERM,"File not opened with a readable mode.");v.updateOnRead&&(this.dirty=!0),this.stats.atimeMs=Date.now(),i??(i=this.position);let s=i+n;s>this.stats.size&&(s=i+Math.max(this.stats.size-i,0)),this._position=s;let o=s-i;return o==0||new Uint8Array(e.buffer,r,n).set(this._buffer.slice(i,s)),o}async read(e,r,n,i){let s=this._read(e,r,n,i);return v.syncImmediately&&await this.sync(),{bytesRead:s,buffer:e}}readSync(e,r,n,i){let s=this._read(e,r,n,i);return v.syncImmediately&&this.syncSync(),s}async chmod(e){if(this.closed)throw f.With("EBADF",this.path,"File.chmod");this.dirty=!0,this.stats.mode=this.stats.mode&(e>61440?-61441:61440)|e,(v.syncImmediately||e>61440)&&await this.sync()}chmodSync(e){if(this.closed)throw f.With("EBADF",this.path,"File.chmod");this.dirty=!0,this.stats.mode=this.stats.mode&(e>61440?-61441:61440)|e,(v.syncImmediately||e>61440)&&this.syncSync()}async chown(e,r){if(this.closed)throw f.With("EBADF",this.path,"File.chown");this.dirty=!0,ws(this.stats,e,r),v.syncImmediately&&await this.sync()}chownSync(e,r){if(this.closed)throw f.With("EBADF",this.path,"File.chown");this.dirty=!0,ws(this.stats,e,r),v.syncImmediately&&this.syncSync()}async utimes(e,r){if(this.closed)throw f.With("EBADF",this.path,"File.utimes");this.dirty=!0,this.stats.atime=e,this.stats.mtime=r,v.syncImmediately&&await this.sync()}utimesSync(e,r){if(this.closed)throw f.With("EBADF",this.path,"File.utimes");this.dirty=!0,this.stats.atime=e,this.stats.mtime=r,v.syncImmediately&&this.syncSync()}},rn=class extends oe{sync(){return Promise.resolve()}syncSync(){}close(){return Promise.resolve()}closeSync(){}};var de=class{metadata(){var e;return{name:this.constructor.name.toLowerCase(),readonly:!1,totalSpace:0,freeSpace:0,noResizableBuffers:!1,noAsyncCache:(e=this._disableSync)!==null&&e!==void 0?e:!1,type:sc}}constructor(...e){}async ready(){}async exists(e){try{return await this.stat(e),!0}catch(r){return r.code!="ENOENT"}}existsSync(e){try{return this.statSync(e),!0}catch(r){return r.code!="ENOENT"}}};var cc=Sr(ac(),1);var lc=Intl.NumberFormat("en",{notation:"compact"}),mg=lc.format.bind(lc);function fc(t){try{return JSON.parse(t),!0}catch{return!1}}function uc(t=1){let e="";for(let r=0;r<t;r++)e+=Math.floor(Math.random()*16).toString(16);return e}function vr(t){return t.at(0).toUpperCase()+t.slice(1)}var dc=["int8","uint8","int16","uint16","int32","uint32","int64","uint64","float32","float64"],hc=[...dc,...dc.map(t=>vr(t)),"char"],Hn=/^(u?int|float)(8|16|32|64)$/i;function Ss(t){return t=="char"?"uint8":t.toLowerCase()}function Es(t){return Hn.test(t.toString())}function Kn(t){return t=="char"||Hn.test(t.toString().toLowerCase())}function yc(t){if(!Kn(t))throw new TypeError("Not a valid primitive type: "+t)}Symbol.struct_init||=Symbol("struct_init");Symbol.struct_metadata||=Symbol("struct_metadata");var xg=Symbol.struct_init,vg=Symbol.struct_metadata;function th(t){return t!=null&&typeof t=="object"&&Symbol.struct_metadata in t}Symbol.metadata??=Symbol.for("Symbol.metadata");function rh(t){Symbol?.metadata&&(Symbol.metadata in t||Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Object.create(null)}))}function Ir(t){let e=Symbol.metadata||Object.getOwnPropertySymbols(t).find(r=>r.description=="Symbol.metadata");if(rh(t),!e)throw new ReferenceError("Could not get a reference to Symbol.metadata");return e}function sn(t){return typeof t=="function"&&Ir(t)in t&&th(t[Ir(t)])}function pc(t){return t!=null&&typeof t=="object"&&sn(t.constructor)}function _s(t){if(!pc(t))throw new TypeError((typeof t=="function"?t.name:typeof t=="object"&&t?t.constructor.name:t)+" is not a struct instance")}function nh(t){return pc(t)||sn(t)}function wc(t){if(!nh(t))throw new TypeError((typeof t=="function"?t.name:typeof t=="object"&&t?t.constructor.name:t)+" is not a struct")}function bt(t){if(typeof t=="string")return yc(t),+Ss(t).match(Hn)[2]/8;wc(t);let e=sn(t)?t:t.constructor;return e[Ir(e)][Symbol.struct_metadata].size}function sh(t,e){return Math.ceil(t/e)*e}function Sc(t={}){return function(r,n){n.metadata??={},n.metadata[Symbol.struct_init]||=[];let i=0,s=new Map;for(let o of n.metadata[Symbol.struct_init]){let{name:a,type:c,length:l}=o;if(!Kn(c)&&!sn(c))throw new TypeError("Not a valid type: "+c);s.set(a,{offset:i,type:Kn(c)?Ss(c):c,length:l}),i+=bt(c)*(l||1),i=sh(i,t.align||1)}return n.metadata[Symbol.struct_metadata]={options:t,members:s,size:i},r}}function mc(t,e){return function(r,n){let i=n.name;if(typeof i=="symbol"&&(console.warn("Symbol used for struct member name will be coerced to string: "+i.toString()),i=i.toString()),!i)throw new ReferenceError("Invalid name for struct member");return n.metadata??={},n.metadata[Symbol.struct_init]||=[],n.metadata[Symbol.struct_init].push({name:i,type:t,length:e}),r}}function rt(t){_s(t);let{options:e,members:r}=t.constructor[Ir(t.constructor)][Symbol.struct_metadata],n=new Uint8Array(bt(t)),i=new DataView(n.buffer);for(let[s,{type:o,length:a,offset:c}]of r)for(let l=0;l<(a||1);l++){let u=c+bt(o)*l,d=a>0?t[s][l]:t[s];if(typeof d=="string"&&(d=d.charCodeAt(0)),!Es(o)){n.set(d?rt(d):new Uint8Array(bt(o)),u);continue}let w="set"+vr(o);if(w=="setInt64"){i.setBigInt64(u,BigInt(d),!e.bigEndian);continue}if(w=="setUint64"){i.setBigUint64(u,BigInt(d),!e.bigEndian);continue}i[w](u,Number(d),!e.bigEndian)}return n}function gs(t,e){_s(t);let{options:r,members:n}=t.constructor[Ir(t.constructor)][Symbol.struct_metadata],i=e instanceof Uint8Array?e:new Uint8Array("buffer"in e?e.buffer:e),s=new DataView(i.buffer,i.byteOffset,i.byteLength);for(let[o,{type:a,offset:c,length:l}]of n)for(let u=0;u<(l||1);u++){let d=l>0?t[o]:t,p=l>0?u:o,w=c+bt(a)*u;if(typeof t[o]=="string"){t[o]=t[o].slice(0,u)+String.fromCharCode(s.getUint8(w))+t[o].slice(u+1);continue}if(!Es(a)){if(d[p]===null||d[p]===void 0)continue;gs(d[p],new Uint8Array(i.slice(w,w+bt(a))));continue}l>0&&(d||=[]);let m="get"+vr(a);if(m=="getInt64"){d[p]=s.getBigInt64(w,!r.bigEndian);continue}if(m=="getUint64"){d[p]=s.getBigUint64(w,!r.bigEndian);continue}d[p]=s[m](w,!r.bigEndian)}}function oh(t){function e(r,n){return typeof r=="number"?mc(t,r):mc(t)(r,n)}return e}var De=Object.fromEntries(hc.map(t=>[t,oh(t)]));function bs(t){if(typeof t!="string")throw new f(h.EINVAL,"Can not encode a non-string");return new Uint8Array(Array.from(t).map(e=>e.charCodeAt(0)))}function xs(t){if(!(t instanceof Uint8Array))throw new f(h.EINVAL,"Can not decode a non-Uint8Array");return Array.from(t).map(e=>String.fromCharCode(e)).join("")}var ch=new TextEncoder;function nt(t){if(typeof t!="string")throw new f(h.EINVAL,"Can not encode a non-string");return ch.encode(t)}var lh=new TextDecoder;function it(t){if(!(t instanceof Uint8Array))throw new f(h.EINVAL,"Can not decode a non-Uint8Array");return lh.decode(t)}function be(t){return JSON.parse(it(t),(e,r)=>e==""?r:BigInt(r))}function ze(t){return nt(JSON.stringify(t,(e,r)=>e==""?r:r.toString()))}function $e(t,e){if(typeof t=="number")return t;if(typeof t=="string"){let r=parseInt(t,8);if(!isNaN(r))return r}if(typeof e=="number")return e;throw new f(h.EINVAL,"Invalid mode: "+t?.toString())}function Ar(t){if(t instanceof Date)return t;try{return new Date(t)}catch{throw new f(h.EINVAL,"Invalid time.")}}function b(t){if(t=t.toString(),t.includes("\0"))throw new f(h.EINVAL,"Path can not contain null character");if(t.length==0)throw new f(h.EINVAL,"Path can not be empty");return Te(t.replaceAll(/[/\\]+/g,"/"))}function Ve(t,e="utf8",r,n=0){return typeof t!="object"||t===null?{encoding:typeof t=="string"?t:e??null,flag:r,mode:n}:{encoding:typeof t?.encoding=="string"?t.encoding:e??null,flag:typeof t?.flag=="string"?t.flag:r,mode:$e("mode"in t?t?.mode:null,n)}}function Gt(){try{return crypto.getRandomValues(new BigUint64Array(1))[0]}catch{return BigInt("0x"+uc(16))}}var Le=function(t,e,r,n,i,s){function o(g){if(g!==void 0&&typeof g!="function")throw new TypeError("Function expected");return g}for(var a=n.kind,c=a==="getter"?"get":a==="setter"?"set":"value",l=!e&&t?n.static?t:t.prototype:null,u=e||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),d,p=!1,w=r.length-1;w>=0;w--){var _={};for(var m in n)_[m]=m==="access"?{}:n[m];for(var m in n.access)_.access[m]=n.access[m];_.addInitializer=function(g){if(p)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(g||null))};var R=(0,r[w])(a==="accessor"?{get:u.get,set:u.set}:u[c],_);if(a==="accessor"){if(R===void 0)continue;if(R===null||typeof R!="object")throw new TypeError("Object expected");(d=o(R.get))&&(u.get=d),(d=o(R.set))&&(u.set=d),(d=o(R.init))&&i.unshift(d)}else(d=o(R))&&(a==="field"?i.unshift(d):u[c]=d)}l&&Object.defineProperty(l,n.name,u),p=!0},z=function(t,e,r){for(var n=arguments.length>2,i=0;i<e.length;i++)r=n?e[i].call(t,r):e[i].call(t);return n?r:void 0},fh=function(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})},He=BigInt(0),he=(()=>{var t,e,r,n,i,s,o,a,c,l,u;let d=[Sc()],p,w=[],_,m,R=[],g=[],L,H=[],k=[],j,Qe=[],Ee=[],St,ue=[],Ne=[],mr,Tn=[],je=[],La,Ma=[],Ca=[],Wa,Ba=[],Pa=[],Ua,ja=[],qa=[],za,$a=[],Va=[],Ha,Ka=[],Ga=[],Ya,Xa=[],Ja=[];var ts=_=class{constructor(I){if(this.data=z(this,R,void 0),this.size=(z(this,g),z(this,H,void 0)),this.mode=(z(this,k),z(this,Qe,void 0)),this.nlink=(z(this,Ee),z(this,ue,void 0)),this.uid=(z(this,Ne),z(this,Tn,void 0)),this.gid=(z(this,je),z(this,Ma,void 0)),this.atimeMs=(z(this,Ca),z(this,Ba,void 0)),this.birthtimeMs=(z(this,Pa),z(this,ja,void 0)),this.mtimeMs=(z(this,qa),z(this,$a,void 0)),this.ctimeMs=(z(this,Va),z(this,Ka,void 0)),this.ino=(z(this,Ga),z(this,Xa,void 0)),z(this,Ja),I){let C=bt(ts),Qa=C-bt("uint64");if(I.byteLength<Qa)throw new RangeError(`Can not create an inode from a buffer less than ${Qa} bytes`);if(I.byteLength<C){let rs=new Uint8Array(C),Ad=ArrayBuffer.isView(I)?I.buffer:I;rs.set(new Uint8Array(Ad)),new DataView(rs.buffer).setBigUint64(C-1,Gt()),I=rs}gs(this,I);return}this.ino=Gt(),this.data=Gt(),this.nlink=1,this.size=4096;let S=Date.now();this.atimeMs=S,this.mtimeMs=S,this.ctimeMs=S,this.birthtimeMs=S}toStats(){return new q(this)}update(I){let S=!1;return this.size!==I.size&&(this.size=I.size,S=!0),this.mode!==I.mode&&(this.mode=I.mode,S=!0),this.nlink!==I.nlink&&(this.nlink=I.nlink,S=!0),this.uid!==I.uid&&(this.uid=I.uid,S=!0),this.gid!==I.gid&&(this.gid=I.gid,S=!0),this.atimeMs!==I.atimeMs&&(this.atimeMs=I.atimeMs,S=!0),this.mtimeMs!==I.mtimeMs&&(this.mtimeMs=I.mtimeMs,S=!0),this.ctimeMs!==I.ctimeMs&&(this.ctimeMs=I.ctimeMs,S=!0),S}};return fh(_,"Inode"),(()=>{let I=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;m=[(t=De).uint64.bind(t)],L=[(e=De).uint32.bind(e)],j=[(r=De).uint16.bind(r)],St=[(n=De).uint32.bind(n)],mr=[(i=De).uint32.bind(i)],La=[(s=De).uint32.bind(s)],Wa=[(o=De).float64.bind(o)],Ua=[(a=De).float64.bind(a)],za=[(c=De).float64.bind(c)],Ha=[(l=De).float64.bind(l)],Ya=[(u=De).uint64.bind(u)],Le(null,null,m,{kind:"field",name:"data",static:!1,private:!1,access:{has:S=>"data"in S,get:S=>S.data,set:(S,C)=>{S.data=C}},metadata:I},R,g),Le(null,null,L,{kind:"field",name:"size",static:!1,private:!1,access:{has:S=>"size"in S,get:S=>S.size,set:(S,C)=>{S.size=C}},metadata:I},H,k),Le(null,null,j,{kind:"field",name:"mode",static:!1,private:!1,access:{has:S=>"mode"in S,get:S=>S.mode,set:(S,C)=>{S.mode=C}},metadata:I},Qe,Ee),Le(null,null,St,{kind:"field",name:"nlink",static:!1,private:!1,access:{has:S=>"nlink"in S,get:S=>S.nlink,set:(S,C)=>{S.nlink=C}},metadata:I},ue,Ne),Le(null,null,mr,{kind:"field",name:"uid",static:!1,private:!1,access:{has:S=>"uid"in S,get:S=>S.uid,set:(S,C)=>{S.uid=C}},metadata:I},Tn,je),Le(null,null,La,{kind:"field",name:"gid",static:!1,private:!1,access:{has:S=>"gid"in S,get:S=>S.gid,set:(S,C)=>{S.gid=C}},metadata:I},Ma,Ca),Le(null,null,Wa,{kind:"field",name:"atimeMs",static:!1,private:!1,access:{has:S=>"atimeMs"in S,get:S=>S.atimeMs,set:(S,C)=>{S.atimeMs=C}},metadata:I},Ba,Pa),Le(null,null,Ua,{kind:"field",name:"birthtimeMs",static:!1,private:!1,access:{has:S=>"birthtimeMs"in S,get:S=>S.birthtimeMs,set:(S,C)=>{S.birthtimeMs=C}},metadata:I},ja,qa),Le(null,null,za,{kind:"field",name:"mtimeMs",static:!1,private:!1,access:{has:S=>"mtimeMs"in S,get:S=>S.mtimeMs,set:(S,C)=>{S.mtimeMs=C}},metadata:I},$a,Va),Le(null,null,Ha,{kind:"field",name:"ctimeMs",static:!1,private:!1,access:{has:S=>"ctimeMs"in S,get:S=>S.ctimeMs,set:(S,C)=>{S.ctimeMs=C}},metadata:I},Ka,Ga),Le(null,null,Ya,{kind:"field",name:"ino",static:!1,private:!1,access:{has:S=>"ino"in S,get:S=>S.ino,set:(S,C)=>{S.ino=C}},metadata:I},Xa,Ja),Le(null,p={value:_},d,{kind:"class",name:_.name,metadata:I},null,w),ts=_=p.value,I&&Object.defineProperty(_,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:I}),z(_,w)})(),ts=_})();var ae=function(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e},ce=function(t){return function(e){function r(o){e.error=e.hasError?new t(o,e.error,"An error was suppressed during disposal."):o,e.hasError=!0}var n,i=0;function s(){for(;n=e.stack.pop();)try{if(!n.async&&i===1)return i=0,e.stack.push(n),Promise.resolve().then(s);if(n.dispose){var o=n.dispose.call(n.value);if(n.async)return i|=2,Promise.resolve(o).then(s,function(a){return r(a),s()})}else i|=1}catch(a){r(a)}if(i===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return s()}}(typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n}),Ec=5,Ke=class extends de{async ready(){this._initialized||(await this.checkRoot(),this._initialized=!0)}constructor(e){super(),this.store=e,this._initialized=!1}metadata(){return{...super.metadata(),name:this.store.name}}async empty(){await this.store.clear(),await this.checkRoot()}emptySync(){this.store.clearSync(),this.checkRootSync()}async rename(e,r){let n={stack:[],error:void 0,hasError:!1};try{let i=ae(n,this.store.transaction(),!0),s=_e(e),o=_e(r),a=await this.findInode(i,s.dir,"rename"),c=be(await this.get(i,a.data,s.dir,"rename"));if(!c[s.base])throw f.With("ENOENT",e,"rename");let l=c[s.base];if(delete c[s.base],(o.dir+"/").indexOf(e+"/")===0)throw new f(h.EBUSY,s.dir);let u=o.dir==s.dir,d=u?a:await this.findInode(i,o.dir,"rename"),p=u?c:be(await this.get(i,d.data,o.dir,"rename"));if(p[o.base]){let w=new he(await this.get(i,p[o.base],r,"rename"));if(!w.toStats().isFile())throw f.With("EPERM",r,"rename");await i.remove(w.data),await i.remove(p[o.base])}p[o.base]=l,await i.set(a.data,ze(c)),await i.set(d.data,ze(p)),await i.commit()}catch(i){n.error=i,n.hasError=!0}finally{let i=ce(n);i&&await i}}renameSync(e,r){let n={stack:[],error:void 0,hasError:!1};try{let i=ae(n,this.store.transaction(),!1),s=_e(e),o=_e(r),a=this.findInodeSync(i,s.dir,"rename"),c=be(this.getSync(i,a.data,s.dir,"rename"));if(!c[s.base])throw f.With("ENOENT",e,"rename");let l=c[s.base];if(delete c[s.base],(o.dir+"/").indexOf(e+"/")==0)throw new f(h.EBUSY,s.dir);let u=o.dir===s.dir,d=u?a:this.findInodeSync(i,o.dir,"rename"),p=u?c:be(this.getSync(i,d.data,o.dir,"rename"));if(p[o.base]){let w=new he(this.getSync(i,p[o.base],r,"rename"));if(!w.toStats().isFile())throw f.With("EPERM",r,"rename");i.removeSync(w.data),i.removeSync(p[o.base])}p[o.base]=l,i.setSync(a.data,ze(c)),i.setSync(d.data,ze(p)),i.commitSync()}catch(i){n.error=i,n.hasError=!0}finally{ce(n)}}async stat(e){let r={stack:[],error:void 0,hasError:!1};try{let n=ae(r,this.store.transaction(),!0);return(await this.findInode(n,e,"stat")).toStats()}catch(n){r.error=n,r.hasError=!0}finally{let n=ce(r);n&&await n}}statSync(e){let r={stack:[],error:void 0,hasError:!1};try{let n=ae(r,this.store.transaction(),!1);return this.findInodeSync(n,e,"stat").toStats()}catch(n){r.error=n,r.hasError=!0}finally{ce(r)}}async createFile(e,r,n){let i=await this.commitNew(e,32768,n,new Uint8Array,"createFile");return new oe(this,e,r,i.toStats(),new Uint8Array)}createFileSync(e,r,n){let i=this.commitNewSync(e,32768,n,new Uint8Array,"createFile");return new oe(this,e,r,i.toStats(),new Uint8Array)}async openFile(e,r){let n={stack:[],error:void 0,hasError:!1};try{let i=ae(n,this.store.transaction(),!0),s=await this.findInode(i,e,"openFile"),o=await this.get(i,s.data,e,"openFile");return new oe(this,e,r,s.toStats(),o)}catch(i){n.error=i,n.hasError=!0}finally{let i=ce(n);i&&await i}}openFileSync(e,r){let n={stack:[],error:void 0,hasError:!1};try{let i=ae(n,this.store.transaction(),!1),s=this.findInodeSync(i,e,"openFile"),o=this.getSync(i,s.data,e,"openFile");return new oe(this,e,r,s.toStats(),o)}catch(i){n.error=i,n.hasError=!0}finally{ce(n)}}async unlink(e){return this.remove(e,!1,"unlink")}unlinkSync(e){this.removeSync(e,!1,"unlink")}async rmdir(e){if((await this.readdir(e)).length)throw f.With("ENOTEMPTY",e,"rmdir");await this.remove(e,!0,"rmdir")}rmdirSync(e){if(this.readdirSync(e).length)throw f.With("ENOTEMPTY",e,"rmdir");this.removeSync(e,!0,"rmdir")}async mkdir(e,r){await this.commitNew(e,16384,r,nt("{}"),"mkdir")}mkdirSync(e,r){this.commitNewSync(e,16384,r,nt("{}"),"mkdir")}async readdir(e){let r={stack:[],error:void 0,hasError:!1};try{let n=ae(r,this.store.transaction(),!0),i=await this.findInode(n,e,"readdir");return Object.keys(be(await this.get(n,i.data,e,"readdir")))}catch(n){r.error=n,r.hasError=!0}finally{let n=ce(r);n&&await n}}readdirSync(e){let r={stack:[],error:void 0,hasError:!1};try{let n=ae(r,this.store.transaction(),!1),i=this.findInodeSync(n,e,"readdir");return Object.keys(be(this.getSync(n,i.data,e,"readdir")))}catch(n){r.error=n,r.hasError=!0}finally{ce(r)}}async sync(e,r,n){let i={stack:[],error:void 0,hasError:!1};try{let s=ae(i,this.store.transaction(),!0),o=await this._findInode(s,e,"sync"),a=new he(await this.get(s,o,e,"sync")),c=a.update(n);await s.set(a.data,r),c&&await s.set(o,rt(a)),await s.commit()}catch(s){i.error=s,i.hasError=!0}finally{let s=ce(i);s&&await s}}syncSync(e,r,n){let i={stack:[],error:void 0,hasError:!1};try{let s=ae(i,this.store.transaction(),!1),o=this._findInodeSync(s,e,"sync"),a=new he(this.getSync(s,o,e,"sync")),c=a.update(n);s.setSync(a.data,r),c&&s.setSync(o,rt(a)),s.commitSync()}catch(s){i.error=s,i.hasError=!0}finally{ce(i)}}async link(e,r){let n={stack:[],error:void 0,hasError:!1};try{let i=ae(n,this.store.transaction(),!0),s=E(r),o=await this.findInode(i,s,"link"),a=be(await this.get(i,o.data,s,"link")),c=await this._findInode(i,e,"link"),l=new he(await this.get(i,c,e,"link"));l.nlink++,a[se(r)]=c,i.setSync(c,rt(l)),i.setSync(o.data,ze(a)),i.commitSync()}catch(i){n.error=i,n.hasError=!0}finally{let i=ce(n);i&&await i}}linkSync(e,r){let n={stack:[],error:void 0,hasError:!1};try{let i=ae(n,this.store.transaction(),!1),s=E(r),o=this.findInodeSync(i,s,"link"),a=be(this.getSync(i,o.data,s,"link")),c=this._findInodeSync(i,e,"link"),l=new he(this.getSync(i,c,e,"link"));l.nlink++,a[se(r)]=c,i.setSync(c,rt(l)),i.setSync(o.data,ze(a)),i.commitSync()}catch(i){n.error=i,n.hasError=!0}finally{ce(n)}}async checkRoot(){let e={stack:[],error:void 0,hasError:!1};try{let r=ae(e,this.store.transaction(),!0);if(await r.get(He))return;let n=new he;n.ino=He,n.mode=16895,await r.set(n.data,nt("{}")),await r.set(He,rt(n)),await r.commit()}catch(r){e.error=r,e.hasError=!0}finally{let r=ce(e);r&&await r}}checkRootSync(){let e={stack:[],error:void 0,hasError:!1};try{let r=ae(e,this.store.transaction(),!1);if(r.getSync(He))return;let n=new he;n.ino=He,n.mode=16895,r.setSync(n.data,nt("{}")),r.setSync(He,rt(n)),r.commitSync()}catch(r){e.error=r,e.hasError=!0}finally{ce(e)}}async _findInode(e,r,n,i=new Set){if(i.has(r))throw new f(h.EIO,"Infinite loop detected while finding inode",r);if(i.add(r),r=="/")return He;let{dir:s,base:o}=_e(r),a=s=="/"?new he(await this.get(e,He,s,n)):await this.findInode(e,s,n,i),c=be(await this.get(e,a.data,s,n));if(!(o in c))throw f.With("ENOENT",Te(s,o),n);return c[o]}_findInodeSync(e,r,n,i=new Set){if(i.has(r))throw new f(h.EIO,"Infinite loop detected while finding inode",r);if(i.add(r),r=="/")return He;let{dir:s,base:o}=_e(r),a=s=="/"?new he(this.getSync(e,He,s,n)):this.findInodeSync(e,s,n,i),c=be(this.getSync(e,a.data,s,n));if(!(o in c))throw f.With("ENOENT",Te(s,o),n);return c[o]}async findInode(e,r,n,i=new Set){let s=await this._findInode(e,r,n,i);return new he(await this.get(e,s,r,n))}findInodeSync(e,r,n,i=new Set){let s=this._findInodeSync(e,r,n,i);return new he(this.getSync(e,s,r,n))}async get(e,r,n,i){let s=await e.get(r);if(!s)throw f.With("ENOENT",n,i);return s}getSync(e,r,n,i){let s=e.getSync(r);if(!s)throw f.With("ENOENT",n,i);return s}async allocNew(e,r,n){for(let i=0;i<Ec;i++){let s=Gt();if(!await e.get(s))return s}throw new f(h.ENOSPC,"No IDs available",r,n)}allocNewSync(e,r,n){for(let i=0;i<Ec;i++){let s=Gt();if(!e.getSync(s))return s}throw new f(h.ENOSPC,"No IDs available",r,n)}async commitNew(e,r,n,i,s){let o={stack:[],error:void 0,hasError:!1};try{if(e=="/")throw f.With("EEXIST",e,s);let a=ae(o,this.store.transaction(),!0),{dir:c,base:l}=_e(e),u=await this.findInode(a,c,s),d=be(await this.get(a,u.data,c,s));if(d[l])throw f.With("EEXIST",e,s);let p=new he;return p.ino=await this.allocNew(a,e,s),p.data=await this.allocNew(a,e,s),p.mode=n|r,p.uid=u.mode&2048?u.uid:Et.uid,p.gid=u.mode&1024?u.gid:Et.gid,p.size=i.length,await a.set(p.ino,rt(p)),await a.set(p.data,i),d[l]=p.ino,await a.set(u.data,ze(d)),await a.commit(),p}catch(a){o.error=a,o.hasError=!0}finally{let a=ce(o);a&&await a}}commitNewSync(e,r,n,i,s){let o={stack:[],error:void 0,hasError:!1};try{if(e=="/")throw f.With("EEXIST",e,s);let a=ae(o,this.store.transaction(),!1),{dir:c,base:l}=_e(e),u=this.findInodeSync(a,c,s),d=be(this.getSync(a,u.data,c,s));if(d[l])throw f.With("EEXIST",e,s);let p=new he;return p.ino=this.allocNewSync(a,e,s),p.data=this.allocNewSync(a,e,s),p.size=i.length,p.mode=n|r,p.uid=u.mode&2048?u.uid:Et.uid,p.gid=u.mode&1024?u.gid:Et.gid,a.setSync(p.ino,rt(p)),a.setSync(p.data,i),d[l]=p.ino,a.setSync(u.data,ze(d)),a.commitSync(),p}catch(a){o.error=a,o.hasError=!0}finally{ce(o)}}async remove(e,r,n){let i={stack:[],error:void 0,hasError:!1};try{let s=ae(i,this.store.transaction(),!0),{dir:o,base:a}=_e(e),c=await this.findInode(s,o,n),l=be(await this.get(s,c.data,o,n));if(!l[a])throw f.With("ENOENT",e,"remove");let u=l[a],d=new he(await this.get(s,u,e,n));if(delete l[a],!r&&d.toStats().isDirectory())throw f.With("EISDIR",e,"remove");await s.set(c.data,ze(l)),--d.nlink<1&&(await s.remove(d.data),await s.remove(u)),await s.commit()}catch(s){i.error=s,i.hasError=!0}finally{let s=ce(i);s&&await s}}removeSync(e,r,n){let i={stack:[],error:void 0,hasError:!1};try{let s=ae(i,this.store.transaction(),!1),{dir:o,base:a}=_e(e),c=this.findInodeSync(s,o,n),l=be(this.getSync(s,c.data,o,n)),u=l[a];if(!u)throw f.With("ENOENT",e,"remove");let d=new he(this.getSync(s,u,e,n));if(delete l[a],!r&&d.toStats().isDirectory())throw f.With("EISDIR",e,"remove");s.setSync(c.data,ze(l)),--d.nlink<1&&(s.removeSync(d.data),s.removeSync(u)),s.commitSync()}catch(s){i.error=s,i.hasError=!0}finally{ce(i)}}};var Gn=class{constructor(e){this.store=e,this.done=!1}async[Symbol.asyncDispose](){this.done||await this.abort()}[Symbol.dispose](){this.done||this.abortSync()}},Yn=class extends Gn{async keys(){return this.keysSync()}async get(e){return this.getSync(e)}async set(e,r){return this.setSync(e,r)}async remove(e){return this.removeSync(e)}async commit(){return this.commitSync()}async abort(){return this.abortSync()}},Xn=class extends Gn{keysSync(){throw f.With("ENOSYS",void 0,"AsyncTransaction.keysSync")}getSync(){throw f.With("ENOSYS",void 0,"AsyncTransaction.getSync")}setSync(){throw f.With("ENOSYS",void 0,"AsyncTransaction.setSync")}removeSync(){throw f.With("ENOSYS",void 0,"AsyncTransaction.removeSync")}commitSync(){throw f.With("ENOSYS",void 0,"AsyncTransaction.commitSync")}abortSync(){throw f.With("ENOSYS",void 0,"AsyncTransaction.abortSync")}};var on=class extends Yn{constructor(){super(...arguments),this.originalData=new Map,this.modifiedKeys=new Set}keysSync(){return this.store.keys()}getSync(e){let r=this.store.get(e);return this.stashOldValue(e,r),r}setSync(e,r){return this.markModified(e),this.store.set(e,r)}removeSync(e){this.markModified(e),this.store.delete(e)}commitSync(){this.done=!0}abortSync(){if(this.done){for(let e of this.modifiedKeys){let r=this.originalData.get(e);r?this.store.set(e,r):this.store.delete(e)}this.done=!0}}stashOldValue(e,r){this.originalData.has(e)||this.originalData.set(e,r)}markModified(e){this.modifiedKeys.add(e),this.originalData.has(e)||this.originalData.set(e,this.store.get(e))}};var Jn=class extends Map{constructor(e="tmp"){super(),this.name=e}async sync(){}clearSync(){this.clear()}transaction(){return new on(this)}},uh={name:"InMemory",options:{name:{type:"string",required:!1}},create({name:t}){let e=new Ke(new Jn(t));return e.checkRootSync(),e}},Bt=uh;var Qn=class{constructor(){this.isEnabled=!1,this.sync=new Map,this.async=new Map}has(e){return this.isEnabled&&this.sync.has(e)}get(e){if(this.isEnabled)return this.sync.get(e)}set(e,r){this.isEnabled&&(this.sync.set(e,r),this.async.set(e,Promise.resolve(r)))}hasAsync(e){return this.isEnabled&&this.async.has(e)}getAsync(e){if(this.isEnabled)return this.async.get(e)}setAsync(e,r){this.isEnabled&&(this.async.set(e,r),r.then(n=>this.sync.set(e,n)))}clear(){this.isEnabled&&(this.sync.clear(),this.async.clear())}},D=new Qn,le=new Qn;var vt={};Fn(vt,{BigIntStatsFs:()=>jn,Dir:()=>er,Dirent:()=>Nt,ReadStream:()=>hr,Stats:()=>q,StatsFs:()=>Un,WriteStream:()=>yr,access:()=>v_,accessSync:()=>dy,appendFile:()=>e_,appendFileSync:()=>Qh,chmod:()=>E_,chmodSync:()=>ly,chown:()=>m_,chownSync:()=>ay,chroot:()=>zc,close:()=>r_,closeSync:()=>Qt,constants:()=>Ht,copyFile:()=>F_,copyFileSync:()=>Jc,cp:()=>C_,cpSync:()=>Qc,createReadStream:()=>N_,createWriteStream:()=>k_,exists:()=>HE,existsSync:()=>ci,fchmod:()=>l_,fchmodSync:()=>qs,fchown:()=>c_,fchownSync:()=>js,fdatasync:()=>s_,fdatasyncSync:()=>ry,fstat:()=>t_,fstatSync:()=>Zh,fsync:()=>i_,fsyncSync:()=>ty,ftruncate:()=>n_,ftruncateSync:()=>ey,futimes:()=>f_,futimesSync:()=>zs,glob:()=>P_,globSync:()=>Sy,lchmod:()=>__,lchmodSync:()=>fy,lchown:()=>S_,lchownSync:()=>cy,link:()=>y_,linkSync:()=>sy,lopenSync:()=>fi,lstat:()=>GE,lstatSync:()=>Bs,lutimes:()=>b_,lutimesSync:()=>uy,mkdir:()=>d_,mkdirSync:()=>$s,mkdtemp:()=>O_,mkdtempSync:()=>hy,mount:()=>Or,mountObject:()=>qc,mounts:()=>jt,open:()=>JE,openAsBlob:()=>B_,openSync:()=>li,opendir:()=>M_,opendirSync:()=>wy,promises:()=>Ut,read:()=>a_,readFile:()=>QE,readFileSync:()=>Us,readSync:()=>iy,readdir:()=>h_,readdirSync:()=>Zt,readlink:()=>w_,readlinkSync:()=>Gc,readv:()=>D_,readvSync:()=>yy,realpath:()=>x_,realpathSync:()=>Rt,rename:()=>VE,renameSync:()=>Xh,rm:()=>T_,rmSync:()=>Xc,rmdir:()=>u_,rmdirSync:()=>Kc,stat:()=>KE,statSync:()=>At,statfs:()=>W_,statfsSync:()=>my,symlink:()=>p_,symlinkSync:()=>oy,truncate:()=>YE,truncateSync:()=>Jh,umount:()=>ln,unlink:()=>XE,unlinkSync:()=>Ps,unwatchFile:()=>A_,utimes:()=>g_,utimesSync:()=>Yc,watch:()=>R_,watchFile:()=>I_,write:()=>o_,writeFile:()=>ZE,writeFileSync:()=>ui,writeSync:()=>ny,writev:()=>L_,writevSync:()=>py});var ga=Sr(Ce(),1);var Ut={};Fn(Ut,{FileHandle:()=>Ae,access:()=>wa,appendFile:()=>ca,chmod:()=>ha,chown:()=>ua,constants:()=>Ht,copyFile:()=>Ji,cp:()=>Qi,exists:()=>Gr,glob:()=>_a,lchmod:()=>ya,lchown:()=>da,link:()=>la,lstat:()=>vn,lutimes:()=>pa,mkdir:()=>Nn,mkdtemp:()=>ma,open:()=>Re,opendir:()=>Sa,readFile:()=>An,readdir:()=>kt,readlink:()=>Gi,realpath:()=>Je,rename:()=>oa,rm:()=>Xi,rmdir:()=>Ki,stat:()=>pr,statfs:()=>Ea,symlink:()=>fa,truncate:()=>aa,unlink:()=>In,utimes:()=>Yi,watch:()=>zE,writeFile:()=>Rn});var wt=Sr(Ce(),1);var at=Sr(Ce(),1);function Uc(t,e){return Object.fromEntries(Object.entries(t).map(([r,n])=>[r,typeof n=="function"?n.bind(e):n]))}function jc(t,e=structuredClone(Et)){let r={root:t,credentials:rc(e)},n=Uc(vt,r),i=Uc(Ut,r);return{...r,fs:{...vt,...n,promises:{...Ut,...i}}}}var It=new Map,$h=100;function cn(t){let e=$h++;return It.set(e,t),e}function U(t){if(!It.has(t))throw new f(h.EBADF);return It.get(t)}var jt=new Map;Or("/",Bt.create({name:"root"}));function Or(t,e){if(t[0]!=="/"&&(t="/"+t),t=Te(t),jt.has(t))throw new f(h.EINVAL,"Mount point "+t+" is already in use.");jt.set(t,e),le.clear()}function ln(t){if(t[0]!=="/"&&(t="/"+t),t=Te(t),!jt.has(t))throw new f(h.EINVAL,"Mount point "+t+" is already unmounted.");jt.delete(t),le.clear()}function F(t,e){let r=e?.root||"/";t=b(N(r,t));let n=[...jt].sort((i,s)=>i[0].length>s[0].length?-1:1);for(let[i,s]of n)if(Vh(i,t))return t=t.slice(i.length>1?i.length:0),t===""&&(t=r),{fs:s,path:t,mountPoint:i,root:r};throw new f(h.EIO,"No file system")}function Ms(t,e){for(let[r,n]of Object.entries(e))t=t?.replaceAll(r,n);return t}function Q(t,e){typeof t.stack=="string"&&(t.stack=Ms(t.stack,e));try{t.message=Ms(t.message,e)}catch{}return t.path&&(t.path=Ms(t.path,e)),t}function qc(t){"/"in t&&ln("/");for(let[e,r]of Object.entries(t))Or(e,r)}function ri(t,e){let r=t.metadata(),n=r.blockSize||4096;return{type:(e?BigInt:Number)(r.type),bsize:(e?BigInt:Number)(n),ffree:(e?BigInt:Number)(r.freeNodes||4294967295),files:(e?BigInt:Number)(r.totalNodes||4294967295),bavail:(e?BigInt:Number)(r.freeSpace/n),bfree:(e?BigInt:Number)(r.freeSpace/n),blocks:(e?BigInt:Number)(r.totalSpace/n)}}function zc(t,e){let r=this===null||this===void 0?void 0:this.credentials;if(r?.uid&&r?.gid&&r?.euid&&r?.egid)throw new f(h.EPERM,"Can not chroot() as non-root user");return e&&this?(this.root+=t,this):jc(N((this===null||this===void 0?void 0:this.root)||"/",t),r)}function Vh(t,e){return t==="/"||t===e?!0:(t.endsWith("/")||(t+="/"),e.startsWith(t))}var Ws=Sr(Vc(),1);var ii=class extends Ws.default{off(e,r,n,i){return super.off(e,r,n,i)}removeListener(e,r,n,i){return super.removeListener(e,r,n,i)}constructor(e,r){super(),this._context=e,this.path=r}setMaxListeners(){throw f.With("ENOSYS",this.path,"Watcher.setMaxListeners")}getMaxListeners(){throw f.With("ENOSYS",this.path,"Watcher.getMaxListeners")}prependListener(){throw f.With("ENOSYS",this.path,"Watcher.prependListener")}prependOnceListener(){throw f.With("ENOSYS",this.path,"Watcher.prependOnceListener")}rawListeners(){throw f.With("ENOSYS",this.path,"Watcher.rawListeners")}ref(){return this}unref(){return this}},Fr=class extends ii{constructor(e,r,n){super(e,r),this.options=n,Gh(r.toString(),this)}close(){super.emit("close"),Yh(this.path.toString(),this)}[Symbol.dispose](){this.close()}},si=class extends ii{constructor(e,r,n){super(e,r),this.options=n,this.start()}onInterval(){try{let e=At(this.path);ic(this.previous,e)||(this.emit("change",e,this.previous),this.previous=e)}catch(e){this.emit("error",e)}}start(){let e=this.options.interval||5e3;try{this.previous=At(this.path)}catch(r){this.emit("error",r);return}this.intervalId=setInterval(this.onInterval.bind(this),e),!this.options.persistent&&typeof this.intervalId=="object"&&this.intervalId.unref()}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0),this.removeAllListeners()}},Ge=new Map;function Gh(t,e){let r=b(t);Ge.has(r)||Ge.set(r,new Set),Ge.get(r).add(e)}function Yh(t,e){let r=b(t);Ge.has(r)&&(Ge.get(r).delete(e),Ge.get(r).size===0&&Ge.delete(r))}function B(t,e){var r;if(e=b(e),Ge.has(e))for(let s of Ge.get(e))s.emit("change",t,se(e));let n=e,i;for(;n!==i;)if(i=n,n=E(n),!!Ge.has(n))for(let s of Ge.get(n)){let o=(r=s._context)===null||r===void 0?void 0:r.root,c=(o&&e.startsWith(o)?e.slice(o.length):e).slice(n.length+(n=="/"?0:1));s.emit("change",t,c)}}var oi=function(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e},ai=function(t){return function(e){function r(o){e.error=e.hasError?new t(o,e.error,"An error was suppressed during disposal."):o,e.hasError=!0}var n,i=0;function s(){for(;n=e.stack.pop();)try{if(!n.async&&i===1)return i=0,e.stack.push(n),Promise.resolve().then(s);if(n.dispose){var o=n.dispose.call(n.value);if(n.async)return i|=2,Promise.resolve(o).then(s,function(a){return r(a),s()})}else i|=1}catch(a){r(a)}if(i===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return s()}}(typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n});function Xh(t,e){t=b(t),e=b(e);let r=F(t,this),n=F(e,this);if(v.checkAccess&&!At.call(this,E(t)).hasAccess(2,this))throw f.With("EACCES",t,"rename");try{if(r===n){r.fs.renameSync(r.path,n.path),B("rename",t.toString()),B("change",e.toString());return}ui.call(this,e,Us(t)),Ps.call(this,t),B("rename",t.toString())}catch(i){throw Q(i,{[r.path]:t,[n.path]:e})}}function ci(t){t=b(t);try{let{fs:e,path:r}=F(Rt.call(this,t),this);return e.existsSync(r)}catch(e){if(e.errno==h.ENOENT)return!1;throw e}}function At(t,e){t=b(t);let{fs:r,path:n}=F(Rt.call(this,t),this);try{let i=r.statSync(n);if(v.checkAccess&&!i.hasAccess(4,this))throw f.With("EACCES",n,"stat");return e?.bigint?new Oe(i):i}catch(i){throw Q(i,{[n]:t})}}function Bs(t,e){t=b(t);let{fs:r,path:n}=F(t,this);try{let i=r.statSync(n);return e?.bigint?new Oe(i):i}catch(i){throw Q(i,{[n]:t})}}function Jh(t,e=0){let r={stack:[],error:void 0,hasError:!1};try{let n=oi(r,Jt.call(this,t,"r+"),!1);if(e||(e=0),e<0)throw new f(h.EINVAL);n.truncateSync(e)}catch(n){r.error=n,r.hasError=!0}finally{ai(r)}}function Ps(t){t=b(t);let{fs:e,path:r}=F(t,this);try{if(v.checkAccess&&!(D.get(t)||e.statSync(r)).hasAccess(2,this))throw f.With("EACCES",r,"unlink");e.unlinkSync(r),B("rename",t.toString())}catch(n){throw Q(n,{[r]:t})}}function Jt(t,e,r,n=!0){t=b(t);let i=$e(r,420),s=ee(e);t=n?Rt.call(this,t):t;let{fs:o,path:a}=F(t,this),c;try{c=o.statSync(a)}catch{}if(!c){if(!Fe(s)&&!Wt(s)||s=="r+")throw f.With("ENOENT",t,"_open");let u=o.statSync(E(a));if(v.checkAccess&&!u.hasAccess(2,this))throw f.With("EACCES",E(t),"_open");if(!u.isDirectory())throw f.With("ENOTDIR",E(t),"_open");return o.createFileSync(a,s,i)}if(v.checkAccess&&(!c.hasAccess(i,this)||!c.hasAccess(qn(s),this)))throw f.With("EACCES",t,"_open");if($n(s))throw f.With("EEXIST",t,"_open");let l=o.openFileSync(a,s);return zn(s)&&l.truncateSync(0),l}function li(t,e,r=0){return cn(Jt.call(this,t,e,r,!0))}function fi(t,e,r){return cn(Jt.call(this,t,e,r,!1))}function Hc(t,e,r){let n={stack:[],error:void 0,hasError:!1};try{let i=oi(n,Jt.call(this,t,e,420,r),!1),s=i.statSync(),o=new Uint8Array(s.size);return i.readSync(o,0,s.size,0),o}catch(i){n.error=i,n.hasError=!0}finally{ai(n)}}function Us(t,e={}){let r=Ve(e,null,"r",420),n=ee(r.flag);if(!Kt(n))throw new f(h.EINVAL,"Flag passed to readFile must allow for reading.");let i=at.Buffer.from(Hc.call(this,typeof t=="number"?U(t).path:t.toString(),r.flag,!0));return r.encoding?i.toString(r.encoding):i}function ui(t,e,r={}){let n={stack:[],error:void 0,hasError:!1};try{let i=Ve(r,"utf8","w+",420),s=ee(i.flag);if(!Fe(s))throw new f(h.EINVAL,"Flag passed to writeFile must allow for writing.");if(typeof e!="string"&&!i.encoding)throw new f(h.EINVAL,"Encoding not specified");let o=typeof e=="string"?at.Buffer.from(e,i.encoding):new Uint8Array(e.buffer,e.byteOffset,e.byteLength);if(!o)throw new f(h.EINVAL,"Data not specified");oi(n,Jt.call(this,typeof t=="number"?U(t).path:t.toString(),s,i.mode,!0),!1).writeSync(o,0,o.byteLength,0),B("change",t.toString())}catch(i){n.error=i,n.hasError=!0}finally{ai(n)}}function Qh(t,e,r={}){let n={stack:[],error:void 0,hasError:!1};try{let i=Ve(r,"utf8","a+",420),s=ee(i.flag);if(!Wt(s))throw new f(h.EINVAL,"Flag passed to appendFile must allow for appending.");if(typeof e!="string"&&!i.encoding)throw new f(h.EINVAL,"Encoding not specified");let o=typeof e=="string"?at.Buffer.from(e,i.encoding):new Uint8Array(e.buffer,e.byteOffset,e.byteLength);oi(n,Jt.call(this,typeof t=="number"?U(t).path:t.toString(),s,i.mode,!0),!1).writeSync(o,0,o.byteLength)}catch(i){n.error=i,n.hasError=!0}finally{ai(n)}}function Zh(t,e){let r=U(t).statSync();return e?.bigint?new Oe(r):r}function Qt(t){U(t).closeSync(),It.delete(t)}function ey(t,e=0){if(e||(e=0),e<0)throw new f(h.EINVAL);U(t).truncateSync(e)}function ty(t){U(t).syncSync()}function ry(t){U(t).datasyncSync()}function ny(t,e,r,n,i){let s,o,a,c;if(typeof e=="string"){c=typeof r=="number"?r:null;let d=typeof n=="string"?n:"utf8";o=0,s=at.Buffer.from(e,d),a=s.byteLength}else s=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),o=r,a=n,c=typeof i=="number"?i:null;let l=U(t);c??(c=l.position);let u=l.writeSync(s,o,a,c);return B("change",l.path),u}function iy(t,e,r,n,i){let s=U(t),o=typeof r=="object"?r.offset:r;return typeof r=="object"&&(n=r.length,i=r.position),i=Number(i),isNaN(i)&&(i=s.position),s.readSync(e,o,n,i)}function js(t,e,r){U(t).chownSync(e,r)}function qs(t,e){let r=$e(e,-1);if(r<0)throw new f(h.EINVAL,"Invalid mode.");U(t).chmodSync(r)}function zs(t,e,r){U(t).utimesSync(Ar(e),Ar(r))}function Kc(t){t=b(t);let{fs:e,path:r}=F(Rt.call(this,t),this);try{let n=D.get(t)||e.statSync(r);if(!n.isDirectory())throw f.With("ENOTDIR",r,"rmdir");if(v.checkAccess&&!n.hasAccess(2,this))throw f.With("EACCES",r,"rmdir");e.rmdirSync(r),B("rename",t.toString())}catch(n){throw Q(n,{[r]:t})}}function $s(t,e){var r;e=typeof e=="object"?e:{mode:e};let n=$e(e?.mode,511);t=Rt.call(this,t);let{fs:i,path:s,root:o}=F(t,this),a={[s]:t};try{if(!e?.recursive){if(v.checkAccess&&!i.statSync(E(s)).hasAccess(2,this))throw f.With("EACCES",E(s),"mkdir");return i.mkdirSync(s,n)}let c=[];for(let l=s,u=t;!i.existsSync(l);l=E(l),u=E(u))c.unshift(l),a[l]=u;for(let l of c){if(v.checkAccess&&!i.statSync(E(l)).hasAccess(2,this))throw f.With("EACCES",E(l),"mkdir");i.mkdirSync(l,n),B("rename",l)}return o.length==1?c[0]:(r=c[0])===null||r===void 0?void 0:r.slice(o.length)}catch(c){throw Q(c,a)}}function Zt(t,e){e=typeof e=="object"?e:{encoding:e},t=b(t);let{fs:r,path:n}=F(Rt.call(this,t),this),i;try{let o=D.get(t)||r.statSync(n);if(D.set(t,o),v.checkAccess&&!o.hasAccess(4,this))throw f.With("EACCES",n,"readdir");if(!o.isDirectory())throw f.With("ENOTDIR",n,"readdir");i=r.readdirSync(n)}catch(o){throw Q(o,{[n]:t})}let s=[];for(let o of i){let a=D.get(N(t,o))||r.statSync(N(n,o));if(D.set(N(t,o),a),e?.withFileTypes?s.push(new Nt(o,a)):e?.encoding=="buffer"?s.push(at.Buffer.from(o)):s.push(o),!(!a.isDirectory()||!e?.recursive))for(let c of Zt.call(this,N(t,o),{...e,_isIndirect:!0}))c instanceof Nt?(c.path=N(o,c.path),s.push(c)):at.Buffer.isBuffer(c)?s.push(at.Buffer.from(N(o,it(c)))):s.push(N(o,c))}return e?._isIndirect||D.clear(),s}function sy(t,e){if(t=b(t),v.checkAccess&&!At(E(t)).hasAccess(4,this))throw f.With("EACCES",E(t),"link");if(e=b(e),v.checkAccess&&!At(E(e)).hasAccess(2,this))throw f.With("EACCES",E(e),"link");let{fs:r,path:n}=F(t,this),i=F(e,this);if(r!=i.fs)throw f.With("EXDEV",e,"link");try{if(v.checkAccess&&!r.statSync(n).hasAccess(4,this))throw f.With("EACCES",n,"link");return r.linkSync(n,i.path)}catch(s){throw Q(s,{[n]:t,[i.path]:e})}}function oy(t,e,r="file"){if(!["file","dir","junction"].includes(r))throw new f(h.EINVAL,"Invalid type: "+r);if(ci.call(this,e))throw f.With("EEXIST",e.toString(),"symlink");ui.call(this,e,t.toString()),Jt.call(this,e,"r+",420,!1).chmodSync(40960)}function Gc(t,e){let r=at.Buffer.from(Hc.call(this,t.toString(),"r",!1)),n=typeof e=="object"?e?.encoding:e;return n=="buffer"?r:r.toString(n??"utf-8")}function ay(t,e,r){let n=li.call(this,t,"r+");js(n,e,r),Qt(n)}function cy(t,e,r){let n=fi.call(this,t,"r+");js(n,e,r),Qt(n)}function ly(t,e){let r=li.call(this,t,"r+");qs(r,e),Qt(r)}function fy(t,e){let r=fi.call(this,t,"r+");qs(r,e),Qt(r)}function Yc(t,e,r){let n=li.call(this,t,"r+");zs(n,e,r),Qt(n)}function uy(t,e,r){let n=fi.call(this,t,"r+");zs(n,e,r),Qt(n)}function Rt(t,e){t=b(t);let r=((this===null||this===void 0?void 0:this.root)||"")+t;if(le.has(r))return le.get(r);let{base:n,dir:i}=_e(t),s=i=="/"?"/":le.get(((this===null||this===void 0?void 0:this.root)||"")+i)||Rt.call(this,i),o=N(s,n),{fs:a,path:c}=F(o,this);try{let l=D.get(o)||a.statSync(c);if(D.set(o,l),!l.isSymbolicLink())return le.set(t,o),o;let u=Te(s,Gc.call(this,o,e).toString()),d=le.get(((this===null||this===void 0?void 0:this.root)||"")+u)||Rt.call(this,u);return le.set(r,d),d}catch(l){if(l.code=="ENOENT")return t;throw Q(l,{[c]:o})}}function dy(t,e=384){if(v.checkAccess&&!At.call(this,t).hasAccess(e,this))throw new f(h.EACCES)}function Xc(t,e){t=b(t);let r;try{r=D.get(t)||Bs.bind(this)(t)}catch(n){if(n.code!="ENOENT"||!e?.force)throw n}if(r){switch(D.set(t,r),r.mode&61440){case 16384:if(e?.recursive)for(let n of Zt.call(this,t,{_isIndirect:!0}))Xc.call(this,N(t,n),{...e,_isIndirect:!0});Kc.call(this,t);break;case 32768:case 40960:case 24576:case 8192:Ps.call(this,t);break;case 4096:case 49152:default:throw D.clear(),new f(h.EPERM,"File type not supported",t,"rm")}e?._isIndirect||D.clear()}}function hy(t,e){let r=typeof e=="object"?e?.encoding:e||"utf8",i="/tmp/"+`${t}${Date.now()}-${Math.random().toString(36).slice(2)}`;return $s.call(this,i),r=="buffer"?at.Buffer.from(i):i}function Jc(t,e,r){if(t=b(t),e=b(e),r&&r&1&&ci(e))throw new f(h.EEXIST,"Destination file already exists.",e,"copyFile");ui.call(this,e,Us(t)),B("rename",e.toString())}function yy(t,e,r){let n=U(t),i=0;for(let s of e)i+=n.readSync(s,0,s.byteLength,r+i);return i}function py(t,e,r){let n=U(t),i=0;for(let s of e)i+=n.writeSync(new Uint8Array(s.buffer),0,s.byteLength,r+i);return i}function wy(t,e){return t=b(t),new er(t,this)}function Qc(t,e,r){t=b(t),e=b(e);let n=Bs.call(this,t);if(r?.errorOnExist&&ci.call(this,e))throw new f(h.EEXIST,"Destination file or directory already exists.",e,"cp");switch(n.mode&61440){case 16384:if(!r?.recursive)throw new f(h.EISDIR,t+" is a directory (not copied)",t,"cp");$s.call(this,e,{recursive:!0});for(let i of Zt.call(this,t,{withFileTypes:!0}))r.filter&&!r.filter(N(t,i.name),N(e,i.name))||Qc.call(this,N(t,i.name),N(e,i.name),r);break;case 32768:case 40960:Jc.call(this,t,e);break;case 24576:case 8192:case 4096:case 49152:default:throw new f(h.EPERM,"File type not supported",t,"rm")}r?.preserveTimestamps&&Yc.call(this,e,n.atime,n.mtime)}function my(t,e){t=b(t);let{fs:r}=F(t,this);return ri(r,e?.bigint)}function Sy(t,e={}){t=Array.isArray(t)?t:[t];let{cwd:r="/",withFileTypes:n=!1,exclude:i=()=>!1}=e,s=t.map(c=>(c=c.replace(/([.?+^$(){}|[\]/])/g,"\\$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${c}$`))),o=[];function a(c){let l=Zt(c,{withFileTypes:n,encoding:"utf8"});for(let u of l){let d=n?u.path:c+"/"+u;i(n?u:d)||(At(d).isDirectory()&&s.some(p=>p.source.includes(".*"))&&a(d),s.some(p=>p.test(d.replace(/^\/+/g,"")))&&o.push(n?u.path:d.replace(/^\/+/g,"")))}}return a(r),o}var Nt=class{get name(){return se(this.path)}constructor(e,r){this.path=e,this.stats=r}get parentPath(){return this.path}isFile(){return this.stats.isFile()}isDirectory(){return this.stats.isDirectory()}isBlockDevice(){return this.stats.isBlockDevice()}isCharacterDevice(){return this.stats.isCharacterDevice()}isSymbolicLink(){return this.stats.isSymbolicLink()}isFIFO(){return this.stats.isFIFO()}isSocket(){return this.stats.isSocket()}},er=class{checkClosed(){if(this.closed)throw new f(h.EBADF,"Can not use closed Dir")}constructor(e,r){this.path=e,this.context=r,this.closed=!1}close(e){if(this.closed=!0,!e)return Promise.resolve();e()}closeSync(){this.closed=!0}async _read(){var e,r;return this.checkClosed(),(e=this._entries)!==null&&e!==void 0||(this._entries=await kt.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(r=this._entries.shift())!==null&&r!==void 0?r:null}read(e){if(!e)return this._read();this._read().then(r=>e(void 0,r))}readSync(){var e,r;return this.checkClosed(),(e=this._entries)!==null&&e!==void 0||(this._entries=Zt.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(r=this._entries.shift())!==null&&r!==void 0?r:null}async next(){let e=await this._read();return e?{done:!1,value:e}:(await this.close(),{done:!0,value:void 0})}[Symbol.asyncIterator](){return this}[Symbol.asyncDispose](){return Promise.resolve()}};var Hi=Sr(cd(),1);var hr=class extends Hi.Readable{close(e=()=>null){try{super.destroy(),super.emit("close"),e(null)}catch(r){e(new f(h.EIO,r.toString()))}}wrap(e){return super.wrap(e),this}},yr=class extends Hi.Writable{close(e=()=>null){try{super.destroy(),super.emit("close"),e(null)}catch(r){e(new f(h.EIO,r.toString()))}}};var Pe=function(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e},Ue=function(t){return function(e){function r(o){e.error=e.hasError?new t(o,e.error,"An error was suppressed during disposal."):o,e.hasError=!0}var n,i=0;function s(){for(;n=e.stack.pop();)try{if(!n.async&&i===1)return i=0,e.stack.push(n),Promise.resolve().then(s);if(n.dispose){var o=n.dispose.call(n.value);if(n.async)return i|=2,Promise.resolve(o).then(s,function(a){return r(a),s()})}else i|=1}catch(a){r(a)}if(i===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return s()}}(typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n}),Ae=class{constructor(e,r){this.context=r;let n=typeof e!="number";this.fd=n?cn(e):e,this.file=n?e:U(e)}async chown(e,r){await this.file.chown(e,r),B("change",this.file.path)}async chmod(e){let r=$e(e,-1);if(r<0)throw new f(h.EINVAL,"Invalid mode.");await this.file.chmod(r),B("change",this.file.path)}datasync(){return this.file.datasync()}sync(){return this.file.sync()}async truncate(e){if(e||(e=0),e<0)throw new f(h.EINVAL);await this.file.truncate(e),B("change",this.file.path)}async utimes(e,r){await this.file.utimes(Ar(e),Ar(r)),B("change",this.file.path)}async appendFile(e,r={}){let n=Ve(r,"utf8","a",420),i=ee(n.flag);if(!Wt(i))throw new f(h.EINVAL,"Flag passed to appendFile must allow for appending.");if(typeof e!="string"&&!n.encoding)throw new f(h.EINVAL,"Encoding not specified");let s=typeof e=="string"?wt.Buffer.from(e,n.encoding):e;await this.file.write(s,0,s.length),B("change",this.file.path)}async read(e,r,n,i){return typeof r=="object"&&r!=null&&(i=r.position,n=r.length,r=r.offset),!ArrayBuffer.isView(e)&&typeof e=="object"&&(i=e.position,n=e.length,r=e.offset,e=e.buffer),isNaN(+i)&&(i=this.file.position),e||(e=new Uint8Array((await this.file.stat()).size)),this.file.read(e,r??void 0,n??void 0,i??void 0)}async readFile(e){let r=Ve(e,null,"r",292),n=ee(r.flag);if(!Kt(n))throw new f(h.EINVAL,"Flag passed must allow for reading.");let{size:i}=await this.stat(),{buffer:s}=await this.file.read(new Uint8Array(i),0,i,0),o=wt.Buffer.from(s);return r.encoding?o.toString(r.encoding):o}readableWebStream(e={}){let r=async i=>{try{let a=0,c=0,l=NaN;for(;l>0;){let u=await this.read(new Uint8Array(65536),0,65536,c);if(!u.bytesRead){i.close();return}if(i.enqueue(u.buffer.slice(0,u.bytesRead)),c+=u.bytesRead,++a>=1e7)throw new f(h.EFBIG,"Too many iterations on readable stream",this.file.path,"FileHandle.readableWebStream");l=u.bytesRead}}catch(s){i.error(s)}},n=globalThis;if(!("ReadableStream"in n))throw new f(h.ENOSYS,"ReadableStream is missing on globalThis");return new n.ReadableStream({start:r,type:e.type})}readLines(e){throw f.With("ENOSYS",this.file.path,"FileHandle.readLines")}[Symbol.asyncDispose](){return this.close()}async stat(e){let r=await this.file.stat();if(v.checkAccess&&!r.hasAccess(4,this.context))throw f.With("EACCES",this.file.path,"stat");return e?.bigint?new Oe(r):r}async write(e,r,n,i){let s,o,a;if(typeof r=="object"&&(n=r?.length,i=r?.position,r=r?.offset),typeof e=="string"){i=typeof r=="number"?r:null;let l=typeof n=="string"?n:"utf8";o=0,s=wt.Buffer.from(e,l),a=s.length}else s=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),o=r,a=n,i=typeof i=="number"?i:null;i??(i=this.file.position);let c=await this.file.write(s,o,a,i);return B("change",this.file.path),{buffer:e,bytesWritten:c}}async writeFile(e,r={}){let n=Ve(r,"utf8","w",420),i=ee(n.flag);if(!Fe(i))throw new f(h.EINVAL,"Flag passed must allow for writing.");if(typeof e!="string"&&!n.encoding)throw new f(h.EINVAL,"Encoding not specified");let s=typeof e=="string"?wt.Buffer.from(e,n.encoding):e;await this.file.write(s,0,s.length,0),B("change",this.file.path)}async close(){await this.file.close(),It.delete(this.fd)}async writev(e,r){let n=0;for(let i of e)n+=(await this.write(i,0,i.length,r+n)).bytesWritten;return{bytesWritten:n,buffers:e}}async readv(e,r){let n=0;for(let i of e)n+=(await this.read(i,0,i.byteLength,r+n)).bytesRead;return{bytesRead:n,buffers:e}}createReadStream(e){let r=new hr({highWaterMark:e?.highWaterMark||65536,encoding:e.encoding,read:async n=>{try{let i=await this.read(new Uint8Array(n),0,n,this.file.position);r.push(i.bytesRead?i.buffer.slice(0,i.bytesRead):null),this.file.position+=i.bytesRead}catch(i){r.destroy(i)}}});return r.path=this.file.path,r}createWriteStream(e){let r={highWaterMark:e?.highWaterMark,encoding:e?.encoding,write:async(i,s,o)=>{try{let{bytesWritten:a}=await this.write(i,null,s);o(a==i.length?null:new Error("Failed to write full chunk"))}catch(a){o(a)}}},n=new yr(r);return n.path=this.file.path,n}};async function oa(t,e){t=b(t),e=b(e);let r=F(t,this),n=F(e,this);if(v.checkAccess&&!(await pr.call(this,E(t))).hasAccess(2,this))throw f.With("EACCES",t,"rename");try{if(r.mountPoint==n.mountPoint){await r.fs.rename(r.path,n.path),B("rename",t.toString()),B("change",e.toString());return}await Rn.call(this,e,await An(t)),await In.call(this,t),B("rename",t.toString())}catch(i){throw Q(i,{[r.path]:t,[n.path]:e})}}async function Gr(t){try{let{fs:e,path:r}=F(await Je.call(this,t),this);return await e.exists(r)}catch(e){if(e instanceof f&&e.code=="ENOENT")return!1;throw e}}async function pr(t,e){t=b(t);let{fs:r,path:n}=F(await Je.call(this,t),this);try{let i=await r.stat(n);if(v.checkAccess&&!i.hasAccess(4,this))throw f.With("EACCES",n,"stat");return e?.bigint?new Oe(i):i}catch(i){throw Q(i,{[n]:t})}}async function vn(t,e){t=b(t);let{fs:r,path:n}=F(t,this);try{let i=await r.stat(n);return e?.bigint?new Oe(i):i}catch(i){throw Q(i,{[n]:t})}}async function aa(t,e=0){let r={stack:[],error:void 0,hasError:!1};try{await Pe(r,await Re.call(this,t,"r+"),!0).truncate(e)}catch(n){r.error=n,r.hasError=!0}finally{let n=Ue(r);n&&await n}}async function In(t){t=b(t);let{fs:e,path:r}=F(t,this);try{if(v.checkAccess&&!(await(D.getAsync(t)||e.stat(r))).hasAccess(2,this))throw f.With("EACCES",r,"unlink");await e.unlink(r),B("rename",t.toString())}catch(n){throw Q(n,{[r]:t})}}async function Yr(t,e,r=420,n){t=b(t);let i=$e(r,420),s=ee(e);t=n?await Je.call(this,t):t;let{fs:o,path:a}=F(t,this),c=await o.stat(a).catch(()=>null);if(!c){if(!Fe(s)&&!Wt(s)||s=="r+")throw f.With("ENOENT",t,"_open");let u=await o.stat(E(a));if(v.checkAccess&&!u.hasAccess(2,this))throw f.With("EACCES",E(t),"_open");if(!u.isDirectory())throw f.With("ENOTDIR",E(t),"_open");return new Ae(await o.createFile(a,s,i),this)}if(v.checkAccess&&!c.hasAccess(qn(s),this))throw f.With("EACCES",t,"_open");if($n(s))throw f.With("EEXIST",t,"_open");let l=new Ae(await o.openFile(a,s),this);return zn(s)&&await l.truncate(0),l}async function Re(t,e="r",r=420){return await Yr.call(this,t,e,r,!0)}async function An(t,e){let r={stack:[],error:void 0,hasError:!1};try{let n=Ve(e,null,"r",420);return await Pe(r,typeof t=="object"&&"fd"in t?t:await Re.call(this,t,n.flag,n.mode),!0).readFile(n)}catch(n){r.error=n,r.hasError=!0}finally{let n=Ue(r);n&&await n}}async function Rn(t,e,r){let n={stack:[],error:void 0,hasError:!1};try{let i=Ve(r,"utf8","w+",420),s=Pe(n,t instanceof Ae?t:await Re.call(this,t.toString(),i.flag,i.mode),!0),o=typeof e=="string"?e:e instanceof DataView?new Uint8Array(e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)):e;if(typeof o!="string"&&!(o instanceof Uint8Array))throw new f(h.EINVAL,'The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received '+typeof e,s.file.path,"writeFile");await s.writeFile(o,i)}catch(i){n.error=i,n.hasError=!0}finally{let i=Ue(n);i&&await i}}async function ca(t,e,r){let n={stack:[],error:void 0,hasError:!1};try{let i=Ve(r,"utf8","a",420),s=ee(i.flag);if(!Wt(s))throw new f(h.EINVAL,"Flag passed to appendFile must allow for appending.");if(typeof e!="string"&&!i.encoding)throw new f(h.EINVAL,"Encoding not specified");let o=typeof e=="string"?wt.Buffer.from(e,i.encoding):new Uint8Array(e.buffer,e.byteOffset,e.byteLength);await Pe(n,typeof t=="object"&&"fd"in t?t:await Re.call(this,t,i.flag,i.mode),!0).appendFile(o,i)}catch(i){n.error=i,n.hasError=!0}finally{let i=Ue(n);i&&await i}}async function Ki(t){t=await Je.call(this,t);let{fs:e,path:r}=F(t,this);try{let n=await(D.getAsync(t)||e.stat(r));if(!n)throw f.With("ENOENT",t,"rmdir");if(!n.isDirectory())throw f.With("ENOTDIR",r,"rmdir");if(v.checkAccess&&!n.hasAccess(2,this))throw f.With("EACCES",r,"rmdir");await e.rmdir(r),B("rename",t.toString())}catch(n){throw Q(n,{[r]:t})}}async function Nn(t,e){var r;e=typeof e=="object"?e:{mode:e};let n=$e(e?.mode,511);t=await Je.call(this,t);let{fs:i,path:s,root:o}=F(t,this),a={[s]:t};try{if(!e?.recursive){if(v.checkAccess&&!(await i.stat(E(s))).hasAccess(2,this))throw f.With("EACCES",E(s),"mkdir");await i.mkdir(s,n),B("rename",t.toString());return}let c=[];for(let l=s,u=t;!await i.exists(l);l=E(l),u=E(u))c.unshift(l),a[l]=u;for(let l of c){if(v.checkAccess&&!(await i.stat(E(l))).hasAccess(2,this))throw f.With("EACCES",E(l),"mkdir");await i.mkdir(l,n),B("rename",l)}return o.length==1?c[0]:(r=c[0])===null||r===void 0?void 0:r.slice(o.length)}catch(c){throw Q(c,a)}}async function kt(t,e){e=typeof e=="object"?e:{encoding:e},t=await Je.call(this,t);let r=u=>{throw Q(u,{[i]:t})},{fs:n,path:i}=F(t,this),s=D.getAsync(t)||n.stat(i).catch(r);D.setAsync(t,s);let o=await s;if(!o)throw f.With("ENOENT",t,"readdir");if(v.checkAccess&&!o.hasAccess(4,this))throw f.With("EACCES",t,"readdir");if(!o.isDirectory())throw f.With("ENOTDIR",t,"readdir");let a=await n.readdir(i).catch(r),c=[],l=async u=>{let d;if(e?.recursive||e?.withFileTypes){let p=D.getAsync(N(t,u))||n.stat(N(i,u)).catch(r);D.setAsync(N(t,u),p),d=await p}if(e?.withFileTypes?c.push(new Nt(u,d)):e?.encoding=="buffer"?c.push(wt.Buffer.from(u)):c.push(u),!(!e?.recursive||!d?.isDirectory()))for(let p of await kt.call(this,N(t,u),{...e,_isIndirect:!0}))p instanceof Nt?(p.path=N(u,p.path),c.push(p)):wt.Buffer.isBuffer(p)?c.push(wt.Buffer.from(N(u,it(p)))):c.push(N(u,p))};return await Promise.all(a.map(l)),e?._isIndirect||D.clear(),c}async function la(t,e){t=b(t),e=b(e);let{fs:r,path:n}=F(t,this),i=F(e,this);if(r!=i.fs)throw f.With("EXDEV",e,"link");try{if(v.checkAccess&&!(await r.stat(E(t))).hasAccess(4,this))throw f.With("EACCES",E(n),"link");if(v.checkAccess&&!(await pr.call(this,E(e))).hasAccess(2,this))throw f.With("EACCES",E(e),"link");if(v.checkAccess&&!(await r.stat(n)).hasAccess(4,this))throw f.With("EACCES",n,"link");return await r.link(n,i.path)}catch(s){throw Q(s,{[i.path]:e,[n]:t})}}async function fa(t,e,r="file"){let n={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(r))throw new f(h.EINVAL,"Invalid symlink type: "+r);if(await Gr.call(this,e))throw f.With("EEXIST",e.toString(),"symlink");let i=Pe(n,await Yr.call(this,e,"w+",420,!1),!0);await i.writeFile(t.toString()),await i.file.chmod(40960)}catch(i){n.error=i,n.hasError=!0}finally{let i=Ue(n);i&&await i}}async function Gi(t,e){let r={stack:[],error:void 0,hasError:!1};try{let i=await Pe(r,await Yr.call(this,b(t),"r",420,!1),!0).readFile(),s=typeof e=="object"?e?.encoding:e;return s=="buffer"?i:i.toString(s??"utf-8")}catch(n){r.error=n,r.hasError=!0}finally{let n=Ue(r);n&&await n}}async function ua(t,e,r){let n={stack:[],error:void 0,hasError:!1};try{await Pe(n,await Re.call(this,t,"r+"),!0).chown(e,r)}catch(i){n.error=i,n.hasError=!0}finally{let i=Ue(n);i&&await i}}async function da(t,e,r){let n={stack:[],error:void 0,hasError:!1};try{await Pe(n,await Yr.call(this,t,"r+",420,!1),!0).chown(e,r)}catch(i){n.error=i,n.hasError=!0}finally{let i=Ue(n);i&&await i}}async function ha(t,e){let r={stack:[],error:void 0,hasError:!1};try{await Pe(r,await Re.call(this,t,"r+"),!0).chmod(e)}catch(n){r.error=n,r.hasError=!0}finally{let n=Ue(r);n&&await n}}async function ya(t,e){let r={stack:[],error:void 0,hasError:!1};try{await Pe(r,await Yr.call(this,t,"r+",420,!1),!0).chmod(e)}catch(n){r.error=n,r.hasError=!0}finally{let n=Ue(r);n&&await n}}async function Yi(t,e,r){let n={stack:[],error:void 0,hasError:!1};try{await Pe(n,await Re.call(this,t,"r+"),!0).utimes(e,r)}catch(i){n.error=i,n.hasError=!0}finally{let i=Ue(n);i&&await i}}async function pa(t,e,r){let n={stack:[],error:void 0,hasError:!1};try{await Pe(n,await Yr.call(this,t,"r+",420,!1),!0).utimes(new Date(e),new Date(r))}catch(i){n.error=i,n.hasError=!0}finally{let i=Ue(n);i&&await i}}async function Je(t,e){t=b(t);let r=((this===null||this===void 0?void 0:this.root)||"")+t;if(le.hasAsync(r))return le.getAsync(r);let{base:n,dir:i}=_e(t),s=i=="/"?"/":await(le.getAsync(((this===null||this===void 0?void 0:this.root)||"")+i)||Je.call(this,i)),o=N(s,n),{fs:a,path:c}=F(o,this);try{let l=D.getAsync(o)||a.stat(c);if(D.setAsync(o,l),!(await l).isSymbolicLink())return le.set(t,o),o;let u=Te(s,(await Gi.call(this,o)).toString()),d=le.getAsync(((this===null||this===void 0?void 0:this.root)||"")+u)||Je.call(this,u);return le.setAsync(r,d),await d}catch(l){if(l.code=="ENOENT")return t;throw Q(l,{[c]:o})}}function zE(t,e={}){let r=this;return{[Symbol.asyncIterator](){let n=new Fr(r,t.toString(),typeof e!="string"?e:{encoding:e}),i=[];n.on("change",(o,a)=>{var c;(c=i.shift())===null||c===void 0||c({value:{eventType:o,filename:a},done:!1})});function s(){n.close();for(let o of i)o({value:null,done:!0});return i.length=0,Promise.resolve({value:null,done:!0})}return{async next(){let{promise:o,resolve:a}=Promise.withResolvers();return i.push(a),o},return:s,throw:s,[Symbol.asyncDispose](){return Promise.resolve()}}}}}async function wa(t,e=0){if(!v.checkAccess)return;if(!(await pr.call(this,t)).hasAccess(e,this))throw new f(h.EACCES)}async function Xi(t,e){t=b(t);let r=await(D.getAsync(t)||vn.call(this,t).catch(n=>{if(!(n.code=="ENOENT"&&e?.force))throw n}));if(r){switch(D.set(t,r),r.mode&61440){case 16384:if(e?.recursive)for(let n of await kt.call(this,t,{_isIndirect:!0}))await Xi.call(this,N(t,n),{...e,_isIndirect:!0});await Ki.call(this,t);break;case 32768:case 40960:case 24576:case 8192:await In.call(this,t);break;case 4096:case 49152:default:throw D.clear(),new f(h.EPERM,"File type not supported",t,"rm")}e?._isIndirect||D.clear()}}async function ma(t,e){let r=typeof e=="object"?e?.encoding:e||"utf8",i="/tmp/"+`${t}${Date.now()}-${Math.random().toString(36).slice(2)}`;return await Nn.call(this,i),r=="buffer"?wt.Buffer.from(i):i}async function Ji(t,e,r){if(t=b(t),e=b(e),r&&r&1&&await Gr.call(this,e))throw new f(h.EEXIST,"Destination file already exists.",e,"copyFile");await Rn.call(this,e,await An.call(this,t)),B("rename",e.toString())}function Sa(t,e){return t=b(t),Promise.resolve(new er(t,this))}async function Qi(t,e,r){t=b(t),e=b(e);let n=await vn.call(this,t);if(r?.errorOnExist&&await Gr.call(this,e))throw new f(h.EEXIST,"Destination file or directory already exists.",e,"cp");switch(n.mode&61440){case 16384:{if(!r?.recursive)throw new f(h.EISDIR,t+" is a directory (not copied)",t,"cp");let[i]=await Promise.all([kt.call(this,t,{withFileTypes:!0}),Nn.call(this,e,{recursive:!0})]),s=async o=>{r.filter&&!r.filter(N(t,o.name),N(e,o.name))||await Qi.call(this,N(t,o.name),N(e,o.name),r)};await Promise.all(i.map(s));break}case 32768:case 40960:await Ji.call(this,t,e);break;case 24576:case 8192:case 4096:case 49152:default:throw new f(h.EPERM,"File type not supported",t,"rm")}r?.preserveTimestamps&&await Yi.call(this,e,n.atime,n.mtime)}async function Ea(t,e){t=b(t);let{fs:r}=F(t,this);return Promise.resolve(ri(r,e?.bigint))}function _a(t,e){t=Array.isArray(t)?t:[t];let{cwd:r="/",withFileTypes:n=!1,exclude:i=()=>!1}=e||{},s=t.map(a=>(a=a.replace(/([.?+^$(){}|[\]/])/g,"$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${a}$`)));async function*o(a){let c=await kt(a,{withFileTypes:n,encoding:"utf8"});for(let l of c){let u=n?l.path:a+"/"+l;i(n?l:u)||((await pr(u)).isDirectory()&&s.some(d=>d.source.includes(".*"))&&(yield*o(u)),s.some(d=>d.test(u.replace(/^\/+/g,"")))&&(yield n?l:u.replace(/^\/+/g,"")))}}return o(r)}var x=()=>{};async function $E(t){let e=[];for await(let r of t)e.push(r);return e}function VE(t,e,r=x){oa.call(this,t,e).then(()=>r()).catch(r)}function HE(t,e=x){Gr.call(this,t).then(e).catch(()=>e(!1))}function KE(t,e,r=x){r=typeof e=="function"?e:r,pr.call(this,t,typeof e!="function"?e:{}).then(n=>r(void 0,n)).catch(r)}function GE(t,e,r=x){r=typeof e=="function"?e:r,vn.call(this,t,typeof e!="function"?e:{}).then(n=>r(void 0,n)).catch(r)}function YE(t,e=0,r=x){r=typeof e=="function"?e:r;let n=typeof e=="number"?e:0;aa.call(this,t,n).then(()=>r()).catch(r)}function XE(t,e=x){In.call(this,t).then(()=>e()).catch(e)}function JE(t,e,r,n=x){let i=$e(r,420);n=typeof r=="function"?r:n,Re.call(this,t,e,i).then(s=>n(void 0,s.fd)).catch(n)}function QE(t,e,r=x){r=typeof e=="function"?e:r,An.call(this,t,typeof e=="function"?null:e).then(n=>r(void 0,n)).catch(r)}function ZE(t,e,r,n=x){n=typeof r=="function"?r:n,Rn.call(this,t,e,typeof r!="function"?r:null).then(()=>n(void 0)).catch(n)}function e_(t,e,r,n=x){let i=typeof r!="function"?r:void 0;n=typeof r=="function"?r:n,ca.call(this,t,e,i).then(()=>n()).catch(n)}function t_(t,e,r=x){r=typeof e=="function"?e:r,U(t).stat().then(n=>r(void 0,typeof e=="object"&&e?.bigint?new Oe(n):n)).catch(r)}function r_(t,e=x){let r=U(t).close();It.delete(t),r.then(()=>e()).catch(e)}function n_(t,e,r=x){let n=typeof e=="number"?e:0;r=typeof e=="function"?e:r;let i=U(t);if(n<0)throw new f(h.EINVAL);i.truncate(n).then(()=>r()).catch(r)}function i_(t,e=x){U(t).sync().then(()=>e()).catch(e)}function s_(t,e=x){U(t).datasync().then(()=>e()).catch(e)}function o_(t,e,r,n,i,s=x){let o,a,c,l,u,d=new Ae(t,this);if(typeof e=="string"){switch(u="utf8",typeof r){case"function":s=r;break;case"number":l=r,u=typeof n=="string"?n:"utf8",s=typeof i=="function"?i:s;break;default:s=typeof n=="function"?n:typeof i=="function"?i:s,s(new f(h.EINVAL,"Invalid arguments."));return}o=ga.Buffer.from(e),a=0,c=o.length;let p=s;d.write(o,a,c,l).then(({bytesWritten:w})=>p(void 0,w,o.toString(u))).catch(p)}else{o=ga.Buffer.from(e.buffer),a=r,c=n,l=typeof i=="number"?i:null;let p=typeof i=="function"?i:s;d.write(o,a,c,l).then(({bytesWritten:w})=>p(void 0,w,o)).catch(p)}}function a_(t,e,r,n,i,s=x){new Ae(t,this).read(e,r,n,i).then(({bytesRead:o,buffer:a})=>s(void 0,o,a)).catch(s)}function c_(t,e,r,n=x){new Ae(t,this).chown(e,r).then(()=>n()).catch(n)}function l_(t,e,r){new Ae(t,this).chmod(e).then(()=>r()).catch(r)}function f_(t,e,r,n=x){new Ae(t,this).utimes(e,r).then(()=>n()).catch(n)}function u_(t,e=x){Ki.call(this,t).then(()=>e()).catch(e)}function d_(t,e,r=x){Nn.call(this,t,e).then(()=>r()).catch(r)}function h_(t,e,r=x){r=typeof e=="function"?e:r;let n=typeof e!="function"?e:{};kt.call(this,t,n).then(i=>r(void 0,i)).catch(r)}function y_(t,e,r=x){la.call(this,t,e).then(()=>r()).catch(r)}function p_(t,e,r,n=x){let i=typeof r=="string"?r:"file";n=typeof r=="function"?r:n,fa.call(this,t,e,i).then(()=>n()).catch(n)}function w_(t,e,r=x){r=typeof e=="function"?e:r,Gi.call(this,t).then(n=>r(void 0,n)).catch(r)}function m_(t,e,r,n=x){ua.call(this,t,e,r).then(()=>n()).catch(n)}function S_(t,e,r,n=x){da.call(this,t,e,r).then(()=>n()).catch(n)}function E_(t,e,r=x){ha.call(this,t,e).then(()=>r()).catch(r)}function __(t,e,r=x){ya.call(this,t,e).then(()=>r()).catch(r)}function g_(t,e,r,n=x){Yi.call(this,t,e,r).then(()=>n()).catch(n)}function b_(t,e,r,n=x){pa.call(this,t,e,r).then(()=>n()).catch(n)}function x_(t,e,r=x){r=typeof e=="function"?e:r,Je.call(this,t,typeof e=="function"?null:e).then(n=>r(void 0,n)).catch(r)}function v_(t,e,r=x){let n=typeof e=="number"?e:4;r=typeof e=="function"?e:r,wa.call(this,t,n).then(()=>r()).catch(r)}var Xr=new Map;function I_(t,e,r){let n=b(t.toString()),i=typeof e!="function"?e:{};if(typeof e=="function"&&(r=e),!r)throw new f(h.EINVAL,"No listener specified",t.toString(),"watchFile");if(Xr.has(n)){let o=Xr.get(n);o&&o.listeners.add(r);return}let s=new si(this,n,i);s.on("change",(o,a)=>{let c=Xr.get(n);if(c)for(let l of c.listeners)l(o,a)}),Xr.set(n,{watcher:s,listeners:new Set})}function A_(t,e=x){let r=b(t.toString()),n=Xr.get(r);n&&(e&&e!==x?n.listeners.delete(e):n.listeners.clear(),n.listeners.size===0&&(n.watcher.stop(),Xr.delete(r)))}function R_(t,e,r){let n=new Fr(this,b(t),typeof e=="object"?e:{});return r=typeof e=="function"?e:r,n.on("change",r||x),n}function N_(t,e){let r=this;e=typeof e=="object"?e:{encoding:e};let n,i=new hr({highWaterMark:e.highWaterMark||64*1024,encoding:e.encoding||"utf8",async read(s){try{n||(n=await Re.call(r,t,"r",e?.mode));let o=await n.read(new Uint8Array(s),0,s,n.file.position);i.push(o.bytesRead?o.buffer.slice(0,o.bytesRead):null),n.file.position+=o.bytesRead,o.bytesRead||await n.close()}catch(o){await n?.close(),i.destroy(o)}},destroy(s,o){n?.close().then(()=>o(s)).catch(x)}});return i.path=t.toString(),i}function k_(t,e){let r=this;e=typeof e=="object"?e:{encoding:e};let n,i=new yr({highWaterMark:e?.highWaterMark,async write(s,o,a){try{n||(n=await Re.call(r,t,"w",e?.mode||438)),await n.write(s,0,o),a(void 0)}catch(c){await n?.close(),a(c)}},destroy(s,o){o(s),n?.close().then(()=>o(s)).catch(o)},final(s){n?.close().then(()=>s()).catch(s)}});return i.path=t.toString(),i}function T_(t,e,r=x){r=typeof e=="function"?e:r,Xi.call(this,t,typeof e=="function"?void 0:e).then(()=>r(void 0)).catch(r)}function O_(t,e,r=x){r=typeof e=="function"?e:r,ma.call(this,t,typeof e!="function"?e:null).then(n=>r(void 0,n)).catch(r)}function F_(t,e,r,n=x){n=typeof r=="function"?r:n,Ji.call(this,t,e,typeof r=="function"?void 0:r).then(()=>n(void 0)).catch(n)}function D_(t,e,r,n=x){n=typeof r=="function"?r:n,new Ae(t,this).readv(e,typeof r=="function"?void 0:r).then(({buffers:i,bytesRead:s})=>n(void 0,s,i)).catch(n)}function L_(t,e,r,n=x){n=typeof r=="function"?r:n,new Ae(t,this).writev(e,typeof r=="function"?void 0:r).then(({buffers:i,bytesWritten:s})=>n(void 0,s,i)).catch(n)}function M_(t,e,r=x){r=typeof e=="function"?e:r,Sa.call(this,t,typeof e=="function"?void 0:e).then(n=>r(void 0,n)).catch(r)}function C_(t,e,r,n=x){n=typeof r=="function"?r:n,Qi.call(this,t,e,typeof r=="function"?void 0:r).then(()=>n(void 0)).catch(n)}function W_(t,e,r=x){r=typeof e=="function"?e:r,Ea.call(this,t,typeof e=="function"?void 0:e).then(n=>r(void 0,n)).catch(r)}async function B_(t,e){let r=await Re.call(this,t.toString(),"r"),n=await r.readFile();return await r.close(),new Blob([n],e)}function P_(t,e,r=x){r=typeof e=="function"?e:r;let n=_a.call(this,t,typeof e=="function"?void 0:e);$E(n).then(i=>{var s;return r(null,(s=i)!==null&&s!==void 0?s:[])}).catch(i=>r(i))}function ld(t){return ns(t)||Dn(t)||t instanceof de}async function ba(t,e=0){if(typeof t!="object"||t==null)throw new f(h.EINVAL,"Invalid options on mount configuration");if(!ld(t))throw new f(h.EINVAL,"Invalid mount configuration");if(t instanceof de)return await t.ready(),t;Dn(t)&&(t={backend:t});for(let[i,s]of Object.entries(t))if(i!="backend"&&ld(s)){if(e>10)throw new f(h.EINVAL,"Invalid configuration, too deep and possibly infinite");t[i]=await ba(s,++e)}let{backend:r}=t;if(typeof r.isAvailable=="function"&&!await r.isAvailable())throw new f(h.EPERM,"Backend not available: "+r.name);await tc(r,t);let n=await r.create(t);return n._disableSync=t.disableAsyncCache||!1,await n.ready(),n}async function fd(t){if(!ns(t))throw new TypeError("Invalid single mount point configuration");let e=await ba(t);ln("/"),Or("/",e)}var ud=function(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e},U_=function(t){return function(e){function r(o){e.error=e.hasError?new t(o,e.error,"An error was suppressed during disposal."):o,e.hasError=!0}var n,i=0;function s(){for(;n=e.stack.pop();)try{if(!n.async&&i===1)return i=0,e.stack.push(n),Promise.resolve().then(s);if(n.dispose){var o=n.dispose.call(n.value);if(n.async)return i|=2,Promise.resolve(o).then(s,function(a){return r(a),s()})}else i|=1}catch(a){r(a)}if(i===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return s()}}(typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n});function Jr(t){class e extends t{get _queueRunning(){return!!this._queue.length}queueDone(){return new Promise(n=>{let i=()=>this._queueRunning?setTimeout(i):n();i()})}constructor(...n){super(...n),this._queue=[],this._isInitialized=!1,this._patchAsync()}async ready(){if(await super.ready(),await this.queueDone(),!(this._isInitialized||this._disableSync)){if(this.checkSync(),await this._sync.ready(),this._sync instanceof Ke&&this instanceof Ke){let n=this._sync.store.transaction(),i=this.store.transaction(),s=[];for(let o of await i.keys())s.push(i.get(o).then(a=>n.setSync(o,a)));await Promise.all(s),this._isInitialized=!0;return}try{await this.crossCopy("/"),this._isInitialized=!0}catch(n){throw this._isInitialized=!1,n}}}checkSync(n,i){if(this._disableSync)throw new f(h.ENOTSUP,"Sync caching has been disabled for this async file system",n,i);if(!this._sync)throw new f(h.ENOTSUP,"No sync cache is attached to this async file system",n,i)}renameSync(n,i){this.checkSync(n,"rename"),this._sync.renameSync(n,i),this.queue("rename",n,i)}statSync(n){return this.checkSync(n,"stat"),this._sync.statSync(n)}createFileSync(n,i,s){return this.checkSync(n,"createFile"),this._sync.createFileSync(n,i,s),this.queue("createFile",n,i,s),this.openFileSync(n,i)}openFileSync(n,i){this.checkSync(n,"openFile");let s=this._sync.openFileSync(n,i+"+"),o=s.statSync(),a=new Uint8Array(o.size);return s.readSync(a),new oe(this,n,i,o,a)}unlinkSync(n){this.checkSync(n,"unlinkSync"),this._sync.unlinkSync(n),this.queue("unlink",n)}rmdirSync(n){this.checkSync(n,"rmdir"),this._sync.rmdirSync(n),this.queue("rmdir",n)}mkdirSync(n,i){this.checkSync(n,"mkdir"),this._sync.mkdirSync(n,i),this.queue("mkdir",n,i)}readdirSync(n){return this.checkSync(n,"readdir"),this._sync.readdirSync(n)}linkSync(n,i){this.checkSync(n,"link"),this._sync.linkSync(n,i),this.queue("link",n,i)}syncSync(n,i,s){this.checkSync(n,"sync"),this._sync.syncSync(n,i,s),this.queue("sync",n,i,s)}existsSync(n){return this.checkSync(n,"exists"),this._sync.existsSync(n)}async crossCopy(n){this.checkSync(n,"crossCopy");let i=await this.stat(n);if(!i.isDirectory()){let o={stack:[],error:void 0,hasError:!1};try{let a=ud(o,await this.openFile(n,ee("r")),!0),c=ud(o,this._sync.createFileSync(n,ee("w"),i.mode),!1),l=new Uint8Array(i.size);await a.read(l),c.writeSync(l,0,i.size);return}catch(a){o.error=a,o.hasError=!0}finally{let a=U_(o);a&&await a}}if(n!=="/"){let o=await this.stat(n);this._sync.mkdirSync(n,o.mode)}let s=[];for(let o of await this.readdir(n))s.push(this.crossCopy(N(n,o)));await Promise.all(s)}async _next(){if(!this._queueRunning)return;let[n,...i]=this._queue.shift();await this[n](...i),await this._next()}queue(...n){this._queue.push(n),this._next()}_patchAsync(){let n=["rename","stat","createFile","openFile","unlink","rmdir","mkdir","readdir","link","sync","exists"];for(let i of n){if(typeof this[i]!="function")continue;let s=this[i];this[i]=async(...o)=>{var a,c;let l=await s.apply(this,o);if(new Error().stack.includes(`at async ${this.constructor.name}._next`)||!this._isInitialized)return l;try{(c=(a=this._sync)===null||a===void 0?void 0:a[`${i}Sync`])===null||c===void 0||c.call(a,...o)}catch(u){throw new f(u.errno,"Out of sync! ("+u.message+")",o[0],i)}return l}}}}return e}function j_(t){return typeof t=="object"&&t!=null&&"fd"in t&&"path"in t&&"position"in t}function dd(t){return typeof t=="object"&&t!=null&&"_zenfs"in t&&!!t._zenfs}var Qr=new Map;function xa(t,{port:e,timeout:r=1e3,fs:n}={}){let i=`
`+new Error().stack.slice(6);if(!e)throw f.With("EINVAL");return new Promise((s,o)=>{let a=Math.random().toString(16).slice(10);Qr.set(a,{resolve:s,reject:o,fs:n}),e.postMessage({...t,_zenfs:!0,id:a,stack:i});let c=setTimeout(()=>{let l=new f(h.EIO,"RPC Failed");l.stack+=i,o(l),typeof c=="object"&&c.unref()},r)})}function hd(t){if(!dd(t))return;let{id:e,value:r,error:n,stack:i}=t;if(!Qr.has(e)){let c=new f(h.EIO,"Invalid RPC id:"+e);throw c.stack+=i,c}let{resolve:s,reject:o,fs:a}=Qr.get(e);if(n){let c=typeof r=="string"?new Error(r):f.fromJSON(r);c.stack+=i,o(c),Qr.delete(e);return}if(j_(r)){let{fd:c,path:l,position:u}=r,d=new Zi(a,c,l,u);s(d),Qr.delete(e);return}s(r),Qr.delete(e)}function yd(t,e){if(!t)throw f.With("EINVAL");t["on"in t?"on":"addEventListener"]("message",r=>{e("data"in r?r.data:r)})}var Zi=class extends xr{constructor(e,r,n,i){super(e,n),this.fs=e,this.fd=r,this.position=i}rpc(e,...r){return xa({scope:"file",fd:this.fd,method:e,args:r},this.fs.options)}_throwNoSync(e){throw new f(h.ENOTSUP,"Synchronous operations not supported on PortFile",this.path,e)}async stat(){return new q(await this.rpc("stat"))}statSync(){this._throwNoSync("stat")}truncate(e){return this.rpc("truncate",e)}truncateSync(){this._throwNoSync("truncate")}write(e,r,n,i){return this.rpc("write",e,r,n,i)}writeSync(){this._throwNoSync("write")}async read(e,r,n,i){return await this.rpc("read",e,r,n,i)}readSync(){this._throwNoSync("read")}chown(e,r){return this.rpc("chown",e,r)}chownSync(){this._throwNoSync("chown")}chmod(e){return this.rpc("chmod",e)}chmodSync(){this._throwNoSync("chmod")}utimes(e,r){return this.rpc("utimes",e,r)}utimesSync(){this._throwNoSync("utimes")}_setTypeSync(){this._throwNoSync("_setType")}close(){return this.rpc("close")}closeSync(){this._throwNoSync("close")}sync(){return this.rpc("sync")}syncSync(){this._throwNoSync("sync")}},pd=class extends Jr(de){constructor(e){super(),this.options=e,this._sync=Bt.create({name:"port-tmpfs"}),this.port=e.port,yd(this.port,hd)}metadata(){return{...super.metadata(),name:"PortFS"}}rpc(e,...r){return xa({scope:"fs",method:e,args:r},{...this.options,fs:this})}async ready(){await this.rpc("ready"),await super.ready()}rename(e,r){return this.rpc("rename",e,r)}async stat(e){return new q(await this.rpc("stat",e))}sync(e,r,n){return this.rpc("sync",e,r,n)}openFile(e,r){return this.rpc("openFile",e,r)}createFile(e,r,n){return this.rpc("createFile",e,r,n)}unlink(e){return this.rpc("unlink",e)}rmdir(e){return this.rpc("rmdir",e)}mkdir(e,r){return this.rpc("mkdir",e,r)}readdir(e){return this.rpc("readdir",e)}exists(e){return this.rpc("exists",e)}link(e,r){return this.rpc("link",e,r)}};function wd(t){class e extends t{metadata(){return{...super.metadata(),readonly:!0}}async rename(){throw new f(h.EROFS)}renameSync(){throw new f(h.EROFS)}async createFile(){throw new f(h.EROFS)}createFileSync(){throw new f(h.EROFS)}async unlink(){throw new f(h.EROFS)}unlinkSync(){throw new f(h.EROFS)}async rmdir(){throw new f(h.EROFS)}rmdirSync(){throw new f(h.EROFS)}async mkdir(){throw new f(h.EROFS)}mkdirSync(){throw new f(h.EROFS)}async link(){throw new f(h.EROFS)}linkSync(){throw new f(h.EROFS)}async sync(){throw new f(h.EROFS)}syncSync(){throw new f(h.EROFS)}}return e}var md=1,va=class t extends Map{files(){let e=new Map;for(let[r,n]of this)n.isFile()&&e.set(r,n);return e}toJSON(){return{version:md,entries:Object.fromEntries(this)}}toString(){return JSON.stringify(this.toJSON())}dirEntries(e){let r=[];for(let n of this.keys())E(n)==e&&r.push(se(n));return r}fromJSON(e){if(e.version!=md)throw new f(h.EINVAL,"Index version mismatch");this.clear();for(let[r,n]of Object.entries(e.entries)){let i=new q(n);i.isDirectory()&&(i.fileData=nt(JSON.stringify(this.dirEntries(r)))),this.set(r,i)}}static parse(e){if(!fc(e))throw new f(h.EINVAL,"Invalid JSON");let r=JSON.parse(e),n=new t;return n.fromJSON(r),n}},Ia=class extends wd(de){async ready(){await super.ready(),!this._isInitialized&&(this.index.fromJSON(await this.indexData),this._isInitialized=!0)}constructor(e){super(),this.indexData=e,this.index=new va,this._isInitialized=!1}async reloadFiles(){for(let[e,r]of this.index.files())delete r.fileData,r.fileData=await this.getData(e,r)}reloadFilesSync(){for(let[e,r]of this.index.files())delete r.fileData,r.fileData=this.getDataSync(e,r)}stat(e){return Promise.resolve(this.statSync(e))}statSync(e){if(!this.index.has(e))throw f.With("ENOENT",e,"stat");return this.index.get(e)}async openFile(e,r){if(Fe(r))throw new f(h.EPERM,e);let n=this.index.get(e);if(!n)throw f.With("ENOENT",e,"openFile");return new rn(this,e,r,n,n.isDirectory()?n.fileData:await this.getData(e,n))}openFileSync(e,r){if(Fe(r))throw new f(h.EPERM,e);let n=this.index.get(e);if(!n)throw f.With("ENOENT",e,"openFile");return new rn(this,e,r,n,n.isDirectory()?n.fileData:this.getDataSync(e,n))}readdir(e){return Promise.resolve(this.readdirSync(e))}readdirSync(e){let r=this.index.get(e);if(!r)throw f.With("ENOENT",e,"readdir");let n=JSON.parse(it(r.fileData));if(!Array.isArray(n))throw f.With("ENODATA",e,"readdir");if(!n.every(i=>typeof i=="string"))throw f.With("ENODATA",e,"readdir");return n}};var K=function(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e},G=function(t){return function(e){function r(o){e.error=e.hasError?new t(o,e.error,"An error was suppressed during disposal."):o,e.hasError=!0}var n,i=0;function s(){for(;n=e.stack.pop();)try{if(!n.async&&i===1)return i=0,e.stack.push(n),Promise.resolve().then(s);if(n.dispose){var o=n.dispose.call(n.value);if(n.async)return i|=2,Promise.resolve(o).then(s,function(a){return r(a),s()})}else i|=1}catch(a){r(a)}if(i===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return s()}}(typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n}),Aa=class{get isLocked(){return this._isLocked}constructor(e){this.previous=e,this.current=Promise.withResolvers(),this._isLocked=!0}async done(){var e;await((e=this.previous)===null||e===void 0?void 0:e.done()),await this.current.promise}unlock(){this.current.resolve(),this._isLocked=!1}[Symbol.dispose](){this.unlock()}},Ra=class{async ready(){return await this._fs.ready()}metadata(){return this._fs.metadata()}addLock(){let e=new Aa(this.currentLock);return this.currentLock=e,e}async lock(e,r){let n=this.currentLock,i=this.addLock(),s=new Error().stack;return setTimeout(()=>{if(i.isLocked){let o=f.With("EDEADLK",e,r);throw o.stack+=s?.slice(5),o}},5e3),await n?.done(),i}lockSync(e,r){var n;if(!((n=this.currentLock)===null||n===void 0)&&n.isLocked)throw f.With("EBUSY",e,r);return this.addLock()}get isLocked(){var e;return!!(!((e=this.currentLock)===null||e===void 0)&&e.isLocked)}async rename(e,r){let n={stack:[],error:void 0,hasError:!1};try{let i=K(n,await this.lock(e,"rename"),!1);await this._fs.rename(e,r)}catch(i){n.error=i,n.hasError=!0}finally{G(n)}}renameSync(e,r){let n={stack:[],error:void 0,hasError:!1};try{let i=K(n,this.lockSync(e,"rename"),!1);return this._fs.renameSync(e,r)}catch(i){n.error=i,n.hasError=!0}finally{G(n)}}async stat(e){let r={stack:[],error:void 0,hasError:!1};try{let n=K(r,await this.lock(e,"stat"),!1);return await this._fs.stat(e)}catch(n){r.error=n,r.hasError=!0}finally{G(r)}}statSync(e){let r={stack:[],error:void 0,hasError:!1};try{let n=K(r,this.lockSync(e,"stat"),!1);return this._fs.statSync(e)}catch(n){r.error=n,r.hasError=!0}finally{G(r)}}async openFile(e,r){let n={stack:[],error:void 0,hasError:!1};try{let i=K(n,await this.lock(e,"openFile"),!1),s=await this._fs.openFile(e,r);return s.fs=this,s}catch(i){n.error=i,n.hasError=!0}finally{G(n)}}openFileSync(e,r){let n={stack:[],error:void 0,hasError:!1};try{let i=K(n,this.lockSync(e,"openFile"),!1),s=this._fs.openFileSync(e,r);return s.fs=this,s}catch(i){n.error=i,n.hasError=!0}finally{G(n)}}async createFile(e,r,n){let i={stack:[],error:void 0,hasError:!1};try{let s=K(i,await this.lock(e,"createFile"),!1),o=await this._fs.createFile(e,r,n);return o.fs=this,o}catch(s){i.error=s,i.hasError=!0}finally{G(i)}}createFileSync(e,r,n){let i={stack:[],error:void 0,hasError:!1};try{let s=K(i,this.lockSync(e,"createFile"),!1),o=this._fs.createFileSync(e,r,n);return o.fs=this,o}catch(s){i.error=s,i.hasError=!0}finally{G(i)}}async unlink(e){let r={stack:[],error:void 0,hasError:!1};try{let n=K(r,await this.lock(e,"unlink"),!1);await this._fs.unlink(e)}catch(n){r.error=n,r.hasError=!0}finally{G(r)}}unlinkSync(e){let r={stack:[],error:void 0,hasError:!1};try{let n=K(r,this.lockSync(e,"unlink"),!1);return this._fs.unlinkSync(e)}catch(n){r.error=n,r.hasError=!0}finally{G(r)}}async rmdir(e){let r={stack:[],error:void 0,hasError:!1};try{let n=K(r,await this.lock(e,"rmdir"),!1);await this._fs.rmdir(e)}catch(n){r.error=n,r.hasError=!0}finally{G(r)}}rmdirSync(e){let r={stack:[],error:void 0,hasError:!1};try{let n=K(r,this.lockSync(e,"rmdir"),!1);return this._fs.rmdirSync(e)}catch(n){r.error=n,r.hasError=!0}finally{G(r)}}async mkdir(e,r){let n={stack:[],error:void 0,hasError:!1};try{let i=K(n,await this.lock(e,"mkdir"),!1);await this._fs.mkdir(e,r)}catch(i){n.error=i,n.hasError=!0}finally{G(n)}}mkdirSync(e,r){let n={stack:[],error:void 0,hasError:!1};try{let i=K(n,this.lockSync(e,"mkdir"),!1);return this._fs.mkdirSync(e,r)}catch(i){n.error=i,n.hasError=!0}finally{G(n)}}async readdir(e){let r={stack:[],error:void 0,hasError:!1};try{let n=K(r,await this.lock(e,"readdir"),!1);return await this._fs.readdir(e)}catch(n){r.error=n,r.hasError=!0}finally{G(r)}}readdirSync(e){let r={stack:[],error:void 0,hasError:!1};try{let n=K(r,this.lockSync(e,"readdir"),!1);return this._fs.readdirSync(e)}catch(n){r.error=n,r.hasError=!0}finally{G(r)}}async exists(e){let r={stack:[],error:void 0,hasError:!1};try{let n=K(r,await this.lock(e,"exists"),!1);return await this._fs.exists(e)}catch(n){r.error=n,r.hasError=!0}finally{G(r)}}existsSync(e){let r={stack:[],error:void 0,hasError:!1};try{let n=K(r,this.lockSync(e,"exists"),!1);return this._fs.existsSync(e)}catch(n){r.error=n,r.hasError=!0}finally{G(r)}}async link(e,r){let n={stack:[],error:void 0,hasError:!1};try{let i=K(n,await this.lock(e,"link"),!1);await this._fs.link(e,r)}catch(i){n.error=i,n.hasError=!0}finally{G(n)}}linkSync(e,r){let n={stack:[],error:void 0,hasError:!1};try{let i=K(n,this.lockSync(e,"link"),!1);return this._fs.linkSync(e,r)}catch(i){n.error=i,n.hasError=!0}finally{G(n)}}async sync(e,r,n){let i={stack:[],error:void 0,hasError:!1};try{let s=K(i,await this.lock(e,"sync"),!1);await this._fs.sync(e,r,n)}catch(s){i.error=s,i.hasError=!0}finally{G(i)}}syncSync(e,r,n){let i={stack:[],error:void 0,hasError:!1};try{let s=K(i,this.lockSync(e,"sync"),!1);return this._fs.syncSync(e,r,n)}catch(s){i.error=s,i.hasError=!0}finally{G(i)}}};function Sd(t){class e extends Ra{constructor(...n){super(),this._fs=new t(...n)}}return e}var es=function(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e},Ed=function(t){return function(e){function r(o){e.error=e.hasError?new t(o,e.error,"An error was suppressed during disposal."):o,e.hasError=!0}var n,i=0;function s(){for(;n=e.stack.pop();)try{if(!n.async&&i===1)return i=0,e.stack.push(n),Promise.resolve().then(s);if(n.dispose){var o=n.dispose.call(n.value);if(n.async)return i|=2,Promise.resolve(o).then(s,function(a){return r(a),s()})}else i|=1}catch(a){r(a)}if(i===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return s()}}(typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n}),Na="/.deleted",ka=class extends de{async ready(){await this.readable.ready(),await this.writable.ready(),await this._ready}constructor({writable:e,readable:r}){if(super(),this._isInitialized=!1,this._deletedFiles=new Set,this._deleteLog="",this._deleteLogUpdatePending=!1,this._deleteLogUpdateNeeded=!1,this.writable=e,this.readable=r,this.writable.metadata().readonly)throw new f(h.EINVAL,"Writable file system must be writable.");this._ready=this._initialize()}metadata(){return{...super.metadata(),name:Ta.name}}async sync(e,r,n){await this.copyForWrite(e),await this.writable.exists(e)||await this.writable.createFile(e,"w",420),await this.writable.sync(e,r,n)}syncSync(e,r,n){this.copyForWriteSync(e),this.writable.syncSync(e,r,n)}async _initialize(){if(!this._isInitialized){try{let e=await this.writable.openFile(Na,ee("r")),{size:r}=await e.stat(),{buffer:n}=await e.read(new Uint8Array(r));this._deleteLog=it(n)}catch(e){if(e.errno!==h.ENOENT)throw e}this._isInitialized=!0,this._reparseDeletionLog()}}getDeletionLog(){return this._deleteLog}async restoreDeletionLog(e){this._deleteLog=e,this._reparseDeletionLog(),await this.updateLog("")}async rename(e,r){this.checkInitialized(),this.checkPath(e),this.checkPath(r),await this.copyForWrite(e);try{await this.writable.rename(e,r)}catch{if(this._deletedFiles.has(e))throw f.With("ENOENT",e,"rename")}}renameSync(e,r){this.checkInitialized(),this.checkPath(e),this.checkPath(r),this.copyForWriteSync(e);try{this.writable.renameSync(e,r)}catch{if(this._deletedFiles.has(e))throw f.With("ENOENT",e,"rename")}}async stat(e){this.checkInitialized();try{return await this.writable.stat(e)}catch{if(this._deletedFiles.has(e))throw f.With("ENOENT",e,"stat");let r=await this.readable.stat(e);return r.mode|=146,r}}statSync(e){this.checkInitialized();try{return this.writable.statSync(e)}catch{if(this._deletedFiles.has(e))throw f.With("ENOENT",e,"stat");let r=this.readable.statSync(e);return r.mode|=146,r}}async openFile(e,r){if(await this.writable.exists(e))return this.writable.openFile(e,r);let n=await this.readable.openFile(e,ee("r")),i=await n.stat(),{buffer:s}=await n.read(new Uint8Array(i.size));return new oe(this,e,r,i,s)}openFileSync(e,r){if(this.writable.existsSync(e))return this.writable.openFileSync(e,r);let n=this.readable.openFileSync(e,ee("r")),i=n.statSync(),s=new Uint8Array(i.size);return n.readSync(s),new oe(this,e,r,i,s)}async createFile(e,r,n){return this.checkInitialized(),await this.writable.createFile(e,r,n),this.openFile(e,r)}createFileSync(e,r,n){return this.checkInitialized(),this.writable.createFileSync(e,r,n),this.openFileSync(e,r)}async link(e,r){this.checkInitialized(),await this.copyForWrite(e),await this.writable.link(e,r)}linkSync(e,r){this.checkInitialized(),this.copyForWriteSync(e),this.writable.linkSync(e,r)}async unlink(e){if(this.checkInitialized(),this.checkPath(e),!await this.exists(e))throw f.With("ENOENT",e,"unlink");await this.writable.exists(e)&&await this.writable.unlink(e),await this.exists(e)&&await this.deletePath(e)}unlinkSync(e){if(this.checkInitialized(),this.checkPath(e),!this.existsSync(e))throw f.With("ENOENT",e,"unlink");this.writable.existsSync(e)&&this.writable.unlinkSync(e),this.existsSync(e)&&this.deletePath(e)}async rmdir(e){if(this.checkInitialized(),!await this.exists(e))throw f.With("ENOENT",e,"rmdir");if(await this.writable.exists(e)&&await this.writable.rmdir(e),!!await this.exists(e)){if((await this.readdir(e)).length)throw f.With("ENOTEMPTY",e,"rmdir");await this.deletePath(e)}}rmdirSync(e){if(this.checkInitialized(),!this.existsSync(e))throw f.With("ENOENT",e,"rmdir");if(this.writable.existsSync(e)&&this.writable.rmdirSync(e),!!this.existsSync(e)){if(this.readdirSync(e).length)throw f.With("ENOTEMPTY",e,"rmdir");this.deletePath(e)}}async mkdir(e,r){if(this.checkInitialized(),await this.exists(e))throw f.With("EEXIST",e,"mkdir");await this.createParentDirectories(e),await this.writable.mkdir(e,r)}mkdirSync(e,r){if(this.checkInitialized(),this.existsSync(e))throw f.With("EEXIST",e,"mkdir");this.createParentDirectoriesSync(e),this.writable.mkdirSync(e,r)}async readdir(e){this.checkInitialized();let r=[];try{r.push(...await this.writable.readdir(e))}catch{}try{r.push(...(await this.readable.readdir(e)).filter(i=>!this._deletedFiles.has(`${e}/${i}`)))}catch{}let n={};return r.filter(i=>{let s=!n[i];return n[i]=!0,s})}readdirSync(e){this.checkInitialized();let r=[];try{r=r.concat(this.writable.readdirSync(e))}catch{}try{r=r.concat(this.readable.readdirSync(e).filter(i=>!this._deletedFiles.has(`${e}/${i}`)))}catch{}let n={};return r.filter(i=>{let s=!n[i];return n[i]=!0,s})}async deletePath(e){this._deletedFiles.add(e),await this.updateLog(`d${e}
`)}async updateLog(e){if(this._deleteLog+=e,this._deleteLogUpdatePending){this._deleteLogUpdateNeeded=!0;return}this._deleteLogUpdatePending=!0;let r=await this.writable.openFile(Na,ee("w"));try{await r.write(nt(this._deleteLog)),this._deleteLogUpdateNeeded&&(this._deleteLogUpdateNeeded=!1,await this.updateLog(""))}catch(n){this._deleteLogError=n}finally{this._deleteLogUpdatePending=!1}}_reparseDeletionLog(){this._deletedFiles.clear();for(let e of this._deleteLog.split(`
`))e.startsWith("d")&&this._deletedFiles.add(e.slice(1))}checkInitialized(){if(!this._isInitialized)throw new f(h.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.");if(!this._deleteLogError)return;let e=this._deleteLogError;throw delete this._deleteLogError,e}checkPath(e){if(e==Na)throw f.With("EPERM",e,"checkPath")}createParentDirectoriesSync(e){let r=E(e),n=[];for(;!this.writable.existsSync(r);)n.push(r),r=E(r);for(let i of n.reverse())this.writable.mkdirSync(i,this.statSync(i).mode)}async createParentDirectories(e){let r=E(e),n=[];for(;!await this.writable.exists(r);)n.push(r),r=E(r);for(let i of n.reverse()){let s=await this.stat(i);await this.writable.mkdir(i,s.mode)}}copyForWriteSync(e){if(!this.existsSync(e))throw f.With("ENOENT",e,"copyForWrite");this.writable.existsSync(E(e))||this.createParentDirectoriesSync(e),this.writable.existsSync(e)||this.copyToWritableSync(e)}async copyForWrite(e){if(!await this.exists(e))throw f.With("ENOENT",e,"copyForWrite");if(await this.writable.exists(E(e))||await this.createParentDirectories(e),!await this.writable.exists(e))return this.copyToWritable(e)}copyToWritableSync(e){let r={stack:[],error:void 0,hasError:!1};try{let n=this.statSync(e);if(n.isDirectory()){this.writable.mkdirSync(e,n.mode);return}let i=new Uint8Array(n.size);es(r,this.readable.openFileSync(e,"r"),!1).readSync(i),es(r,this.writable.createFileSync(e,"w",n.mode|146),!1).writeSync(i)}catch(n){r.error=n,r.hasError=!0}finally{Ed(r)}}async copyToWritable(e){let r={stack:[],error:void 0,hasError:!1};try{let n=await this.stat(e);if(n.isDirectory()){await this.writable.mkdir(e,n.mode);return}let i=new Uint8Array(n.size);await es(r,await this.readable.openFile(e,"r"),!0).read(i),await es(r,await this.writable.createFile(e,"w",n.mode|146),!0).write(i)}catch(n){r.error=n,r.hasError=!0}finally{let n=Ed(r);n&&await n}}},Ta=class extends Sd(ka){};function _d(t){class e extends t{async exists(n){return this.existsSync(n)}async rename(n,i){return this.renameSync(n,i)}async stat(n){return this.statSync(n)}async createFile(n,i,s){return this.createFileSync(n,i,s)}async openFile(n,i){return this.openFileSync(n,i)}async unlink(n){return this.unlinkSync(n)}async rmdir(n){return this.rmdirSync(n)}async mkdir(n,i){return this.mkdirSync(n,i)}async readdir(n){return this.readdirSync(n)}async link(n,i){return this.linkSync(n,i)}async sync(n,i,s){return this.syncSync(n,i,s)}}return e}globalThis.__zenfs__=vt;function z_(t){switch(t.name){case"IndexSizeError":case"HierarchyRequestError":case"InvalidCharacterError":case"InvalidStateError":case"SyntaxError":case"NamespaceError":case"TypeMismatchError":case"ConstraintError":case"VersionError":case"URLMismatchError":case"InvalidNodeTypeError":return"EINVAL";case"WrongDocumentError":return"EXDEV";case"NoModificationAllowedError":case"InvalidModificationError":case"InvalidAccessError":case"SecurityError":case"NotAllowedError":return"EACCES";case"NotFoundError":return"ENOENT";case"NotSupportedError":return"ENOTSUP";case"InUseAttributeError":return"EBUSY";case"NetworkError":return"ENETDOWN";case"AbortError":return"EINTR";case"QuotaExceededError":return"ENOSPC";case"TimeoutError":return"ETIMEDOUT";case"ReadOnlyError":return"EROFS";case"DataCloneError":case"EncodingError":case"NotReadableError":case"DataError":case"TransactionInactiveError":case"OperationError":case"UnknownError":default:return"EIO"}}function mt(t,e,r){if(t instanceof f)return t;let n=t instanceof DOMException?h[z_(t)]:h.EIO,i=new f(n,t.message,e,r);return i.stack=t.stack,i.cause=t.cause,i}function $_(t){return t instanceof ArrayBuffer?t.resizable:t instanceof SharedArrayBuffer?t.growable:!1}var gd=class extends Jr(de){constructor(e){super(),this._handles=new Map,this._sync=Bt.create({name:"accessfs-cache"}),this._handles.set("/",e)}metadata(){return{...super.metadata(),name:"WebAccess",noResizableBuffers:!0}}async sync(e,r){await this.writeFile(e,r)}async rename(e,r){let n=await this.getHandle(e);if(n instanceof FileSystemDirectoryHandle){let c=await this.readdir(e);if(await this.mkdir(r),!c.length){await this.unlink(e);return}for(let l of c)await this.rename(N(e,l),N(r,l)),await this.unlink(e);return}if(!(n instanceof FileSystemFileHandle))throw new f(h.ENOTSUP,"Not a file or directory handle",e,"rename");let i=await n.getFile().catch(c=>{throw mt(c,e,"rename")}),s=await this.getHandle(E(r));if(!(s instanceof FileSystemDirectoryHandle))return;let a=await(await s.getFileHandle(se(r),{create:!0}).catch(c=>{throw mt(c,r,"rename")})).createWritable();await a.write(await i.arrayBuffer()),await a.close(),await this.unlink(e)}async writeFile(e,r){if($_(r.buffer))throw new f(h.EINVAL,"Resizable buffers can not be written",e,"write");let n=await this.getHandle(E(e));if(!(n instanceof FileSystemDirectoryHandle))return;let s=await(await n.getFileHandle(se(e),{create:!0})).createWritable();await s.write(r),await s.close()}async createFile(e,r){return await this.writeFile(e,new Uint8Array),this.openFile(e,r)}async stat(e){let r=await this.getHandle(e);if(!r)throw f.With("ENOENT",e,"stat");if(r instanceof FileSystemDirectoryHandle)return new q({mode:16895,size:4096});if(r instanceof FileSystemFileHandle){let{lastModified:n,size:i}=await r.getFile();return new q({mode:33279,size:i,mtimeMs:n})}throw new f(h.EBADE,"Handle is not a directory or file",e,"stat")}async openFile(e,r){let n=await this.getHandle(e);if(!(n instanceof FileSystemFileHandle))throw f.With("EISDIR",e,"openFile");let i=await n.getFile().catch(a=>{throw mt(a,e,"openFile")}),s=new Uint8Array(await i.arrayBuffer()),o=new q({mode:33279,size:i.size,mtimeMs:i.lastModified});return new oe(this,e,r,o,s)}async unlink(e){let r=await this.getHandle(E(e));if(!(r instanceof FileSystemDirectoryHandle))throw f.With("ENOTDIR",E(e),"unlink");await r.removeEntry(se(e),{recursive:!0}).catch(n=>{throw mt(n,e,"unlink")})}async link(e){}async rmdir(e){return this.unlink(e)}async mkdir(e){if(await this.getHandle(e).catch(i=>{if(i.code!="ENOENT")throw i}))throw f.With("EEXIST",e,"mkdir");let n=await this.getHandle(E(e));if(!(n instanceof FileSystemDirectoryHandle))throw f.With("ENOTDIR",e,"mkdir");await n.getDirectoryHandle(se(e),{create:!0})}async readdir(e){let r=await this.getHandle(e);if(!(r instanceof FileSystemDirectoryHandle))throw f.With("ENOTDIR",e,"readdir");let n=[];for await(let i of r.keys())n.push(i);return n}async getHandle(e){if(this._handles.has(e))return this._handles.get(e);let r="/";for(let n of e.split("/").slice(1)){let i=this._handles.get(r);if(!(i instanceof FileSystemDirectoryHandle))throw f.With("ENOTDIR",r,"getHandle");r=N(r,n);let s=await i.getDirectoryHandle(n).catch(o=>{switch(o.name){case"TypeMismatchError":return i.getFileHandle(n).catch(a=>{});case"TypeError":throw new f(h.ENOENT,o.message,r,"getHandle");default:throw mt(o,r,"getHandle")}});s&&this._handles.set(r,s)}return this._handles.get(e)}};function wr(t){return new Promise((e,r)=>{t.onsuccess=()=>e(t.result),t.onerror=n=>{n.preventDefault(),r(mt(t.error))}})}var Oa=class extends Xn{constructor(e,r){super(r),this.tx=e,this.store=r,this._idb=e.objectStore(r.name)}async keys(){return(await wr(this._idb.getAllKeys())).filter(e=>typeof e=="string").map(e=>BigInt(e))}get(e){return wr(this._idb.get(e.toString()))}async set(e,r){await wr(this._idb.put(r,e.toString()))}remove(e){return wr(this._idb.delete(e.toString()))}async commit(){if(this.done)return;let{promise:e,resolve:r,reject:n}=Promise.withResolvers();return this.done=!0,this.tx.oncomplete=()=>r(),this.tx.onerror=()=>n(mt(this.tx.error)),this.tx.commit(),e}async abort(){if(this.done)return;this.done=!0;let{promise:e,resolve:r,reject:n}=Promise.withResolvers();return this.tx.onabort=()=>r(),this.tx.onerror=()=>n(mt(this.tx.error)),this.tx.abort(),e}};async function V_(t,e=globalThis.indexedDB){let r=e.open(t);return r.onupgradeneeded=()=>{let i=r.result;i.objectStoreNames.contains(t)&&i.deleteObjectStore(t),i.createObjectStore(t)},await wr(r)}var Fa=class{constructor(e){this.db=e}sync(){throw f.With("ENOSYS",void 0,"IndexedDBStore.sync")}get name(){return this.db.name}clear(){return wr(this.db.transaction(this.name,"readwrite").objectStore(this.name).clear())}clearSync(){throw f.With("ENOSYS",void 0,"IndexedDBStore.clearSync")}transaction(){let e=this.db.transaction(this.name,"readwrite");return new Oa(e,this)}},H_={name:"IndexedDB",options:{storeName:{type:"string",required:!1},idbFactory:{type:"object",required:!1}},async isAvailable(t=globalThis.indexedDB){try{if(!(t instanceof IDBFactory))return!1;let e=t.open("__zenfs_test");return await wr(e),!0}catch{return!1}finally{t.deleteDatabase("__zenfs_test")}},async create(t){let e=await V_(t.storeName||"zenfs",t.idbFactory),r=new Fa(e),n=new(Jr(Ke))(r);return t?.disableAsyncCache||(n._sync=Bt.create({name:"idb-cache"})),n}},bd=H_;var Id=["size","mode","atimeMs","mtimeMs","ctimeMs","birthtimeMs","uid","gid","ino","nlink"];function kn(t){let e={};for(let r of Id){let n=t.getAttribute(r);e[r]=n!=null?parseInt(n,16):void 0}return new q(e)}function xd(t,e){for(let r of Id)e[r]!=null&&t.setAttribute(r,e[r].toString(16))}function Da(t,e=!1){let r;try{let n=e?t.textContent:t.getAttribute("paths");r=JSON.parse(n||"[]")}catch{r=[]}return r}var vd=class extends _d(de){constructor(e=new DOMParser().parseFromString("<fs></fs>","application/xml").documentElement){super(),this.root=e;try{this.mkdirSync("/",511)}catch(r){let n=r;if(n.code!="EEXIST")throw n}}renameSync(e,r){let n=this.get("rename",e);this.remove("rename",n,e),this.add("rename",n,r)}statSync(e){return kn(this.get("stat",e))}openFileSync(e,r){let n=this.get("openFile",e);return new oe(this,e,r,kn(n),bs(n.textContent))}createFileSync(e,r,n){let i=new q({mode:n|32768});return this.create("createFile",e,i),new oe(this,e,r,i)}unlinkSync(e){let r=this.get("unlink",e);if(kn(r).isDirectory())throw f.With("EISDIR",e,"unlink");this.remove("unlink",r,e)}rmdirSync(e){let r=this.get("rmdir",e);if(r.textContent?.length)throw f.With("ENOTEMPTY",e,"rmdir");if(!kn(r).isDirectory())throw f.With("ENOTDIR",e,"rmdir");this.remove("rmdir",r,e)}mkdirSync(e,r){let n=this.create("mkdir",e,{mode:r|16384});n.textContent="[]"}readdirSync(e){let r=this.get("readdir",e);if(!kn(r).isDirectory())throw f.With("ENOTDIR",e,"rmdir");try{return JSON.parse(r.textContent)}catch(n){throw new f(h.EIO,"Invalid directory listing: "+n,e,"readdir")}}linkSync(e,r){let n=this.get("link",e);this.add("link",n,r)}syncSync(e,r,n){let i=this.get("sync",e);i.textContent=xs(r),xd(i,n)}toString(){return new XMLSerializer().serializeToString(this.root)}get(e,r){let n=this.root.children;if(!n)throw f.With("EIO",r,e);for(let i=0;i<n.length;i++)if(Da(n[i]).includes(r))return n[i];throw f.With("ENOENT",r,e)}create(e,r,n={}){if(this.existsSync(r))throw f.With("EEXIST",r,e);let i=document.createElement("file");return this.add(e,i,r),xd(i,new q(n)),this.root.append(i),i}add(e,r,n,i=!1){let s=Da(r,i);if(s.push(n),i){r.textContent=JSON.stringify(s);return}if(r.setAttribute("paths",JSON.stringify(s)),r.setAttribute("nlink",s.length.toString(16)),n!="/"){let o=this.get(e,E(n));this.add(e,o,se(n),!0)}}remove(e,r,n,i=!1){let s=Da(r,i),o=s.indexOf(n);if(o!=-1){if(s.splice(o,1),i){r.textContent=JSON.stringify(s);return}if(s.length?(r.setAttribute("paths",JSON.stringify(s)),r.setAttribute("nlink",s.length.toString(16))):r.remove(),n!="/"){let a=this.get(e,E(n));this.remove(e,a,se(n),!0)}}}};return Fd(K_);})();
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
